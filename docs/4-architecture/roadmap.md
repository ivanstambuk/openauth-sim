# Implementation Roadmap

_Last updated: 2025-10-21_

This roadmap tracks the major workstreams required to reach a feature-complete OpenAuth Simulator. Update this file whenever scope or status changes so future sessions can pick up without replaying prior conversations.

## Guiding Principles

- Prioritise core cryptographic capabilities and deterministic emulator behaviour before user-facing interfaces.
- Maintain incremental delivery: break every workstream into self-contained changes taking &lt;= 30 minutes each, with a passing build after every step.
- Persist all context (plans, ADRs, follow-up actions) in `docs/` so sessions remain stateless.

## High-Level Workstreams

| # | Workstream | Goal | Status | Notes |
|---|------------|------|--------|-------|
| 1 | Core OCRA domain | Model OCRA credential descriptors with validation, issuance, and presentation helpers reused by downstream facades | Complete | Spec: [Feature 001](specs/feature-001-core-credential-domain.md), Plan: [Feature Plan 001](feature-plan-001-core-domain.md), Tasks: [Feature 001 Tasks](tasks/feature-001-core-credential-domain.md); Final verification 2025-09-28 (`./gradlew spotlessApply check` with ArchUnit guardrails active) |
| 2 | OCRA persistence & caching | Tune MapDB + Caffeine (encryption options, compaction, metrics) for OCRA credential storage | Complete | Spec: [Feature 002](specs/feature-002-persistence-hardening.md), Plan: [Feature Plan 002](feature-plan-002-persistence-hardening.md), Tasks: [Feature 002 Tasks](tasks/feature-002-persistence-hardening.md); Final benchmarks (2025-09-28) record writes ≈2.57k ops/s, reads ≈330k ops/s, P99 ≈0.02283 ms |
| 3 | OCRA CLI tooling (Picocli) | Provide command-line flows to import, list, delete, and evaluate OCRA credentials | Complete | Feature 005 delivered OCRA import/list/delete/evaluate CLI (R017–R020 completed 2025-09-28). Non-OCRA protocols will launch separate workstreams. |
| 4 | OCRA REST API (Spring Boot) | Expose OCRA evaluation over REST with OpenAPI documentation | Complete | Feature 003 delivered OCRA evaluation, Feature 004 added credential lookup + dual-mode requests; future non-OCRA endpoints tracked separately |
| 5 | OCRA operator UI | Build an operator UI consuming the OCRA REST endpoint for manual operations | Complete | Spec: [Feature 006](specs/feature-006-ocra-operator-ui.md) closed after R075 validation on 2025-09-30; UI + REST/Selenium suites green via `rest-api:test` |
| 6 | OCRA quality automation | Enforce OCRA-specific architecture boundaries, expand test/coverage checks, integrate CI badges | Complete | Spec: [Feature 008](specs/feature-008-ocra-quality-automation.md), Plan: [Feature Plan 008](feature-plan-008-ocra-quality-automation.md), Tasks: [Feature 008 Tasks](tasks/feature-008-ocra-quality-automation.md); Quality gate revalidated 2025-10-01 (Jacoco 97.05 % line / 90.24 % branch, PIT 91.83 %) |
| 7 | OCRA specification alignment | Document OCRA references and compliance notes | Complete | Feature 007 (specs/feature-007-operator-docs.md) shipped Java/CLI/REST operator guides and synced README on 2025-09-30 |
| 8 | OCRA replay & verification | Enable OCRA credential replay flows (OTP verification with supplied OTP + context) | Complete | Spec: [Feature 009](specs/feature-009-ocra-replay-verification.md), Plan: [Feature Plan 009](feature-plan-009-ocra-replay-verification.md), Tasks: [Feature 009 Tasks](tasks/feature-009-ocra-replay-verification.md); Delivered 2025-10-01 with `./gradlew qualityGate` closure (Jacoco 97.31 % line / 90.08 % branch, PIT 91 %) |
| 9 | Reflection policy hardening | Eradicate reflection usage, add quality guardrails, update contributor guidance | Complete | Spec: [Feature 011](specs/feature-011-reflection-policy-hardening.md), Plan: [Feature Plan 011](feature-plan-011-reflection-policy-hardening.md), Tasks: [Feature 011 Tasks](tasks/feature-011-reflection-policy-hardening.md); Closed 2025-10-02 after `reflectionScan` + `qualityGate` reruns validated no-reflection guardrails |
| 10 | Java 17 language enhancements | Adopt sealed hierarchies and text blocks across OCRA CLI/REST internals | Complete | Spec: [Feature 013](specs/feature-013-java17-enhancements.md), Plan: [Feature Plan 013](feature-plan-013-java17-enhancements.md), Tasks: [Feature 013 Tasks](tasks/feature-013-java17-enhancements.md); Closed 2025-10-01 with `qualityGate` validation |
| 11 | Architecture harmonization | Share OCRA orchestration, persistence provisioning, telemetry, and DTO seams across facades while preparing protocol-specific modules | Complete | Spec: [Feature 014](specs/feature-014-architecture-harmonization.md), Plan: [Feature Plan 014](feature-plan-014-architecture-harmonization.md), Tasks: [Feature 014 Tasks](tasks/feature-014-architecture-harmonization.md); Closed 2025-10-02 after R1408 documentation sync + quality gate rerun |
| 12 | SpotBugs dead-state enforcement | Fail builds on unread/unwritten field detectors across JVM modules | Complete | Spec: [Feature 015](specs/feature-015-spotbugs-dead-state-enforcement.md), Plan: [Feature Plan 015](feature-plan-015-spotbugs-dead-state-enforcement.md), Tasks: [Feature 015 Tasks](tasks/feature-015-spotbugs-dead-state-enforcement.md); Closed 2025-10-03 after SpotBugs+PMD guardrails verified via `./gradlew :rest-api:pmdTest` and root `check` |
| 27 | Unified credential store naming | Adopt a shared `credentials.db` default across facades and retire legacy filename fallbacks | In progress | Spec: [Feature 027](specs/feature-027-unified-credential-store.md), Plan: [Feature Plan 027](feature-plan-027-unified-credential-store.md), Tasks: [Feature 027 Tasks](tasks/feature-027-unified-credential-store.md); Kickoff 2025-10-18 targeting CLI/REST/persistence alignment plus documentation updates |
| 13 | HOTP operator support | Deliver HOTP credential flows (issuance, validation, operator tooling) across core/application/UI channels | Complete | Spec: [Feature 022](specs/feature-022-hotp-operator-support.md), Plan: [Feature Plan 022](feature-plan-022-hotp-operator-support.md), Tasks: [Feature 022 Tasks](tasks/feature-022-hotp-operator-support.md); R2293 completed replay sample integration, 2025-10-08 sealed the workstream after R2242 stored-mode seeding coverage verification + `./gradlew spotlessApply check`, and 2025-10-13 R2295 landed the shared `docs/hotp_validation_vectors.json` catalogue with loader-driven presets/documentation refresh. |
| 14 | TOTP operator support | Provide TOTP credential lifecycle and operator console integrations | Complete | Spec: [Feature 023](specs/feature-023-totp-operator-support.md), Plan: [Feature Plan 023](feature-plan-023-totp-operator-support.md), Tasks: [Feature 023 Tasks](tasks/feature-023-totp-operator-support.md); R2330–R2341 delivered presets, seeding, stored sample diagnostics, and final `./gradlew spotlessApply check` verification on 2025-10-09 |
| 15 | EUDIW OpenID4VP simulator | Simulate verifiable presentation requests for EUDI wallet OpenID4VP 1.0 flows | Not started | Spec: TBA; roadmap entry seeded per Feature 020 directive |
| 16 | EUDIW ISO/IEC 18013-5 simulator | Surface ISO/IEC 18013-5 credential presentation workflows for EUDI wallets | Not started | Spec: TBA; roadmap entry seeded per Feature 020 directive |
| 17 | EUDIW SIOPv2 simulator | Implement SIOPv2 authentication flows aligned with EUDI wallet guidance | Not started | Spec: TBA; roadmap entry seeded per Feature 020 directive |
| 18 | Quality gate reinstatement | Restore Jacoco thresholds to ≥0.90 line/branch and re-enable PIT in developer builds once HOTP scope stabilises | Planned | Temporary relaxation to ≥0.70 recorded 2025-10-06; follow-up will revisit coverage hot spots and reinstate mutation checks |
| 19 | FIDO2/WebAuthn operator support | Launch WebAuthn assertion verification across core, persistence, CLI, REST, and operator UI with preset/seed utilities | Complete | Spec: [Feature 024](specs/feature-024-fido2-webauthn-operator-support.md), Plan: [Feature Plan 024](feature-plan-024-fido2-webauthn-operator-support.md), Tasks: [Feature 024 Tasks](tasks/feature-024-fido2-webauthn-operator-support.md); Kickoff 2025-10-09 with W3C §16 fixture staging (T1); CLI façade (T5) verified 2025-10-10 under sandbox escalation; 2025-10-15 reran `./gradlew --no-daemon spotlessApply check` and `qualityGate` after the final UI parity increments to confirm green closure |
| 20 | Sample vector label harmonization | Harmonise operator UI preset labels across HOTP/TOTP/OCRA/FIDO2 with a compact attribute-focused format | Complete | Spec: [Feature 025](specs/feature-025-sample-vector-label-harmonization.md), Plan: [Feature Plan 025](feature-plan-025-sample-vector-label-harmonization.md), Tasks: [Feature 025 Tasks](tasks/feature-025-sample-vector-label-harmonization.md); 2025-10-12 compacted HOTP/TOTP inline preset labels, refreshed Selenium/API expectations, closed the task with spotless + targeted :rest-api:test runs, expanded HOTP inline presets to cover SHA-1/256/512 across 6- and 8-digit variants, removed the redundant “seeded demo” suffix, and aligned stored seeding with every inline preset |
| 21 | FIDO2 attestation support | Provide WebAuthn attestation generation and verification across core/application/CLI/REST/operator UI | Complete | Spec: [Feature 026](specs/feature-026-fido2-attestation-support.md), Plan: [Feature Plan 026](feature-plan-026-fido2-attestation-support.md), Tasks: [Feature 026 Tasks](tasks/feature-026-fido2-attestation-support.md); I1–I3 delivered fixture scaffolding, core verifier, and application telemetry by 2025-10-16; I4 (CLI façade) landed 2025-10-16 with new `fido2 attest`/`attest-replay` commands and updated operator docs; I5 (REST endpoints) implemented the `/api/v1/webauthn/attest` and `/attest/replay` flows with refreshed OpenAPI snapshots; I6–I7 (operator UI toggles) closed 2025-10-17 and introduced inline-only attestation Evaluate/Replay flows; I8 (attestation fixture ingestion + JWK exposure) closed 2025-10-19 with CLI/REST/UI inputs rejecting legacy Base64 private keys; I19–I24 wrapped on 2025-10-20 adding manual-mode generation with CLI/REST/UI parity and telemetry overrides; I26–I30 (2025-10-21) delivered stored attestation seeding, shared MapDB persistence, operator selectors, and CLI/REST metadata endpoints with analysis gate revalidated 2025-10-21; scope reopened 2025-10-26 (Option B) to add stored replay across facades and remove the attestation identifier UI field—2025-10-27 closed I32–I34 (stored replay scaffolding, CLI/REST wiring, Selenium flow fix); 2025-10-28 shipped I41 with the synthetic PS256 packed fixture plus CLI/REST/UI documentation updates. |
| 22 | IDE warning remediation | Resolve the 2025-10-18 IDE warning set by strengthening assertions/usages and removing redundant assignments without altering behaviour | Proposed | Spec: [Feature 028](specs/feature-028-ide-warning-remediation.md), Plan: [Feature Plan 028](feature-plan-028-ide-warning-remediation.md), Tasks: [Feature 028 Tasks](tasks/feature-028-ide-warning-remediation.md); Pending increments cover application constructors cleanup, FIDO2/WebAuthn assertion wiring, CLI/REST unit test updates, Selenium assertions, and a final spotlessApply check |
| 23 | PMD rule hardening | Expand PMD rule coverage across domain/service layers with scoped Law-of-Demeter enforcement and contributor guidance updates | Proposed | Spec: [Feature 029](specs/feature-029-pmd-rule-hardening.md), Plan: [Feature Plan 029](feature-plan-029-pmd-rule-hardening.md), Tasks: [Feature 029 Tasks](tasks/feature-029-pmd-rule-hardening.md); Kickoff 2025-10-19 focuses on rule activation, Law-of-Demeter whitelists, module remediation, documentation refresh, and a final spotlessApply + PMD verification. |
| 24 | Gradle 9 upgrade | Move the build wrapper to Gradle 9.1.0 while keeping tooling, quality plugins, and generated artefacts aligned | Complete | Spec: [Feature 030](specs/feature-030-gradle-9-upgrade.md), Plan: [Feature Plan 030](feature-plan-030-gradle-9-upgrade.md), Tasks: [Feature 030 Tasks](tasks/feature-030-gradle-9-upgrade.md); Completed 2025-10-19 with PIT plugin bumped to 1.19.0-rc.2, `--warning-mode=all clean check` verified post-upgrade, and no artefact diffs detected. |
| 31 | Legacy entry-point removal | Retire CLI/UI compatibility shims so telemetry, routing, and networking rely solely on the unified contracts | Complete | Spec: [Feature 031](specs/feature-031-legacy-entrypoint-removal.md), Plan: [Feature Plan 031](feature-plan-031-legacy-entrypoint-removal.md), Tasks: [Feature 031 Tasks](tasks/feature-031-legacy-entrypoint-removal.md); T3101–T3108 (2025-10-19) delivered adapter-only CLI telemetry, removed the `__openauth*` and `legacySetMode` bridges, shifted the operator consoles to fetch-only networking with HtmlUnit’s polyfill, aligned WebAuthn presets with W3C identifiers, and completed the documentation/knowledge map/changelog sync alongside an analysis gate rerun. |
| 32 | Formatter policy modernization | Adopt Palantir Java Format 2.78.0 across tooling and repository | Complete | Spec: [Feature 032](specs/feature-032-palantir-formatter-adoption.md), Plan: [Feature Plan 032](feature-plan-032-palantir-formatter-adoption.md), Tasks: [Feature 032 Tasks](tasks/feature-032-palantir-formatter-adoption.md); On 2025-10-19 Spotless/Git hooks switched to Palantir 2.78.0, all JVM sources were reformatted, docs updated, and `./gradlew --no-daemon spotlessApply check` (with lock refresh) confirmed the policy change. |
| 34 | Unified validation feedback surfaces | Ensure operator-console result cards always display API validation messages | Complete | Spec: [Feature 034](specs/feature-034-unified-validation-feedback.md), Plan: [Feature Plan 034](feature-plan-034-unified-validation-feedback.md), Tasks: [Feature 034 Tasks](tasks/feature-034-unified-validation-feedback.md); Delivered 2025-10-22 after OCRA evaluate/replay adopted the shared ResultCard helper, operator docs were refreshed, and `./gradlew --no-daemon spotlessApply check` closed the workstream. |
| 35 | Evaluate & replay audit tracing | Provide per-request verbose audit traces for all credential evaluation/replay/attest flows | In progress | Spec: [Feature 035](specs/feature-035-evaluate-replay-audit-tracing.md), Plan: [Feature Plan 035](feature-plan-035-evaluate-replay-audit-tracing.md), Tasks: [Feature 035 Tasks](tasks/feature-035-evaluate-replay-audit-tracing.md); 2025-10-22 wired HOTP/TOTP/OCRA/WebAuthn evaluation + attestation verbose traces with unit coverage, CLI plumbing, and operator UI verbose-toggle/trace panel. Remaining scope: OCRA REST contract coverage + docs polish. |
| 36 | Verbose trace tier controls | Introduce cross-protocol tier filtering so verbose traces expose normal/educational/lab-secrets detail levels consistently | Proposed | Spec: [Feature 036](specs/feature-036-verbose-trace-tier-controls.md), Plan: [Feature Plan 036](feature-plan-036-verbose-trace-tier-controls.md), Tasks: [Feature 036 Tasks](tasks/feature-036-verbose-trace-tier-controls.md); Scoped 2025-10-25 to deliver shared tier helper + protocol tagging ahead of future facade toggles. |

## Upcoming Milestones

1. Prepare specifications and feature plans for Workstreams 16–18 before initiating implementation; capture clarifications in `docs/4-architecture/open-questions.md`.
2. Confirm the next high-priority facade effort (e.g., additional FIDO2 increments or forthcoming EUDIW simulators) through the clarification gate and update roadmap/scope documents.
3. Monitor SpotBugs/PMD runtime impact post-Feature 015 rollout and capture build timing metrics in `docs/5-operations/analysis-gate-checklist.md` by 2025-10-07.
4. Standardise operator preset labels per Feature 025 before expanding sample catalogues for future protocols; update Selenium and documentation coverage alongside the rename.
5. Prototype educational simulator UI flows under a future feature once prioritised to complement human operators.
6. Complete Feature 011 increments (reflection removal + guardrails) and roll the policy into standard operating instructions.
7. Evaluate enabling operator UI issuance flows across all credential types once facade telemetry stabilises; decision pending per 2025-10-05 directive.
8. Kick off Feature 024 increments once W3C vector fixtures are staged and analysis gate checklist is satisfied.

## Action Items & Follow-ups

- [ ] Capture ADRs for crypto design decisions (key formats, hashing algorithms, etc.).
- [ ] Identify specification links for inclusion in docs once network lookups are permitted.

Keep this roadmap synced with each significant decision or completion event.
