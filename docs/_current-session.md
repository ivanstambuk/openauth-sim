# Current Session Snapshot

> Keep this file up to date across all active chats. Treat it as the single source of truth for in-progress workstreams so every hand-off is instant. Replace the bracketed text and prune sections you do not need.

- Date: 2025-12-13
- Primary branch: `main`
- Other active branches: none

## Governance & Tooling

- Governance log (2025-12-13, hook guard): `git config core.hooksPath` → `githooks` (verified before staging the Playwright UI visual snapshot harness).
- Governance log (2025-12-13, facade boundary ArchUnit suite): Centralized facade package constants and boundary bans in `FacadeBoundariesArchitectureTest` (CLI↔REST, MCP↔REST, MCP↔core, and MapDbCredentialStore bans). Refactored existing ArchUnit tests to reuse the shared constants. Commands: `./gradlew --no-daemon :core-architecture-tests:test` and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, docs-only verification lane): Added `tools/docs-verify.sh` (Spotless misc + markdown checks) and `tools/scripts/check-markdown-links.py` to provide a fast iteration lane for doc-only increments. Documented the lane in [AGENTS.md](AGENTS.md), [docs/5-operations/session-quick-reference.md](docs/5-operations/session-quick-reference.md), and Feature 011 spec/plan/tasks. Commands: `./tools/docs-verify.sh --all` (PASS) and `./tools/hook-guard-log.sh ./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, Agent Delivery Optimization closeout protocol): Documented the ADO closeout note (max 5 bullets, action-only) and the “green increment ⇒ commit-prep handoff” default in AGENTS + session quick reference and Feature 011 spec/plan/tasks, and added a reminder to `tools/codex-commit-review.sh` so commit handoffs include ADO. Commands: `./tools/docs-verify.sh --all` and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, operator console visual snapshots): Added a Playwright-based headless snapshot harness (`tools/ui-visual/`) that clicks protocol tabs and captures `/ui/console` screenshots into `build/ui-snapshots/**` (local-only). Commands: `bash tools/ui-visual/run-operator-console-snapshots.sh`, `./tools/docs-verify.sh --all`, and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, operator console visual snapshots interactive states): Extended the Playwright harness to capture representative inline/stored Evaluate + Replay result states (right-side result panels) across supported protocols, pre-seeding canonical credentials via API + reload to avoid cached empty inventories. Commands: `bash tools/ui-visual/run-operator-console-snapshots.sh`, `./tools/docs-verify.sh --all`, and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, operator console snapshots retention): Added `UI_VISUAL_MAX_RUNS` pruning to keep `build/ui-snapshots/**` bounded by deleting the oldest run directories before creating a new run (default keep: 10). Commands: `UI_VISUAL_MAX_RUNS=5 bash tools/ui-visual/run-operator-console-snapshots.sh`, `./tools/docs-verify.sh --all`, and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, operator console visual QA loop): Documented the capture → review → backlog → validate protocol for using snapshot runs as the artifact for AI visual review and UI drift detection. Commands: `./tools/docs-verify.sh --all` and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-13, operator console visual QA triage): Added deterministic time freezing plus triage artefacts (diff ranking + montages) under `build/ui-snapshots/<run-id>/triage/` to reduce review latency. Commands: `bash tools/ui-visual/run-operator-console-snapshots.sh`, `./tools/docs-verify.sh --all`, and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-12, Gradle quality conventions): Extracted the root `subprojects { ... }` quality configuration into `gradle/quality-conventions.gradle` (applied via `gradle/quality-conventions.gradle.kts`), preserving task semantics while keeping the root build shorter. Commands: `./gradlew --no-daemon spotlessApply check` (PASS) and `./gradlew --no-daemon qualityGate` (PASS).
- Governance log (2025-12-12, JSON/OpenAPI schema governance): Migrated the temporary JSON + telemetry governance sketch into Feature 013 spec/plan/tasks, added `$ref`-aware `JsonShapeAsserter` (core test fixtures) plus REST `OpenApiSchemaAssertions`, tagged representative REST endpoint tests for runtime OpenAPI schema validation, and introduced the `:rest-api:schemaContractTest` runner. Tightened REST OpenAPI response required fields, regenerated OpenAPI snapshots, and aligned EMV trace schema union handling via an OpenAPI customizer. Commands: `git config core.hooksPath` → `githooks`, `OPENAPI_SNAPSHOT_WRITE=true ./gradlew --no-daemon :rest-api:test --tests "*OpenApiSnapshotTest"`, `./gradlew --no-daemon :rest-api:schemaContractTest`, and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-12, cross-facade contract tests): Migrated the temporary cross-facade parity sketch into Feature 013 spec/plan/tasks, added canonical scenario fixtures in `application` test fixtures, and introduced tagged `*CrossFacadeContractTest` suites for HOTP/TOTP/OCRA/FIDO2/EMV/CAP/EUDIW across Native Java/CLI/REST. Added `:rest-api:crossFacadeContractTest` helper task and refreshed dependency locks. Commands: `./gradlew --no-daemon :rest-api:test --tests "*CrossFacadeContractTest"` and `./gradlew --no-daemon check` (PASS).
- Governance log (2025-12-12, cross-facade contract harness utilities): Extracted shared test-only harness helpers (`CanonicalScenarios`, `ScenarioStores`, `JsonEnvelope`, `PicocliHarness`, and per-protocol `*ContractRequests`) and refactored the cross-facade parity suites to use them so new scenarios require minimal wiring. Commands: `./gradlew --no-daemon :rest-api:test --tests "*CrossFacadeContractTest"` and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-12, cross-facade adapter runner): Added `CrossFacadeContractRunner` and refactored the tagged `*CrossFacadeContractTest` suites to use per-protocol facade executors (Native/REST/CLI) instead of repeated environment bootstrapping logic. Command: `./gradlew --no-daemon :rest-api:test --tests "*CrossFacadeContractTest"` (PASS).
- Governance log (2025-12-12, dependency lock refresh workflow): Updated [AGENTS.md](AGENTS.md), [docs/5-operations/session-quick-reference.md](docs/5-operations/session-quick-reference.md), and Feature 011 spec/plan/tasks to document a “refresh locks early” workflow when Gradle dependencies change (use `--write-locks :<module>:check` or `:<module>:pmdTest` and commit `gradle.lockfile` diffs with the dependency change). Commands: `git config core.hooksPath` → `githooks` and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-12, hooks guard before staging): `git config core.hooksPath` → `githooks` (confirmed managed hooks active for this commit prep).
- Governance log (2025-12-12, commit-message semicolon ban + Git handoff protocol): Updated managed hooks to reject semicolons in commit messages (commit-msg enforced), and refreshed Feature 011 spec/plan/tasks plus AGENTS/runbooks to mandate multi-`-m` commit bodies and fenced-code-block Git commands when handing off commits. Commands: `git config core.hooksPath`, `tmp_index=$(mktemp); GIT_INDEX_FILE=$tmp_index ./githooks/pre-commit`, `./githooks/commit-msg <temp-message-file>`, and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-12, low-ambiguity fast path exception): Updated [AGENTS.md](AGENTS.md) and [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) to allow a “low-ambiguity fast path” for purely mechanical/logistical questions (for example timeouts, which Gradle task to run, file paths) while keeping the open-questions-first rule for high-/medium-impact ambiguity; recorded the policy in Feature 011 spec/tasks. Commands: `git config core.hooksPath` (githooks), temporary-index `./githooks/pre-commit` (skipped, no staged changes), `./githooks/commit-msg` (PASS), and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-12, session-start recap rule loosened): Updated [AGENTS.md](AGENTS.md) and Feature 011 spec/tasks so roadmap/feature/open-question summaries are required only on session reset or when the user explicitly asks for status/context (not on every fresh interaction). Commands: `git config core.hooksPath` (githooks), temporary-index `./githooks/pre-commit` (skipped, no staged changes), `./githooks/commit-msg` (PASS), and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-11, facade seam ArchUnit expansion): Broadened `FacadeDelegationArchitectureTest` to assert CLI/REST HOTP/TOTP/OCRA facades depend on application layer and added a UI MapDB avoidance rule; introduced `OcraCredentialManagementApplicationService.usingDefaults` to keep REST off core factories and reworked CLI OCRA management wiring. Command: `./gradlew --no-daemon :core-architecture-tests:test` (PASS).
- Governance log (2025-12-11, HOTP directory labels + OpenAPI refresh): HOTP directory summaries now surface seeded option labels via `HotpOperatorSampleData`; added metadata-aware label fallback and regenerated REST OpenAPI snapshots (`OPENAPI_SNAPSHOT_WRITE=true ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.OpenApiSnapshotTest"`). 
- Verification log (2025-12-11, full gate): `./gradlew --no-daemon spotlessApply check` (PASS – Selenium UI suites green after HOTP seeding label fix).
- Analysis log (2025-12-11, facade seam Phase 2 scans):  
  - `rg --count "io\\.openauth\\.sim\\.core" cli rest-api ui tools standalone` → production hits limited to CLI main classes (Hotp/Totp/Ocra/Emv/Fido2/Eudiw) and REST services/configurations; remainder are tests/fixtures.  
  - `rg --count "MapDbCredentialStore" cli rest-api ui tools standalone` → only Maintenance CLI (prod) and OCRA/TOTP REST tests; no REST/CLI production facades depend on MapDB directly.  
  - `rg --count "CredentialStoreFactory" cli rest-api ui tools standalone` → expected usage concentrated in CLI/REST configurations and Maintenance CLI; note production reliance is via factory seams.
- Governance log (2025-12-11, facade seam ArchUnit rollout): Extended `FacadeDelegationArchitectureTest` to cover EMV/CAP, FIDO2/WebAuthn, EUDIW REST facades and EMV/FIDO/EUDIW CLI facades for application-layer delegation. Commands: `./gradlew --no-daemon :core-architecture-tests:test` (PASS) and `./gradlew --no-daemon spotlessApply check` (PASS, full repo).
- Governance log (2025-12-10, REST reasonCode parity): Added REST OpenAPI reasonCode enums via @Schema annotations across HOTP/TOTP/EMV/OCRA/WebAuthn responses and introduced `RestOpenApiReasonCodeParityTest` to enforce telemetry parity; regenerated snapshots with `OPENAPI_SNAPSHOT_WRITE=true ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.OpenApiSnapshotTest"` and reran `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.RestOpenApiReasonCodeParityTest"` plus `./gradlew --no-daemon spotlessApply check` (all PASS).
- Governance log (2025-12-10, CLI schema loader centralisation): Added shared `CliSchemaLoader` in `core` test fixtures and wired both CLI tests (`CliJsonSchemas`) and application parity guard (`CliSchemaParityTest`) to use it; updated `application` test deps to include `testFixtures(projects.core)`. Commands: `./gradlew --no-daemon :application:test --tests "io.openauth.sim.application.telemetry.CliSchemaParityTest"` (PASS) and `./gradlew --no-daemon spotlessApply check` (PASS).

- Governance log (2025-12-10, HOTP CLI JSON schema guard): Tightened `HotpCliTest.evaluateInlineEmitsJsonWhenRequested` to validate output against `cli.hotp.evaluate` in `docs/3-reference/cli/cli.schema.json` via `JsonShapeAsserter/CliJsonSchemas`; commands: `./gradlew --no-daemon :cli:test` (PASS) and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, TOTP reasonCode parity): Expanded `cli.totp.evaluate` envelope/data `reasonCode` enums in `docs/3-reference/cli/cli.schema.json` to match runtime telemetry (`generated`, `validated`, `credential_not_found`, `otp_invalid_format`, `otp_out_of_window`, `shared_secret_invalid`, `validation_error`, `unexpected_error`); commands: `./gradlew --no-daemon :cli:test` (PASS) and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, TOTP telemetry/schema parity guard): Added a telemetry-to-schema parity check in `TotpTelemetryContractTest` to assert the `cli.totp.evaluate` envelope/data `reasonCode` enums equal the telemetry reasonCode set; commands: `./gradlew --no-daemon :application:test` (PASS) and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, HOTP/EMV/FIDO2 telemetry/schema guards): Added `CliSchemaParityTest` to assert CLI schema enums contain telemetry reason codes for `cli.hotp.evaluate`, `cli.emv.cap.evaluate`, and `cli.fido2.evaluate`, and that envelope/data enums stay aligned where present; commands: `./gradlew --no-daemon :application:test` (PASS) and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, HOTP evaluate reasonCode alignment): Updated `HotpEvaluationApplicationService.TelemetrySignal.emit` to emit HOTP evaluation success frames via `TelemetryContracts.hotpEvaluationAdapter().status("success", "generated", …)` so envelope `reasonCode` is `generated` (matching REST and CLI `data.reasonCode`), adjusted telemetry contract tests (`TelemetryContractTestSupport.assertHotpEvaluationSuccessFrame`, `HotpTelemetryContractTest`) accordingly, and reran `./gradlew --no-daemon :application:test`, `./gradlew --no-daemon :cli:test`, and `./gradlew --no-daemon spotlessApply check` (all PASS).
- Governance log (2025-12-10, CLI reasonCode guard tests + HOTP JSON test): Added `reasonCode` enum guardrails in `CliSchemaCommandsTreeTest` to enforce enums for `reasonCode` fields and parity between envelope and `data.reasonCode` enums in `docs/3-reference/cli/cli.schema.json`, updated `HotpCliTest.evaluateInlineEmitsJsonWhenRequested` to assert structured JSON output without debug failures, and reran `./gradlew --no-daemon :cli:test` (PASS) plus `./gradlew --no-daemon spotlessApply check` (PASS).

- Governance log (2025-12-10, OCRA CLI reasonCode enum alignment): Tightened `docs/3-reference/cli/cli.schema.json` envelope `reasonCode` for `cli.ocra.verify` to enum `["match","strict_mismatch","validation_error","credential_not_found","unexpected_error"]` (matching `data.reasonCode`). Commands: `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest.*"` (PASS), `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, FIDO2 replay/attest-replay reasonCode enums): Added explicit envelope `reasonCode` enums to `cli.fido2.replay` and `cli.fido2.attestReplay` in `docs/3-reference/cli/cli.schema.json` (replay: match/verified/credential_not_found/…/unexpected_error; attest-replay: match/verified/self_attested/anchor_mismatch/stored_* variants/…/unexpected_error) and aligned `data.reasonCode` for replay. Commands: `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.Fido2CliTest.*"` (PASS), `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, EUDIW CLI status enums verification): Confirmed `docs/3-reference/cli/cli.schema.json` already allows `status` `success|invalid|error` for `cli.eudiw.request.create`, `cli.eudiw.wallet.simulate`, and `cli.eudiw.validate`; no schema edits required in this pass. Commands: `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, EUDIW CLI status enum widening): Updated `docs/3-reference/cli/cli.schema.json` to allow `status` values `success|invalid|error` for `cli.eudiw.request.create`, `cli.eudiw.wallet.simulate`, and `cli.eudiw.validate`. Commands: `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, EUDIW CLI status runtime alignment): Updated `EudiwCli` to emit JSON envelopes with `status` `success|invalid|error` (and corresponding `reasonCode`) when `--output-json` is used, added problem-details handling for validation failures, and expanded the CLI schema definitions to accept failure payloads. Commands: `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, CLI schema registry format clarification): Documented `docs/3-reference/cli/cli.schema.json` as an OpenCLI descriptor with embedded Draft-07 event schemas (ADR-0014 + reference README), clarified `CliJsonSchemas` to ignore the top-level meta-schema, and added a guard test for embedded `$schema` values. Commands: `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, session reset "Read project context" – current run): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` with ongoing CLI schema registry consolidation (aggregated `docs/3-reference/cli/cli.schema.json`, per-command schema deletions), CLI command/test updates across HOTP/TOTP/OCRA/EMV/FIDO2/EUDIW, telemetry/doc tweaks, and untracked helpers (`Next task.md`, `cli/CliSchemaCommandsTreeTest`, `docs/4-architecture/spec-guidelines/open-questions-format.md`).
- Governance log (2025-12-10, CLI schema commands tree guardrails): Added ADR-0014 schema registry guardrail note and new `CliSchemaCommandsTreeTest` to enforce that `commands[].metadata[].value.event` entries map to `definitions` and output examples reference matching events; commands: `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.CliSchemaCommandsTreeTest"` (PASS), `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (first attempt timed out at 300s, reran with `timeout_ms=600000` PASS).
- Governance log (2025-12-10, CLI reasonCode enums for HOTP/TOTP/EMV/FIDO2/EUDIW): Extended the closed-enum `reasonCode` pattern to HOTP (`cli.hotp.evaluate`/`list`), TOTP (`cli.totp.evaluate`/`list`), EMV/CAP (`cli.emv.cap.evaluate` telemetry envelope), FIDO2 (`cli.fido2.evaluate`/`attest`/`seed-attestations`/`vectors`), and EUDIW CLI events (`cli.eudiw.request.create`/`wallet.simulate`/`validate`) in `docs/3-reference/cli/cli.schema.json`, updated ADR-0014 to describe the cross-protocol contract, and reran `./gradlew --no-daemon :cli:test` (PASS) plus `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, HOTP CLI issuance status discrepancy): Logged Q-HOTP-CLI-ISSUE-STATUS in [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) to decide the canonical top-level `status` value for `cli.hotp.issue` (`success` vs `issued`) and tightened the global CLI schema envelope enums for HOTP/TOTP/OCRA/EMV/FIDO2 events; HotpCliTest now surfaces the semantic mismatch while JSON shape validation remains green.
- Governance log (2025-12-10, HOTP CLI issuance envelope alignment): Resolved Q-HOTP-CLI-ISSUE-STATUS with `status="success"` + `reasonCode="issued"`, updated application telemetry/CLI schema/spec/tests accordingly, and ran `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.HotpCliTest.importEmitsJsonWhenRequested"`, `./gradlew --no-daemon :cli:test`, `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, CLI schema HOTP command cleanup): Removed the stray OCRA-wired `evaluate` subcommand from the HOTP command tree in `docs/3-reference/cli/cli.schema.json`; ran `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.HotpCliTest.*"`, `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest.*"`, `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, OCRA verify schema example fix): Updated `docs/3-reference/cli/cli.schema.json` so the `cli.ocra.verify` example uses `reasonCode: "match"` (envelope and data) instead of `"success"` to match the schema and CLI output; ran `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest.verifyInlineEmitsJsonWhenRequested"` and `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, CLI schema description alignment with ADR-0014): Updated `docs/3-reference/cli/cli.schema.json` top-level description to describe `--output-json` as emitting a single JSON object instead of text output; ran `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-09, standalone release reported): User confirmed manual publish of `io.github.ivanstambuk:openauth-sim-standalone` at VERSION_NAME=0.1.4; no commands run in this session and verification deferred.
- Verification log (2025-12-09, flake check): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.TotpOperatorUiSeleniumTest.storedTotpReplaySampleAutoFillsForm"` (PASS – local reproduction attempt for CI timeout).
- Verification log (2025-12-09, flake mitigation): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.TotpOperatorUiSeleniumTest.storedTotpReplaySampleAutoFillsForm"` (PASS – after widening waits and forcing change dispatch in the stored replay sample autofill test).
- Governance log (2025-12-09, session reset "Read project context" – refresh): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` (clean).
- Governance log (2025-12-09, session reset "Read project context" – this chat): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main [ahead 1]` with modified CLI JSON-output docs/tests (`cli/src/test/java/io/openauth/sim/cli/Fido2CliTest.java`, `docs/2-how-to/*-cli-operations.md`, `docs/2-how-to/README.md`, `docs/4-architecture/features/004/tasks.md`, `docs/_current-session.md`) and untracked `docs/3-reference/cli-flags-matrix.md`.
- Governance log (2025-12-09, CLI how-to failure drills): added stored/inline/JSON + failure command snippets to HOTP/TOTP/OCRA/EMV-CAP/FIDO2/EUDIW CLI guides; no build commands run for this doc-only change.
- Governance log (2025-12-09, CLI README clarifications): expanded [docs/2-how-to/README.md](docs/2-how-to/README.md) with a MapDB vs inline quick reference and a pointer to the CLI flags matrix; no commands run.
- Governance log (2025-12-09, CLI output schemas): replaced standalone CLI JSON examples with Draft-07 schemas under `docs/3-reference/cli/output-schemas/*.schema.json`, embedded real examples inside each schema, and updated `JsonShapeAsserter` to validate CLI output against the schemas (no external deps). Removed the old example files.
- Verification log (2025-12-09, CLI output schema tests): `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.*" --tests "io.openauth.sim.cli.eudi.openid4vp.Oid4vpCliContractTest"` (PASS – schema validation now backs all CLI JSON outputs).
- Governance log (2025-12-09, CLI docs link schemas): linked CLI how-to pages and the flags matrix to the new output schema directory; no build commands needed beyond the reused CLI test run above.
- Governance log (2025-12-09, FIDO2 CLI --output-json parity): added JSON-output coverage tests across evaluate/replay/attest/attest-replay/seed-attestations/vectors, marked T-004-10 complete, and ran `./gradlew --no-daemon :cli:test`, `./gradlew --no-daemon :standalone:jar`, `./gradlew --no-daemon spotlessApply check` (PASS – config cache reused; console JS suites still green).
- Governance log (2025-12-09, CLI flags matrix): added [docs/3-reference/cli-flags-matrix.md](docs/3-reference/cli-flags-matrix.md), linked all CLI how-tos, and ran `./gradlew --no-daemon spotlessApply check` (PASS – config cache reused; EMV/EUDIW console JS tests still green).
- Governance log (2025-12-09, stray manifest cleanup): removed root `META-INF/MANIFEST.MF`/directory (staged add cleared) and reran `./gradlew --no-daemon :standalone:jar` (PASS – config cache reused, thin jar intact).
- Governance log (2025-12-09, post-cleanup gate): `./gradlew --no-daemon spotlessApply check` (PASS – 22s, config cache rebuilt; EUDIW/EMV console JS tests still green).
- Governance log (2025-12-09, CLI doc refresh): updated EMV/OCRA CLI how-to guides to note thin standalone jar + EphemeralCredentialStore for inline mode; MapDB now called out as stored-mode only.
- Governance log (2025-12-09, post-doc gate): `./gradlew --no-daemon spotlessApply check` (PASS – 14s, config cache reused; EUDIW/EMV console JS tests still green).
- Governance log (2025-12-09, session reset "Read project context"): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` with added `META-INF/MANIFEST.MF`, new `cli/src/main/java/io/openauth/sim/cli/StandaloneLauncher.java` (old `standalone/src/main/java/io/openauth/sim/cli/StandaloneLauncher.java` deleted), modified CLI commands/tests (`HotpCli`, `TotpCli`, `Fido2Cli` + verbose/evaluate tests), TOTP/OCRA/WebAuthn/fixtures in `core`/`core-ocra`, docs updates (`docs/2-how-to` CLI guides, `docs/4-architecture/features/015/{spec,plan,tasks}.md`, `docs/6-decisions/ADR-0012-cli-evaluate-unification.md`, `docs/6-decisions/ADR-0013-mcp-rate-limits.md`, `docs/_current-session.md`), and `standalone/build.gradle.kts`; new `cli/src/main/java/io/openauth/sim/cli/support/` package.
- Governance log (2025-12-09, CLI FIDO2 JSON output): `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.Fido2CliTest"` (PASS – added `--output-json` across FIDO2 evaluate/replay/attest/attest-replay/seed/vectors plus JSON helper reuse) and removed stray root file `-`.
- Governance log (2025-12-09, repo-wide gate after FIDO2 JSON changes): `./gradlew --no-daemon spotlessApply check` (PASS – reused config cache; EMV/EUDIW console JS suites ran).
- Governance log (2025-12-09, session reset "Project status read"): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` with modified EUDIW fixture repositories (`application/src/main/java/io/openauth/sim/application/eudi/openid4vp/fixtures/*`, `core/src/main/java/io/openauth/sim/core/eudi/openid4vp/TrustedAuthorityFixtures.java`), CLI JSON-output work in HOTP/TOTP/OCRA commands + tests, feature spec/task updates (001–005, 015), `standalone/build.gradle.kts`, untracked helpers `cli/src/main/java/io/openauth/sim/cli/support/{JsonPrinter,TelemetryJson,VerboseTraceMapper}.java`, new `application/src/main/resources/`, ADR-0014 draft, and a stray empty file named `-`.
- Governance log (2025-12-10, session reset "Read project context"): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` with in-progress CLI schema consolidation (new aggregated `docs/3-reference/cli/cli.schema.json`, deprecated per-command schema deletions), CLI commands/tests/telemetry updates, how-to/docs refreshes, AGENTS.md edits, and application HOTP telemetry adjustments.
- Governance log (2025-12-10, CLI JSON output mandate): Added ADR-0014 (CLI JSON output parity) and updated Feature 001/002/003/004/005 specs plus tasks T-001-23, T-002-21, T-003-17, T-004-10, T-005-74a and Feature 015 task T-015-08 to capture `--output-json` implementation work across all protocols.
- Governance log (2025-12-10, CLI verify/replay envelope harmonisation): Normalised JSON envelope `status` to `success`/`invalid`/`error` for `cli.ocra.verify` and `cli.emv.cap.replay`, moving match/mismatch outcomes into `reasonCode`; updated ADR-0014, CLI schema, OCRA/EMV CLI implementations, and tests. Commands: `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest.*"` (PASS), `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.EmvCliReplayTest.*"` (PASS), `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, CLI replay envelope harmonisation – FIDO2): Extended the success/invalid/error JSON envelope rule to FIDO2 replay/attest-replay; JSON now emits `status=success` with domain `reasonCode` for verification failures. Added mismatch coverage to `Fido2CliTest`, updated ADR-0014 note, and reran CLI + repo gates. Commands: `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.Fido2CliTest.*"` (PASS), `./gradlew --no-daemon :cli:test` (PASS), `./gradlew --no-daemon spotlessApply check` (PASS).
- Governance log (2025-12-10, CLI text-mode status alignment): Harmonised text-mode outputs with JSON semantics for verify/replay flows—`cli.ocra.verify`, `cli.emv.cap.replay`, `cli.fido2.replay`, and `cli.fido2.attest-replay` now print `status=success` with domain `reasonCode` for match/mismatch outcomes. Updated EMV/OCRA/FIDO2 CLI how-to notes to point operators to `reasonCode` for outcomes, kept exit codes unchanged, and reran CLI suite. Command: `./gradlew --no-daemon :cli:test` (PASS).
- Governance log (2025-12-09, CLI JSON implementation – compile): `./gradlew --no-daemon :cli:compileJava` (PASS – after adding shared JsonPrinter/TelemetryJson/VerboseTraceMapper helpers and enabling HOTP/TOTP/OCRA JSON output flags).
- Governance log (2025-12-09, CLI JSON implementation – tests): `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.HotpCliTest.evaluateInlineEmitsJsonWhenRequested"` (initial FAIL – whitespace-sensitive assertions); fixed assertions and reran `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.HotpCliTest.evaluateInlineEmitsJsonWhenRequested" --tests "io.openauth.sim.cli.TotpCliTest.evaluateInlineEmitsJsonWhenRequested" --tests "io.openauth.sim.cli.OcraCliTest.verifyInlineEmitsJsonWhenRequested"` (PASS).
- Governance log (2025-12-08, session reset "Read project context" refresh): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` with modified `cli/Fido2Cli.java`, `cli/HotpCli.java`, `cli/TotpCli.java`, associated CLI tests, `docs/2-how-to/README.md`, CLI how-to guides (EMV, EUDIW, FIDO2, OCRA), `docs/4-architecture/features/015/{spec,plan,tasks}.md`, `docs/6-decisions/ADR-0012-cli-evaluate-unification.md`, `docs/6-decisions/ADR-0013-mcp-rate-limits.md`, `standalone/build.gradle.kts`, and `docs/_current-session.md`; new files `META-INF/MANIFEST.MF`, `cli/StandaloneLauncher.java`, renamed/deleted `standalone/src/main/java/io/openauth/sim/cli/StandaloneLauncher.java`.
- Governance log (2025-12-09, thin-jar CLI smoke run): `./gradlew --no-daemon :cli:compileJava --rerun-tasks` (cache bust for inline store swap) and `./gradlew --no-daemon :standalone:jar` (repackaged with bundled JSON fixtures + EphemeralCredentialStore); inline CLI checks via `java -jar standalone/build/libs/openauth-sim-standalone-0.1.3.jar hotp|totp|ocra evaluate ...`, `fido2 evaluate --preset-id packed-es256`, `eudiw request create --dcql-preset pid-haip-baseline --include-qr --output-json`, `eudiw wallet simulate --request-id HAIP-0001 --wallet-preset pid-haip-baseline --output-json`, and `eudiw validate --preset pid-haip-baseline --request-id HAIP-0001 --output-json` all succeeded without external classpath deps (stored-mode still requires MapDB).
- Governance log (2025-12-09, CLI JSON doc parity): added HOTP and TOTP CLI how-to guides documenting default key=value output vs `--output-json`/`--verbose` behaviour; updated `docs/2-how-to/README.md` to link them (no build commands run).
- Governance log (2025-12-09, WebAuthn counter default decision): recorded FR-004-05 in the spec/plan/tasks to make WebAuthn counters optional with a Unix-seconds default when omitted (no commands run; implementation pending T-004-11).
- Verification log (2025-12-09, FIDO2 counter default implementation): `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.Fido2CliTest"` (PASS) after making `--signature-counter` optional with Unix-seconds default and adding derived flag telemetry.
- Governance log (2025-12-08, session reset "Read project context"): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` with modified files in `cli/Fido2Cli.java`, related CLI tests, `docs/2-how-to/use-fido2-cli-operations.md`, and `standalone/build.gradle.kts`.
- Governance log (2025-12-08, CLI evaluate unification): `./gradlew --no-daemon spotlessApply check` (PASS – 2m 11s, TOTP evaluate now stored/inline toggle, ADR-0012 recorded).
- Governance log (2025-12-08, HOTP inline evaluate support): `./gradlew --no-daemon spotlessApply check` (PASS – 2m 02s, HOTP CLI now uses single evaluate command for stored/inline with required counter).
- Governance log (2025-11-19, user request "EUDIW verbose toggle alignment"): `git config core.hooksPath` → `githooks` (session guard before adjusting the operator console template order).
- Verification log (2025-11-19, user request "EUDIW verbose toggle alignment"): `./gradlew --no-daemon spotlessApply check` (PASS – 7m 55s, confirms the console template reorder keeps the repo-wide quality gate green).
- Verification log (2025-11-19, user request "Remove EUDIW copy/download buttons"): `./gradlew --no-daemon :rest-api:eudiwConsoleJsTest` (initial red – JS harness still expected copy/download controls; used failure to drive UI/test updates).
- Verification log (2025-11-19, user request "Remove EUDIW copy/download buttons"): `./gradlew --no-daemon spotlessApply check` (PASS – 6m 32s, full repo gate after dropping the action buttons + updating CSS/JS, Node harness, and Selenium coverage).
- Verification log (2025-11-19, user request "Remove holder binding/trace ready badges"): `./gradlew --no-daemon spotlessApply check` (PASS – 6m 47s, confirms removing the badges + CSS cleanup kept Node/Selenium suites and the repo gate green).
- Verification log (2025-11-19, user request "Darken VP token textarea"): `./gradlew --no-daemon spotlessApply check` (PASS – 6m 38s, confirms the updated textarea styling + Node/Selenium sweeps remain green).
- Verification log (2025-11-19, user request "EUDIW VP token scrollbars/height"): `./gradlew --no-daemon spotlessApply check` (PASS – 7m 41s, confirms the larger textarea with horizontal scrolling keeps Node/Selenium suites green).
- Verification log (2025-11-19, user request "Profile spacing tweak"): `./gradlew --no-daemon spotlessApply check` (PASS – 7m 32s, confirms the field-group spacing change stays green across Node/Selenium suites).
- Verification log (2025-11-19, FIDO2 Selenium flake while spacing profile field): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.Fido2OperatorUiSeleniumTest"` (PASS – rerun after HtmlUnit null pointer to confirm the suite is green).
- Verification log (2025-11-19, user request "Profile spacing tweak" – final gate): `./gradlew --no-daemon spotlessApply check` (PASS – 6m 30s, full repo gate after spacing + FIDO2 rerun).
- Governance log (2025-11-18, session reset "read project context"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Verification log (2025-11-18, user request ":rest-api:test failures – EMV CAP UI & WebAuthn persistence"): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EmvCapOperatorUiSeleniumTest.inlineModeRetainsEditableStateAfterSampleSelection"` (expected red – reproduces EMV/CAP operator Selenium regression before fixing stored/inline masking and card-configuration read-only behaviour).
- Verification log (2025-11-18, EMV/CAP UI masking + read-only sweep): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EmvCapOperatorUiSeleniumTest"` (PASS – confirms stored vs inline mode behaviour, master-key masking, and card-configuration read-only semantics now align with Q005-01 Option A and Feature 005 tasks).
- Verification log (2025-11-18, WebAuthn credential sanitisation persistence fix): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.webauthn.WebAuthnCredentialSanitisationTest"` (PASS – temp MapDB path via @DynamicPropertySource removes FileLocked failures while keeping stored sample redaction behaviour intact).
- Verification log (2025-11-18, rest-api regression sweep after EMV/WebAuthn fixes): `./gradlew --no-daemon :rest-api:test` (PASS – full REST/API + operator UI test suite green after EMV CAP Selenium and WebAuthn persistence adjustments).
- Verification log (2025-11-18, EMV console JS alignment for T-005-73): `node --test rest-api/src/test/javascript/emv/console.test.js` (PASS – emvConsoleJsTest now asserts stored-mode master-key masking and read-only card configuration, plus inline preset behaviour, matching T-005-73 intent).
- Verification log (2025-11-18, EMV/CAP UI + JS full sweep for T-005-73): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EmvCapOperatorUiSeleniumTest"` and `./gradlew --no-daemon spotlessApply check` (PASS – confirms T-005-73 stored/inline EMV UI contract, Node/Selenium coverage, and repository-wide gate are green).
- Governance log (2025-11-18, user request "Commit & push all changes"): `git config core.hooksPath` → `githooks` (session reset guard before MCP facade commit and push).
- Governance log (2025-11-18, user request "Commit & push all changes"): `./gradlew --no-daemon spotlessApply check` (PASS – 19 s, 110 tasks: 3 executed, 107 up-to-date verifying MCP facade, EMV console, WebAuthn, and docs changes).
- Governance log (2025-11-18, user request "Commit & push all changes"): `./tools/codex-commit-review.sh` (PASS – Conventional Commit message generated for MCP facade, EMV/WebAuthn, and protocol-docs increment).
- Governance log (2025-11-17, user request "README GIF conversion kickoff"): `git config core.hooksPath` → `githooks` (session reset guard logged before processing the README GIF request).
- Governance log (2025-11-17, pre-commit GIF exception): `git config core.hooksPath` → `githooks` (confirmed managed hooks before editing the size-guard exception).
- Governance log (2025-11-17, pre-commit GIF exception): `./gradlew --no-daemon spotlessApply check` (PASS – 30 s, 110 tasks: 3 executed, 107 up-to-date verifying the hook update).
- Governance log (2025-11-17, README GIF showcase): `ffprobe -v error -select_streams v:0 -show_entries stream=width,height,duration,r_frame_rate -of default=noprint_wrappers=1 recording.mp4` (captured source video dimensions/duration before trimming to 7 s).
- Governance log (2025-11-17, README GIF showcase): `ffmpeg -ss 0 -t 7 -i recording.mp4 -vf "fps=10,scale=800:-1:flags=lanczos,palettegen" /tmp/app-demo-palette.png` and `ffmpeg -ss 0 -t 7 -i recording.mp4 -i /tmp/app-demo-palette.png -lavfi "fps=10,scale=800:-1:flags=lanczos[x];[x][1:v]paletteuse" docs/_assets/app-demo.gif` (generated a 1.4 MB GIF for embedding in README.md).
- Governance log (2025-11-17, user request "Project status – kickoff status sync"): `git config core.hooksPath` → `githooks` (session reset guard recorded before summarising project status).
- Governance log (2025-11-17, user request "Project status – session guard"): `git config core.hooksPath` → `githooks` (runbook reset check at chat kickoff).
- Governance log (2025-11-17, user request "Commit & push all changes"): `git config core.hooksPath` → `githooks` (session reset guard before staging and verification).
- Governance log (2025-11-17, user request "Remove docs/4-architecture/specs directory"): `git config core.hooksPath` → `githooks` (session reset guard confirming managed hooks before deleting the requested docs folder).
- Governance log (2025-11-17, user request "Remove docs/4-architecture/specs directory"): `./gradlew --no-daemon spotlessApply check` (PASS – verified the docs-only deletion kept the workspace compliant with formatter + test gate).
- Governance log (2025-11-17, Feature 015 MCP facade sweep): `./gradlew --no-daemon spotlessApply check` (PASS – 27 s, 109 tasks: 9 executed, 100 up-to-date confirming the repo is clean before committing).
- Governance log (2025-11-17, Feature 015 MCP facade sweep): `./tools/codex-commit-review.sh` (FAILED – exit 141; manual Conventional Commit message required, mirrors 2025-11-16 failure pattern).
- Governance log (2025-11-17, standalone module smoke test): `./gradlew --no-daemon :standalone:jar` (PASS – standalone module assembles the `openauth-sim-standalone` jar composed of CLI/REST/UI/MCP modules).
- Governance log (2025-11-17, Feature 010 Maven metadata sweep): `./gradlew --no-daemon spotlessApply check` (PASS – repo-wide formatter + verification sweep after introducing the distribution module, POM metadata, README/ReadMe.LLM publishing docs, and Feature 010 task updates).
- Governance log (2025-11-17, standalone module rename verification): `./gradlew --no-daemon :standalone:jar` (PASS – confirmed the renamed module still assembles the jar with CLI/REST/UI/MCP bundles).
- Governance log (2025-11-17, standalone rename spotless check): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide verification after renaming the module references and docs).
- Governance log (2025-11-17, publish workflow addition): `./gradlew --no-daemon spotlessApply check` (PASS – verified README/ReadMe.LLM instructions, Feature 010 notes, and the new `.github/workflows/publish-standalone.yml` automation).
- Governance log (2025-11-17, release prep): Updated [gradle.properties](gradle.properties) to set `VERSION_NAME=0.1.0` ahead of the initial Maven Central release; no additional Gradle run required since code is unchanged.
- Governance log (2025-11-17, TOTP UI flake investigation): `./gradlew --no-daemon :rest-api:test --tests "*TotpOperatorUiSeleniumTest.storedTotpReplaySampleAutoFillsForm"` (PASS – reproduced CI failure locally, confirmed longer field wait resolves the timeout).
- Governance log (2025-11-17, publish workflow fix): Adjusted [`.github/workflows/publish-standalone.yml`](.github/workflows/publish-standalone.yml) to wrap the multi-line Gradle command in a `run: |` block so shell continuation lines no longer include leading spaces (previous run failed because the task path started with a space).
- Governance log (2025-11-17, publish workflow configuration-cache fix): Updated [`.github/workflows/publish-standalone.yml`](.github/workflows/publish-standalone.yml) to pass `--no-configuration-cache` to the publish-on-central command because Ktor/Publish Portal tasks are incompatible with configuration caching (CI failed with `SoftReference.timestamp accessible` error).
- Governance log (2025-11-17, Maven Central validation fix): Added sources/javadoc artifacts to the `standalone` publication in [standalone/build.gradle.kts](standalone/build.gradle.kts) (`artifact(sourcesJar)` / `artifact(javadocJar)`) after Central Portal rejected deployment `ebab4405-b460-4eb3-98a6-e0b24720adc7` for missing sources/javadoc jars.
- Governance log (2025-11-17, standalone artifact shrink): Replaced the Shadow-based jar with an aggregated `jar` task that pulls only project dependencies via the runtimeClasspath artifact view (no third-party libs bundled), updated README/ReadMe.LLM/Feature 010 notes, and bumped `VERSION_NAME` to `0.1.1` for the follow-up release.
- Governance log (2025-11-17, standalone POM filtering): Updated [standalone/build.gradle.kts](standalone/build.gradle.kts) so the published POM removes internal modules and re-adds only third-party dependencies (restored README note). Verified with `./gradlew --no-daemon :standalone:jar` and `./gradlew --no-daemon spotlessApply check` before re-running the publish workflow.
- Governance log (2025-11-17, standalone release runbook): Added [docs/5-operations/standalone-release-runbook.md](docs/5-operations/standalone-release-runbook.md) describing the bump/build/spotless/commit/push/tag sequence and referenced it from [README.md](README.md) so future releases follow the same workflow before triggering the Publish Standalone Artifact action.
- Governance log (2025-11-17, standalone POM cleanup + 0.1.3 prep): Filtered project components out of the published POM in [standalone/build.gradle.kts](standalone/build.gradle.kts), bumped `VERSION_NAME` to `0.1.3`, updated the README example version, and reran the release prep (`./gradlew --no-daemon :standalone:jar`, `./gradlew --no-daemon spotlessApply check`).
- Governance log (2025-11-17, README dependency snippet): Added Gradle + Maven dependency examples to [README.md](README.md) so consumers can copy the `io.github.ivanstambuk:openauth-sim-standalone:0.1.3` coordinates directly.
- Governance log (2025-11-16, user request "Markdown newline sweep – session guard"): `git config core.hooksPath` → `githooks` (confirmed managed hooks before investigating the Markdown rendering regressions called out in this chat).
- Governance log (2025-11-16, Feature 010 doc newline sweep): `./gradlew --no-daemon spotlessApply check` (PASS – 26 s, 109 tasks: 6 executed, 103 up-to-date after collapsing stray line breaks in prerequisite bullets so the public docs render correctly everywhere).
- Governance log (2025-11-16, Feature 010 Markdown newline guard): `tools/scripts/check-markdown-linewraps.py $(git ls-files '*.md')` (PASS – repo-wide sweep to verify no staged Markdown bullets still split after commas/inline code before wiring the guard into the hook).
- Governance log (2025-11-16, Feature 010 Markdown newline guard): `./gradlew --no-daemon spotlessApply check` (PASS – 30 s, 109 tasks: 9 executed, 100 up-to-date after adding the guard script + hook integration).
- Governance log (2025-11-16, user request "Project status – status refresh"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).

- Governance log (2025-11-16, user request "Project status (run #3)"): `git config core.hooksPath` → `githooks` (session reset guard for the 2025-11-16 project status recap requested in this chat).
- Governance log (2025-11-16, Feature 010 T-010-08 doc-link sweep): `python - <<'PY' …` (PASS – converted 102 Markdown files to path links, reran refined passes to avoid URLs/link targets, Gradle verification intentionally skipped per user request).
- Governance log (2025-11-16, Feature 010 T-010-08 doc-link fix pass 2): `python - <<'PY' …` (PASS – refined detection to skip inline code fences, prevent nested links, and relink 115 Markdown files; updated README/AGENTS/docs landing pages accordingly, Gradle verification still deferred at user request).
- Governance log (2025-11-16, Feature 010 T-010-08 doc-link fix pass 2): `python - <<'PY' …` (PASS – refined detection to skip inline code fences, prevent nested links, and relink 115 Markdown files; updated README/AGENTS/docs landing pages accordingly, Gradle verification still deferred at user request).
- Governance log (2025-11-16, Feature 010 T-010-08 directory unlink sweep): `python - <<'PY' …` (PASS – converted 98 directory references back to inline code per updated policy, no Gradle run yet per instruction).
- Governance log (2025-11-16, user request "Project status"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-16, Feature 013 T-013-03 implementation): `./gradlew --no-daemon generateJsonLd` (PASS – generated README/ReadMe.LLM snippets + consolidated bundle from the new metadata source).
- Governance log (2025-11-16, Feature 013 T-013-03 implementation): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide verification after wiring the generator task, metadata file, and documentation updates).
- Governance log (2025-11-16, Feature 013 MCP feedback run): `./gradlew --no-daemon --init-script [tools/run-rest-api.init.gradle.kts](tools/run-rest-api.init.gradle.kts) runRestApi` (background REST instance feeding the MCP proxy; terminated after transcript capture).
- Governance log (2025-11-16, Feature 013 MCP feedback run): `./gradlew --no-daemon :tools-mcp-server:installDist` (built the standalone binary used by the MCP harness).
- Governance log (2025-11-16, Feature 013 MCP feedback run): `python - <<'PY' …` (inline MCP harness sending JSON-RPC frames; outputs archived in [build/mcp-feedback.json](build/mcp-feedback.json) and summarized in the Feature 013 plan).
- Governance log (2025-11-16, Q013-03/Q013-04 capture): Added open-question entries for MCP feedback plan (Option A runbook) and `generateJsonLd` automation (Option A qualityGate integration) per the new next-actions guardrail; resolved the same day after confirming both Option A picks.
- Governance log (2025-11-16, user request "AI/agent integration planning – T-013-02"): `git config core.hooksPath` → `githooks` (session reset guard before editing Feature 013 plan/tasks for the MCP design backlog).
- Governance log (2025-11-16, user request "AI/agent integration planning – T-013-02 docs"): `./gradlew --no-daemon spotlessApply check` (PASS – 7 s, 99 tasks: 3 executed, 96 up-to-date after updating Feature 013 plan/tasks and `_current-session.md` with the MCP option analysis and module outline).
- Governance log (2025-11-16, user request "AI/agent integration planning – process correction"): `./gradlew --no-daemon spotlessApply check` (PASS – 11 s, 99 tasks: 3 executed, 96 up-to-date after removing the option inventory from the Feature 013 plan, adding Q013-01, and updating the tasks/session log).
- Governance log (2025-11-16, user request "AI/agent integration plan storage fix"): `./gradlew --no-daemon spotlessApply check` (PASS – 22 s, 99 tasks: 6 executed, 93 up-to-date after updating [AGENTS.md](AGENTS.md), enhancing `open-questions.md` with the Question Details section, and syncing Feature 013 artifacts with the new process). (Superseded on 2025-12-10 by a governance change that removed the Question Details section and moved all decision histories back into specs/ADRs.)
- Governance log (2025-11-16, user request "AI/agent integration plan storage fix – phase 2"): `./gradlew --no-daemon spotlessApply check` (PASS – 22 s, 99 tasks: 6 executed, 93 up-to-date after tightening the [AGENTS.md](AGENTS.md) wording to require logging the question before discussion and updating the open-questions guardrail accordingly).
- Governance log (2025-11-16, user request "T-013-02 Option A decision"): `./gradlew --no-daemon spotlessApply check` (PASS – 13 s, 99 tasks: 3 executed, 96 up-to-date after resolving Q013-01, updating Feature 013 plan/tasks, and pruning the open-questions entry).
- Governance log (2025-11-16, user request "T-013-02 Option A decision"): `./gradlew --no-daemon spotlessApply check` (PASS – 13 s, 99 tasks: 3 executed, 96 up-to-date after resolving Q013-01, updating Feature 013 plan/tasks, and pruning the open-questions entry).
- Governance log (2025-11-16, user request "Schedule T-013-04 implementation"): `./gradlew --no-daemon spotlessApply check` (PASS – 11 s, 99 tasks: 3 executed, 96 up-to-date after adding the T-013-04 task, plan entry, and session log notes).
- Governance log (2025-11-16, user request "T-013-04 MCP server implementation"): `./gradlew --no-daemon spotlessApply` (PASS – 67 s, Spotless applied repo-wide after wiring `tools-mcp-server` into the build).
- Governance log (2025-11-16, user request "T-013-04 MCP server implementation"): `./gradlew --no-daemon qualityGate` (PASS – 55 s, verified the new module participates in the managed gate alongside existing subprojects).
- Governance log (2025-11-16, user request "T-013-04 MCP server implementation"): `./gradlew --no-daemon qualityGate` (PASS – 18 s, reran after the MCP server tests were finalized).
- Governance log (2025-11-16, user request "EUDIW OpenID4VP protocol doc improvements"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring [docs/3-reference/protocols/eudiw-openid4vp.md](docs/3-reference/protocols/eudiw-openid4vp.md) for learning-optimised flows and simulator mapping).
- Governance log (2025-11-16, T-013-06 JSON-LD automation): `./gradlew --no-daemon generateJsonLd check` (PASS – generator now runs before the verification pipeline, Spotless tasks, and `check` via the new dependencies).
- Governance log (2025-11-16, T-013-06 JSON-LD automation): `./gradlew --no-daemon qualityGate` (PASS – confirmed the gate now invokes `generateJsonLd` via Spotless/check and respects the write-if-changed guard).
- Governance log (2025-11-16, T-013-07 TOTP helper implementation): `./gradlew --no-daemon generateJsonLd check` (PASS – ≥600 s timeout covering Selenium/UI suites after adding the helper endpoint and MCP tool).
- Governance log (2025-11-16, T-013-07 TOTP helper implementation): `./gradlew --no-daemon qualityGate` (PASS – 6 m 42 s, full pipeline including the new helper tests and MCP registry changes).
- Governance log (2025-11-16, Feature 013 drift gate): `./gradlew --no-daemon reflectionScan` (PASS – revalidated the reflection ban before marking the drift gate complete).
- Governance log (2025-11-16, Feature 013 drift gate): `./gradlew --no-daemon :core-ocra:spotbugsMain :core-ocra:pmdMain :core-ocra:pmdTest` (PASS – module-level SpotBugs/PMD sweep recorded for the drift gate close-out).
- Governance log (2025-11-15, current session): `git config core.hooksPath` → `githooks` (session reset guard; hooks path confirmed for this Codex CLI run).
- Governance log (2025-11-15, user request "Feature 005 pruning"): `git config core.hooksPath` → `githooks` (pre-update guard before editing `_current-session.md`).
- Governance log (2025-11-15, user hand-off request "Project status next action"): re-ran `git config core.hooksPath` → `githooks` to document the hook guard at session kickoff.
- Governance log (2025-11-15, user request "Feature 6 status"): `git config core.hooksPath` → `githooks` (session reset guard for this check-in).
- Governance log (2025-11-15, Implementation Drift Gate kickoff prep): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, scenario tracking review): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, commit/push prep): `git config core.hooksPath` → `githooks` (pre-commit guard re-confirmed before packaging outstanding work).
- Governance log (2025-11-15, user request "DeepWiki wiki.json steering"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, user hand-off "Feature 014 Native Java API facade"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, user request "JMeter/Neoload Native Java docs"): `git config core.hooksPath` → `githooks` (session reset guard before planning new how-to guides).
- Environment log (2025-11-15, current session): `JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64`; `java -version` → `openjdk version "17.0.16"` (Java 17 JDK confirmed for Gradle/Javadoc runs).
- Governance log (2025-11-16, session reset "read initial project context"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-16, user request "Commit and push all changes"): `git config core.hooksPath` → `githooks` (pre-commit guard re-confirmed before packaging outstanding work); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep before commit/push for the JMeter/Neoload Native Java documentation updates and external-dependency reference).
 - Governance log (2025-11-16, user request "HOTP protocol doc – incremental learning improvements"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding the “HOTP in one page” summary section to [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md)).
 - Governance log (2025-11-16, user request "HOTP protocol doc – provisioning flow structure"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring the “HOTP secret provisioning” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) with explicit Sequence and Policy knobs subsections).
 - Governance log (2025-11-16, user request "HOTP protocol doc – authentication flow structure"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring the “HOTP authentication (basic)” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) with explicit Sequence and Policy knobs subsections).
  - Governance log (2025-11-16, user request "HOTP protocol doc – resynchronisation/state model alignment"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after folding resynchronisation and counter-state content into the “HOTP authentication (basic)” section as a unified Resynchronisation and drift subsection in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md)).
  - Governance log (2025-11-16, user request "HOTP protocol doc – flow-to-code mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after converting the HOTP “Simulator implementation pointers” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) into a flow-to-code table that maps provisioning, authentication/windowed verification, replay/resynchronisation, and the core HOTP algorithm to their key types and tests).
  - Governance log (2025-11-16, user request "HOTP protocol doc – ergonomics finish"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding RFC/TOTP/OCRA callouts, an audience line, a small worked example, a `What to remember` list, a `Configuration knobs` table, and an updated security section to [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md)).
  - Governance log (2025-11-16, user request "FIDO2/WebAuthn protocol doc – full ergonomics and mapping pass"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding normative callouts, a “WebAuthn in one page” summary, a data-structures and verification algorithm section, structured Registration/Authentication sequences with Policy/Simulator/What to remember subsections, credential/UX and RP configuration sections, security and integration guidance, a short criticism/controversies appendix, and a flow-organised simulator mapping table to [docs/3-reference/protocols/fido2-webauthn.md](docs/3-reference/protocols/fido2-webauthn.md)).
- Governance log (2025-11-16, user request "FIDO2/WebAuthn protocol doc – diagram markers and worked example"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding ①–⑤ markers to the WebAuthn registration/authentication PlantUML diagrams and PNGs, wiring those markers into the `#### Sequence` lists in [docs/3-reference/protocols/fido2-webauthn.md](docs/3-reference/protocols/fido2-webauthn.md), and appending a concrete assertion verification worked example based on the `ES256:uv0_up1` vector from [docs/webauthn_assertion_vectors.json](docs/webauthn_assertion_vectors.json)).
  - Governance log (2025-11-16, user request "project status"): `git config core.hooksPath` → `githooks` (session reset guard and governance log refresh before summarising roadmap/feature status for this Codex CLI run).
 - Governance log (2025-11-16, user request "TOTP protocol doc – ergonomics and mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring [docs/3-reference/protocols/totp.md](docs/3-reference/protocols/totp.md) with RFC/HOTP callouts, a “TOTP in one page” section, updated provisioning/authentication/drift sections, a configuration parameters table, refined security guidance, and a flow-to-code implementation map).
 - Governance log (2025-11-16, user request "OCRA protocol doc – ergonomics and mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring [docs/3-reference/protocols/ocra.md](docs/3-reference/protocols/ocra.md) with an “OCRA in one page” section, HOTP/TOTP relationship note, simplified algorithm description, parallel flow sections, suite design guidance, expanded S canonicalisation advice, refined security properties, and a flow-aligned simulator mapping).
- Governance log (2025-11-16, user request "OCRA protocol doc – numeric example + diagram markers"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding a concrete numeric OCRA example based on [docs/ocra_validation_vectors.json](docs/ocra_validation_vectors.json) to [docs/3-reference/protocols/ocra.md](docs/3-reference/protocols/ocra.md) and annotating the OCRA PlantUML sequence diagrams with step markers ①–⑩ plus a final approval/rejection branch).
- Governance log (2025-11-16, user request "EMV/CAP protocol doc – ergonomics and mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding an “EMV/CAP in one page” section, parallel Identify/Respond/Sign flow blocks with `#### Sequence`/`Key parameters`/`Policy knobs & pitfalls`/`What to remember` subsections, a CAP configuration and profiles table, a symbolic CAP derivation example, a criticism/controversies appendix, and ①–⑩ markers plus a final approval/rejection branch in the EMV/CAP PlantUML diagrams and PNGs, all wired into [docs/3-reference/protocols/emv-cap.md](docs/3-reference/protocols/emv-cap.md)).
 - Governance log (2025-11-16, user request "Project status"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run before summarising roadmap and active workstreams).

## Active workstreams
- Feature 015 (MCP Agent Facade): Plan last updated 2025-11-18 (status Draft). Increment I2 helper flows landed; I3 session/capabilities APIs and I4 auditing/quality gate remain open with documentation/telemetry and JSON-LD refresh pending.
- Feature 006 (EUDIW OpenID4VP): Plan dated 2025-11-13 (status In progress). Increments through I8 completed (fixtures, wallet, encryption, Trusted Authorities ingestion); Implementation Drift Gate outstanding alongside coverage/spotbugs/jacoco reruns and documentation/telemetry refresh noted in the plan.
- Cross-feature CLI JSON output parity: ADR-0014 added; HOTP/TOTP/OCRA CLI commands/tests and specs 001–005/015 are mid-update with new `JsonPrinter`/`TelemetryJson`/`VerboseTraceMapper` helpers and standalone wiring pending full gate and docs sync.

## 2025-12-11 – Codex CLI architectural scan
- Context: Ran a read-only architectural and quality scan of the repository (no code changes) to identify the top five ways to improve overall software-engineering quality before new feature work.
- Inputs reviewed: project constitution, AGENTS.md, session runbook/quick-reference, roadmap, knowledge map, open-questions log (currently empty), architecture graph, gradle build (root + selected modules), and representative tests across `application`, `rest-api`, `cli`, `ui`, and `core-architecture-tests`.
- High-level observations: architecture is already strongly spec-driven with good separation (core/application/infra-persistence/cli/rest-api/ui/tools/standalone) and rich quality gates (Spotless, Jacoco aggregated coverage, PIT, reflectionScan, architecture tests, JS tests, EMV fixture sync). Active workstreams centre on Feature 006 (EUDIW OpenID4VP), Feature 015 (MCP Agent Facade), and cross-facade CLI JSON output parity.
- Next suggested actions: prioritise a small number of cross-cutting improvements (e.g., harden facade boundaries and dependency rules, tighten mutation/coverage targets where practical, standardise telemetry and JSON schema evolution across facades, and consider a thin “facade contract tests” layer that exercises the same scenarios via Native Java, CLI, REST, UI, and MCP).

## 2025-12-11 – Codex CLI implementation-plan authoring
- Context: Authored five temporary implementation plan drafts (application-as-seam, cross-facade contract tests, JSON/telemetry governance, Gradle quality conventions, facade contract playbook) stored under `docs/tmp` for execution guidance; migrate or retire them once their content is folded into specs/plans/tasks.
- Notes for future agents: each draft includes a step tracker, spec/plan/task touchpoints, and assumes small, test-first increments with `./gradlew --no-daemon spotlessApply check` and `qualityGate` runs at key milestones.

## 2025-12-11 – Facade seam alignment (docs-only)
- Updated specs 001–006, 009, 012, 014, and 015 with NFRs that require facades to delegate via `application` services and obtain persistence via `CredentialStoreFactory`, prohibiting direct `core` or `MapDbCredentialStore` usage.
- No code or test changes; no build commands run.

## 2025-12-11 – Facade seam execution plan decision
- Decision: Stage the facade-seam program in protocol/facade slices (Option A). Open question closed.
- Rationale: Lower risk and keeps increments ≤90 minutes with green builds between slices.

## 2025-12-11 – Facade seam dependency scan (baseline before refactors)
- Commands:  
  - `rg "io\\.openauth\\.sim\\.core" -n cli rest-api ui tools standalone`  
  - `rg "MapDbCredentialStore" -n`
- Findings (production hotspots):
  - CLI commands (`HotpCli`, `TotpCli`, `OcraCli`, `EmvCli`, `MaintenanceCli`) import core domain/persistence types directly; Maintenance CLI builds `MapDbCredentialStore` builders without the factory.
  - REST application configs/services/controllers import core domain/persistence types (e.g., `RestPersistenceConfiguration`, `Hotp/Totp/Ocra/Emv/WebAuthn` services/controllers, `InlineSecretInput`) and some use `MapDbCredentialStore` directly.
  - Application layer has `OcraCredentialResolvers` referencing `MapDbCredentialStore` directly.
  - Tests heavily use core and MapDB builders (expected) but will need review once production seams are tightened.
- Next steps (staged slices): start refactoring CLI/REST per protocol to use `application` services and `CredentialStoreFactory`, add/extend architecture tests to enforce the seam, and remove direct MapDB usages in production code paths.

## 2025-12-11 – Facade seam slice 1 (persistence bean + OCRA resolver)
- Changes:
  - `rest-api` persistence bean now exposes `CredentialStore` (no direct `MapDbCredentialStore` reference) while still resolving the same database path via `CredentialStoreFactory`.
  - Removed the `MapDbCredentialStore` overload from `OcraCredentialResolvers`; verification now accepts the `CredentialStore` interface only.
- Commands:
  - `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.RestPersistenceConfigurationTest"`
- Status: PASS (config cache stored). Next slices: tighten ArchUnit rules and refactor remaining facade paths to drop direct core/MapDB usage.

## 2025-12-11 – Facade seam slice 2 (ArchUnit enforcement for MapDB + REST OCRA)
- Changes:
  - Reworked `FacadeDelegationArchitectureTest` to fail when CLI (excluding Maintenance) or REST facades depend on `MapDbCredentialStore`; added a rule asserting REST OCRA services rely on application-layer seams and avoid core OCRA factories/calculators.
  - Compilation/test fix: removed duplicate `@Test` annotation.
- Commands:
  - `./gradlew --no-daemon :core-architecture-tests:test`
- Status: PASS (config cache reused). Remaining slices: refactor CLI/REST HOTP/TOTP/OCRA codepaths off direct core/persistence types as needed and expand ArchUnit coverage per protocol.

## 2025-12-11 – Facade seam slice 3 (HOTP/TOTP directory via application layer)
- Changes:
  - Added application directory services: `HotpCredentialDirectoryApplicationService`, `TotpCredentialDirectoryApplicationService`, and `OcraCredentialManagementApplicationService` scaffolding for upcoming OCRA lifecycle refactor.
  - REST HOTP/TOTP credential directory controllers now consume the new application services; beans wired in `HotpApplicationConfiguration` and `TotpApplicationConfiguration`.
  - CLI HOTP/TOTP `list` commands now call the application directory services instead of touching `CredentialStore`/core descriptors directly.
  - Updated HOTP directory controller test to inject the new service.
- Commands:
  - `./gradlew --no-daemon :cli:compileJava :rest-api:compileJava`
  - `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.HotpCliTest" --tests "io.openauth.sim.cli.TotpCliTest"`
  - `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.hotp.HotpCredentialDirectoryControllerTest"`
- Status: PASS. Next slices: extend the OCRA lifecycle refactor to use `OcraCredentialManagementApplicationService` and finish facade/core decoupling across remaining endpoints.

## 2025-12-11 – Facade seam slice 4 (OCRA lifecycle via application layer)
- Changes:
  - Added `OcraCredentialManagementApplicationService` and wired it into REST via `OcraApplicationConfiguration`.
  - REST OCRA credential directory now uses the management service for listing and samples (no direct `CredentialStore`/core descriptors); sample lookup reuses `OcraOperatorSampleData`.
  - Added descriptor-aware sample resolution helper to `OcraOperatorSampleData`.
  - CLI unchanged for OCRA evaluate/verify; lifecycle refactor landed for REST directory.
- Commands:
  - `./gradlew --no-daemon :rest-api:compileJava`
  - `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest" --tests "io.openauth.sim.cli.OcraCliCommandTest"`
  - `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.hotp.HotpCredentialDirectoryControllerTest"`
- Status: PASS. Remaining: migrate OCRA CLI import/list/delete to the management service (currently still uses core descriptors), then consider extending directory services for delete in REST/CLI if desired.

## 2025-12-11 – Facade seam slice 5 (OCRA CLI lifecycle via application layer)
- Changes:
  - OCRA CLI `import`, `list`, and `delete` now use `OcraCredentialManagementApplicationService`; removed direct `CredentialStore` → core descriptor mapping in CLI.
  - Restored a test helper to resolve descriptors through the management service for existing tests.
- Commands:
  - `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest" --tests "io.openauth.sim.cli.OcraCliCommandTest" --tests "io.openauth.sim.cli.OcraCliErrorHandlingTest"`
  - `./gradlew --no-daemon :rest-api:compileJava`
- Status: PASS. Next: consider adding delete support to REST OCRA directory (if desired) and running full `spotlessApply check` once remaining facade refactors are complete.

## 2025-12-11 – Facade seam slice 6 (REST OCRA delete + tests)
- Changes:
  - REST OCRA credential directory now supports DELETE `/api/v1/ocra/credentials/{id}` via `OcraCredentialManagementApplicationService`.
  - Updated directory test harness with a management-service provider and new delete coverage; added descriptor-aware sample resolution helper in `OcraOperatorSampleData`.
  - Tests adjusted to align with application-layer summaries.
- Commands:
  - `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ocra.OcraCredentialDirectoryControllerTest"`
  - `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.OcraCliTest" --tests "io.openauth.sim.cli.OcraCliCommandTest" --tests "io.openauth.sim.cli.OcraCliErrorHandlingTest"`
- Status: PASS. Next: run full `spotlessApply check` when ready to stage; consider REST delete parity for other protocols if needed.

## Decisions & Notes

- 2025-11-17 – Logged [docs/6-decisions/ADR-0011-standalone-fat-jar-distribution.md](docs/6-decisions/ADR-0011-standalone-fat-jar-distribution.md) selecting the `openauth-sim-standalone` fat JAR as the published artifact and pointing consumers to [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) for exclusion guidance.
- 2025-11-17 – Added the `standalone` module with Shadow + publish-on-central wiring, updated [README.md](README.md) and [ReadMe.LLM](ReadMe.LLM) with the release workflow for `io.github.ivanstambuk:openauth-sim-standalone`, created [`.github/workflows/publish-standalone.yml`](.github/workflows/publish-standalone.yml) to write `~/.gradle/gradle.properties` from Central Portal + signing secrets, and closed Feature 010 task T-010-07 (docs/4-architecture/features/010/tasks.md) after recording the verification runs.

### Feature 014 – Native Java Javadoc policy cleanup

- Specification log (2025-11-16): Updated Feature 014 spec/plan to add NFR-014-04 (public Javadoc hygiene), clarified that Native Java Javadoc may only cite public references (protocol standards, how-to docs, ADR-0007), and recorded the new guard requirement in the Implementation Drift Gate. ADR-0008 now documents the hygiene policy/guard as part of the Native Java Javadoc CI strategy.
- Implementation log (2025-11-16): Scrubbed all Native Java-facing Javadoc in `core` and `application` (HOTP/TOTP/WebAuthn/EMV/CAP/EUDIW seams plus supporting fixtures/helpers) so public docs no longer mention Feature/FR/NFR/T identifiers; kept references to ADR-0007 and the relevant ``docs/2-how-to`/*-from-java.md` guides. Added `NativeJavaJavadocPolicyTest` under `core-architecture-tests` to scan `:application:nativeJavaApiJavadoc` sources for forbidden roadmap identifiers.
- Verification log (2025-11-16): `./gradlew --no-daemon :core-architecture-tests:test --tests "*NativeJavaJavadocPolicyTest"` (PASS – guard confirms no identifiers leaked); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep with Native Java guard/tests active).

### Feature 014 / Feature 001 – Native Java API (HOTP seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.hotp.HotpEvaluationApplicationService` (with its `EvaluationCommand` / `EvaluationResult` types) as the Native Java API seam for HOTP by updating Feature 001 and Feature 014 specs/tasks, added Javadoc describing the seam and its governance references (FR-001-01..07, FR-014-02/04, ADR-0007), and introduced `HotpNativeJavaApiUsageTest` to exercise stored and inline evaluations via the Native Java entry point including a validation-failure branch for missing counters.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-hotp-from-java.md](docs/2-how-to/use-hotp-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the Native Java HOTP flow is documented alongside the existing OCRA guide, keeping terminology and types aligned with `HotpEvaluationApplicationService` and Feature 014’s Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :core:test :application:test` (PASS – core/HOTP unit tests plus application HOTP tests, including the new Native Java API usage tests); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the HOTP Native Java documentation and test additions).

### Feature 014 / Feature 002 – Native Java API (TOTP seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.totp.TotpEvaluationApplicationService` (with its `EvaluationCommand` / `EvaluationResult` types) as the Native Java API seam for TOTP by updating Feature 002 and Feature 014 specs/tasks, added Javadoc describing the seam and its governance references (FR-002-01..07, FR-014-02/04, ADR-0007), and introduced `TotpNativeJavaApiUsageTest` to exercise stored generation and inline validation (success + out-of-window failure) via the Native Java entry point using RFC 6238 vectors.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-totp-from-java.md](docs/2-how-to/use-totp-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the Native Java TOTP flow sits alongside the HOTP/OCRA guides, keeping terminology and types aligned with `TotpEvaluationApplicationService` and the Feature 014 Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :application:test --tests "*TotpNativeJavaApiUsageTest"` (PASS – TOTP Native Java usage tests); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the TOTP Native Java documentation and test additions).

### Feature 014 / Feature 004 – Native Java API (FIDO2/WebAuthn seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.fido2.WebAuthnEvaluationApplicationService` (with its `EvaluationCommand` / `EvaluationResult` types) as the Native Java API seam for WebAuthn assertion evaluation by updating Feature 004 and Feature 014 specs/tasks, added Javadoc describing the seam and its governance references (FR-004-01/02, FR-014-02/04, ADR-0007), and introduced `WebAuthnNativeJavaApiUsageTest` to exercise stored and inline assertion evaluation via the Native Java entry point using a local `CredentialStore` and stub assertion payloads.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-fido2-from-java.md](docs/2-how-to/use-fido2-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the Native Java WebAuthn flow appears alongside the HOTP/TOTP/OCRA guides, reusing the same terminology as `WebAuthnEvaluationApplicationService` and the Feature 014 Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :application:test --tests "*WebAuthnNativeJavaApiUsageTest"` (PASS – WebAuthn Native Java usage tests) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the WebAuthn Native Java documentation and test additions).

### Feature 014 / Feature 005 – Native Java API (EMV/CAP seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.emv.cap.EmvCapEvaluationApplicationService` (with its `EvaluationRequest` / `EvaluationResult` types) as the Native Java API seam for EMV/CAP simulations by updating Feature 005 and Feature 014 specs/tasks and adding `EmvCapNativeJavaApiUsageTest` to exercise a simple Identify-mode evaluation via the Native Java entry point.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-emv-cap-from-java.md](docs/2-how-to/use-emv-cap-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the EMV/CAP Native Java flow appears alongside the HOTP/TOTP/OCRA/FIDO2 guides, keeping terminology aligned with `EmvCapEvaluationApplicationService` and Feature 014’s Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :application:test --tests "*EmvCapNativeJavaApiUsageTest"` (PASS – EMV/CAP Native Java usage test) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the EMV/CAP Native Java documentation and test additions).

### Feature 006 – EUDIW OpenID4VP Simulator (In progress)

- Planning log (2025-11-13): Cleaned up Feature 006 spec/plan/tasks to remove renumbering notes, set their statuses to In progress (instead of Ready for implementation) with updated timestamps, deleted `docs/4-architecture/features/006/legacy/040/`, and aligned the roadmap entry with the In-progress status; documentation-only change.
- Planning log (2025-11-15): Migrated the Feature 006 spec off the Clarifications section by folding the HAIP/baseline scope, UI behaviours, telemetry guidance, and fixture provenance into the Overview/UI/Telemetry/Fixtures sections and standardising FR Source cells to “Spec.” for the UI/fixture requirements; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP protocol reference): Added a “HOTP in one page” summary section near the top of [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) to provide a dense mental model (purpose, shared state, algorithm, policy knobs, and typical uses) ahead of the detailed flow sections; documentation-only change aligned with Feature 010 FR-010-12 for protocol reference pages.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP provisioning flow structure): Updated the “HOTP secret provisioning” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) to add an explicit Sequence list and Policy knobs subsection, keeping the diagram in place while making the provisioning flow easier to follow and tying the text more closely to deployment decisions; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP authentication flow structure): Updated the “HOTP authentication (basic)” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) to add a Sequence list and Policy knobs subsection, making the authentication flow steps explicit, relating them to windowed verification, and clarifying operational decisions around window size, rate limiting, and counter updates; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP resynchronisation and state model): Folded the “Counter resynchronisation window” and “Optional counter state model” content under the HOTP authentication section as a `Resynchronisation and drift` subsection, keeping both diagrams while emphasising that counters do not decrement in normal operation and that manual resync is an administrative, logged action; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP flow-to-code mapping): Reworked the “Simulator implementation pointers” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) into a flow-to-code table that groups provisioning, authentication/windowed verification, replay/resynchronisation, and the core HOTP algorithm, mapping each flow to its key types and representative tests so readers can jump directly from diagrams to code; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP reference ergonomics finish): Completed the remaining learning-ergonomics improvements in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) by adding normative and comparison callouts near the top (RFC 4226 precedence and HOTP vs TOTP/OCRA), an audience line, a small worked example in the “HOTP in one page” section, a `What to remember` list for authentication, a `Configuration knobs` section capturing deployment-time decisions, and an updated security section with a focused warning, SHA‑1 context, and consolidated bullets; documentation-only change aligning with Feature 010 FR-010-12 expectations for protocol reference pages.
  - Documentation log (2025-11-16, Feature 002/010 – TOTP protocol ergonomics pass): Restructured [docs/3-reference/protocols/totp.md](docs/3-reference/protocols/totp.md) to mirror the HOTP reference pattern by adding RFC/HOTP callouts, a TOTP audience line, a “TOTP in one page” section (purpose, shared state, algorithm, verifier behaviour, and a small worked example), a uniform Sequence/Policy/What to remember micro-structure for provisioning and authentication, a folded drift/time-step window subsection under authentication with diagrams, a configuration parameters table for deployment-time trade-offs, a refined security section with SHA‑1 context and phishing/relay notes, and a flow-to-code implementation map that ties TOTP flows to `core`/`application` entry points and tests; documentation-only change satisfying Feature 010 FR-010-12 for TOTP.
  - Documentation log (2025-11-16, Feature 003/010 – OCRA protocol ergonomics pass): Reworked [docs/3-reference/protocols/ocra.md](docs/3-reference/protocols/ocra.md) to add an “OCRA in one page” mental model, an explicit HOTP/TOTP relationship note, a simplified OCRA calculation algorithm, parallel Sequence/Policy/Simulator mapping subsections for secret/suite provisioning, challenge–response authentication, and transaction signing, expanded guidance on S canonicalisation and “what you see is what you sign,” a suite design/configuration section with example suites, a refined security section highlighting key risks and deployment choices, and a flow-aligned simulator implementation map; documentation-only change aligning the OCRA reference with Feature 010 FR-010-12 expectations.
- Planning log (2025-11-15b): Prepared the Implementation Drift Gate evidence by adding FR/NFR/Scenario provenance tables with explicit code/test pointers to [docs/4-architecture/features/006/plan.md](docs/4-architecture/features/006/plan.md), teeing up the upcoming `jacocoTestReport` + `spotbugsMain spotbugsTest` reruns.
- Verification log (2025-11-15a): `./gradlew --no-daemon jacocoTestReport` (PASS – coverage snapshot captured for the drift gate package; temporary 0.60 branch floor still in effect until follow-up coverage work restores 0.70).
- Implementation log (2025-11-15b): Completed T-006-29 by refining [docs/2-how-to/use-eudiw-from-java.md](docs/2-how-to/use-eudiw-from-java.md) to reference EUDIW fixture presets (`pid-haip-baseline`, `pid-mdoc`), document the `TrustedAuthorityEvaluator.fromSnapshot(TrustedAuthorityFixtures.loadSnapshot("haip-baseline"))` helper seam, and keep Native Java usage aligned with Feature 006/014 and ADR-0007.
- Verification log (2025-11-15b): `./gradlew --no-daemon :application:test --tests "io.openauth.sim.application.eudi.openid4vp.OpenId4VpNativeJavaApiUsageTest"` (PASS – EUDIW Native Java usage test) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the EUDIW Native Java documentation alignment).

### Feature 014 – Native Java API Facade (Javadoc & CI design)

- Planning log (2025-11-15): Completed Increment I3 design work by updating the Feature 014 spec/plan to standardise on `:core:javadoc` and `:application:javadoc` for documentation, describe a future `:application:nativeJavaApiJavadoc` aggregation task (owned by Feature 010) that publishes a small Native Java API reference under ``docs/3-reference/native-java-api`/`, and clarify that `*-from-java` guides act as runbooks linking back to this reference rather than duplicating full Javadoc content.
- Documentation log (2025-11-15): Created [docs/3-reference/native-java-api/README.md](docs/3-reference/native-java-api/README.md) and updated [docs/3-reference/README.md](docs/3-reference/README.md) to list the Native Java API Javadoc index as a pending artifact, ensuring `docs/3-reference` reflects the planned Javadoc/CI pipeline for Native Java seams.
- Planning log (2025-11-15b): Closed out Feature 014 tasks T-014-01 and T-014-02 by (a) tightening the Native Java API pattern in the Feature 014 spec/plan and explicitly annotating OCRA (Feature 003) as the reference Native Java API in its spec/plan, and (b) confirming that Features 001, 002, 004, 005, and 006 each carry Native Java alignment notes/tasks (HOTP/TOTP/FIDO2/EMV/CAP/EUDIW seams plus their `*-from-java` guides) tied back to Feature 014 and ADR-0007.
- Implementation log (2025-11-15c): Tightened Javadoc on the Native Java DTO records for TOTP (`TotpEvaluationApplicationService.EvaluationCommand` variants and `EvaluationResult`), WebAuthn (`WebAuthnEvaluationApplicationService.EvaluationCommand` variants and `EvaluationResult`), EMV/CAP (`EmvCapEvaluationApplicationService.EvaluationRequest` context via class/record docs), and EUDIW (`OpenId4VpWalletSimulationService.SimulateRequest`/`InlineSdJwt`, `OpenId4VpValidationService.ValidateRequest`/`InlineVpToken`/`StoredPresentation`) so that each seam’s request/response types clearly reference their governing feature FRs and Feature 014/ADR-0007 without altering behaviour.
- Implementation log (2025-11-15d): Started wiring a Native Java Javadoc aggregation task by adding `:application:nativeJavaApiJavadoc` in [application/build.gradle.kts](application/build.gradle.kts) and documenting it under Feature 010/014; the task is currently defined but blocked at configuration time because the application project does not expose the `JavaPluginExtension` directly, so future build-logic work is required before operators can run it successfully.
- Implementation log (2025-11-15e): Reworked `:application:nativeJavaApiJavadoc` in [application/build.gradle.kts](application/build.gradle.kts) into a lifecycle aggregation task that depends on `:core:javadoc` and `:application:javadoc`, removing the direct `JavaPluginExtension` lookup so the Native Java Javadoc pipeline can be invoked without configuration failures.
- Verification log (2025-11-15c): `./gradlew --no-daemon :application:nativeJavaApiJavadoc` (PASS – runs `:core:javadoc` and `:application:javadoc`, generating module Javadoc under `core/build/docs/javadoc` and `application/build/docs/javadoc` for Native Java API seams) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after wiring the aggregation task and updating the Native Java reference docs).
- Implementation log (2025-11-15f): Extended the root Gradle `check` lifecycle in [build.gradle.kts](build.gradle.kts) to depend on `:application:nativeJavaApiJavadoc` alongside `architectureTest` and `jacocoCoverageVerification`, so pre-commit and quality gate flows now run Javadoc for `core` and `application` and catch Native Java API documentation issues by default.
- Verification log (2025-11-15d): `./gradlew --no-daemon spotlessApply check` (PASS – configuration cache warmed, `:core:javadoc` and `:application:javadoc` executed via `:application:nativeJavaApiJavadoc` as part of `check`, all tests and quality tasks green after extending the Javadoc guardrail).
- Decision log (2025-11-15): Recorded ADR-0008 ([docs/6-decisions/ADR-0008-native-java-javadoc-ci-strategy.md](docs/6-decisions/ADR-0008-native-java-javadoc-ci-strategy.md)) to document that we will not add a dedicated GitHub Actions workflow solely for Native Java Javadoc generation/publishing; instead, `:application:nativeJavaApiJavadoc` is enforced via `check`/`qualityGate`, and future Maven publishing will provide `-javadoc.jar` without requiring a GitHub-hosted HTML site.
- Drift Gate log (2025-11-15): Completed the Feature 014 Implementation Drift Gate for Native Java + Javadoc by cross-checking seams (`HotpEvaluationApplicationService`, `TotpEvaluationApplicationService`, `WebAuthnEvaluationApplicationService`, `EmvCapEvaluationApplicationService`, `OpenId4VpWalletSimulationService`, `OpenId4VpValidationService`), their usage tests (`*NativeJavaApiUsageTest`), and ``docs/2-how-to`/*-from-java.md` guides against the Feature 014 spec/plan; verified that `:application:nativeJavaApiJavadoc` is wired into `check`/`qualityGate` and that no high- or medium-impact drift remains, with findings recorded in the plan’s Implementation Drift Gate section and tasks verification log.
- Status log (2025-11-15): Marked Feature 014 – Native Java API Facade as Complete by updating its spec/plan/tasks statuses and the roadmap entry, after confirming FR-014-01..04 and NFR-014-01..03 are satisfied, the Native Java seams and `*-from-java` guides are in place for HOTP/TOTP/OCRA/FIDO2/EMV/EUDIW, and the Implementation Drift Gate shows no unresolved high/medium-impact drift.

### Feature 013 – Toolchain & Quality Platform (In review)

- Implementation log (2025-11-15): Converted the EMV trace fixture sync automation into typed Gradle tasks (`VerifyEmvTraceProvenanceFixture`, `SyncEmvTraceProvenanceFixture`) so configuration cache runs stay clean, wired the verify task into every `Test` instance plus the `check` lifecycle, and exposed both helpers to operators via [rest-api/build.gradle.kts](rest-api/build.gradle.kts).
- Verification log (2025-11-15a): `./gradlew --no-daemon :rest-api:verifyEmvTraceProvenanceFixture` (PASS – fixture parity confirmed, configuration cache stored).
- Verification log (2025-11-15b): `./gradlew --no-daemon :rest-api:syncEmvTraceProvenanceFixture` (PASS – canonical docs fixture copied into ``rest-api/docs`/` with logged paths).
- Verification log (2025-11-15c): `./gradlew --no-daemon :rest-api:test` (PASS – verify task executed automatically before the suite; reran with a 420 s timeout to cover Selenium + OpenAPI tests).
- Verification log (2025-11-15d): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the build-logic change).
- Verification log (2025-11-15e): `./gradlew --no-daemon spotlessApply check` (PASS – pre-commit sweep ensuring the full workspace stays green before staging/commit prep).
- Status check (2025-11-15): Plan increments I0–I7 plus the documentation/telemetry sweep remain ✅; Implementation Drift Gate is still pending because T-006-23 (live Trusted Authority ingestion) is open in the tasks file with its Gradle/Node/Selenium verification commands queued behind owner-provided ETSI TL/OpenID Federation datasets.
- Planning log (2025-11-15): Added Increment I8 to `plan.md` detailing the Option A approach—download/verify the EU LOTL, hydrate Member-State TL snapshots, capture provenance metadata, and rerun the `:core`, `:application`, `:rest-api`, Node, and Selenium suites plus telemetry documentation as part of T-006-23.
- Clarification resolved (2025-11-15): [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) entry removed after confirming we will pull the real EU LOTL + Member-State TL datasets ourselves and record ingestion provenance inside the plan/tasks + telemetry notes.
- Ingestion log (2025-11-15): Downloaded EU LOTL sequence 373 (`eu-lotl.xml`) plus Germany (`TL-DE.xml`, seq 149) and Slovenia (`SI_TL.xml`, seq 78) Trusted Lists, stored raw XML and metadata hashes/timestamps under ``docs/trust/snapshots/2025-11-15`/` per Increment I8.
- Implementation log (2025-11-15): Finished T-006-23 by expanding Fixture dataset provenance metadata, adding the `pid-haip-lotl` conformance preset + copied SD-JWT assets, refreshing `trust/snapshots/haip-baseline.json`/DCQL presets/docs, updating REST/CLI/operator guides + telemetry snapshot, wiring `/presentations/seed` through `OpenId4VpFixtureIngestionService`, and regenerating the REST OpenAPI snapshot.
- Verification log (2025-11-15): `./gradlew --no-daemon :core:test --tests "*FixtureDatasets*"`, `./gradlew --no-daemon :application:test --tests "*OpenId4VpFixtureIngestionServiceTest*"`, `./gradlew --no-daemon :rest-api:test --tests "*Oid4vpRestContractTest*"`, `node --test [rest-api/src/test/javascript/eudi/openid4vp/console.test.js](rest-api/src/test/javascript/eudi/openid4vp/console.test.js)`, `OPENAUTH_SIM_PERSISTENCE_DATABASE_PATH=build/tmp/test-credentials.db ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EudiwOperatorUiSeleniumTest"`, `OPENAPI_SNAPSHOT_WRITE=true ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.OpenApiSnapshotTest"`, and the full `./gradlew --no-daemon spotlessApply check` sweep (note: initial run hit the OpenAPI snapshot gate before the subsequent success).

### Workstream – Documentation & DeepWiki steering

- Planning log (2025-11-15): User requested a [.devin/wiki.json](.devin/wiki.json) configuration to steer DeepWiki for `ivanstambuk/openauth-sim` based on the Devin DeepWiki docs; recorded an open question under Feature 010 to decide between repo-notes-only, mirrored autogenerated pages, or a feature/architecture-centric page set before updating the spec/plan/tasks and adding the config file.
- Implementation log (2025-11-15): Created [.devin/wiki.json](.devin/wiki.json) with an explicit 25-page outline covering Overview, System Architecture, Protocol Implementations (HOTP/TOTP/OCRA/EMV/CAP/FIDO2/EUDIW OpenID4VP), Shared Infrastructure, User Interfaces, Build System & Dependencies, Quality Automation & Governance, Testing Strategy, Development Workflow, CI/CD, and Development Guidelines, plus a global repo note targeting senior IAM/security engineers; wired DeepWiki steering into Feature 010 spec/plan as the governing knowledge-automation config and refreshed [docs/4-architecture/knowledge-map.md](docs/4-architecture/knowledge-map.md) to reference [.devin/wiki.json](.devin/wiki.json) ownership.
- Verification log (2025-11-15): `./gradlew --no-daemon spotlessApply check` (PASS – verification run after adding [.devin/wiki.json](.devin/wiki.json) and updating Feature 010 spec/plan/knowledge map for DeepWiki integration).
 - Implementation log (2025-11-15b): Refined the `Overview` page definition in [.devin/wiki.json](.devin/wiki.json) so the DeepWiki landing page starts with a clear 'Purpose and Scope' section, followed by a short system architecture overview, and only then introduces telemetry/fixtures/quality automation as cross-cutting attributes rather than leading content.
 - Verification log (2025-11-15b): `./gradlew --no-daemon spotlessApply check` (PASS – follow-up verification run after refining the DeepWiki Overview steering in [.devin/wiki.json](.devin/wiki.json)).
 - Implementation log (2025-11-15c): Updated [README.md](README.md) and [docs/2-how-to/README.md](docs/2-how-to/README.md) to describe all four consumption surfaces explicitly (Native Java API, REST API, operator console UI, CLI), and regrouped how-to guides so the Native Java API usage is called out alongside REST/UI/CLI flows.
 - Implementation log (2025-11-15d): Extended [.devin/wiki.json](.devin/wiki.json) to treat the Native Java API as a first-class programmatic facade by updating repo notes to list all four surfaces (Native Java, CLI, REST, UI) and adding a dedicated \"Native Java API\" page under the User Interfaces section that cross-links to [docs/2-how-to/use-ocra-from-java.md](docs/2-how-to/use-ocra-from-java.md) and future *-from-java guides.
 - Planning log (2025-11-15e): Added an open question under Feature 010 plus follow-up/backlog notes in `plan.md`/`tasks.md` proposing a future Feature 014 – Native Java API Facade to specify cross-protocol Java entry points, Javadoc surfaces, and `*-from-java` guides so programmatic usage becomes a governed facade alongside CLI/REST/UI.
 - Decision log (2025-11-15): Resolved the Native Java API governance question by accepting ADR-0007 (Native Java API Facade Strategy), which adopts per-protocol Native Java APIs governed by cross-cutting rules (future Feature 014) instead of a single monolithic Java SDK; removed the corresponding open-questions entries after recording this outcome in the ADR and Feature 010 plan/tasks.
 - Planning log (2025-11-15f): Scaffolded Feature 014 (``docs/4-architecture/features/014`/{spec,plan,tasks}.md`) as a cross-cutting Native Java API facade spec referencing ADR-0007, defined the per-protocol pattern, updated the roadmap to add Feature 014 as a placeholder, and seeded backlog items in Features 001, 002, 004, 005, and 006 plans to mirror OCRA's Native Java API over time.
 - Implementation log (2025-11-15g): Extended Feature 010 spec/plan for FR-010-11 and authored [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) plus the [docs/3-reference/README.md](docs/3-reference/README.md) entry so operators can see, per protocol/facade/flow/credential source, which major external dependencies (MapDB/Caffeine, Spring Boot/Thymeleaf/Springdoc, Picocli, test-only Node/Selenium) are exercised and where inline flows avoid hitting MapDB altogether.
- Verification log (2025-11-15g): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after adding the external-dependency matrix reference and updating Feature 010 spec/plan).
- Documentation log (2025-11-15h): Refined [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) to express all external dependencies as explicit Maven coordinates per facade/flow/credential source, removed cross-references such as “same as Evaluate/Inline” and “via REST API calls”, and formatted multi-dependency cells with one coordinate per line using `<br>` for readability.
- Verification log (2025-11-15h): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after the external-dependency reference refinements).
- Documentation log (2025-11-15i): Trimmed the TOTP section in [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) by removing the descriptive “TOTP mirrors HOTP’s dependency split; it reuses the same facades and persistence stack.” line so the reference stays purely tabular and focused on explicit facade/flow/credential-source dependency matrices.
- Verification log (2025-11-15i): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after the TOTP section copy tweak).
- Documentation log (2025-11-15j): Restructured the top of [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) so the table of contents sits immediately after the metadata block and the descriptive introduction (including the dependency category bullets and MapDB/Caffeine note) lives under a dedicated `## Overview` section.
- Verification log (2025-11-15j): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after the external-dependencies overview/Table-of-Contents restructuring).
- Governance log (2025-12-10, session reset "Read project context"): `git config core.hooksPath` → `githooks`; `git status -sb` → `## main...origin/main` (clean, no staged or modified files).
- Governance log (2025-12-10, CLI schema governance): Confirmed [docs/3-reference/cli/cli.schema.json](docs/3-reference/cli/cli.schema.json) as the single global registry for all CLI `--output-json` events (one definition per `event`), updated ADR-0014 and Feature 013 spec to reflect this, and tightened governance (Constitution + AGENTS) to forbid ad-hoc/manual edits outside the SDD pipeline, especially for machine-readable reference artefacts such as JSON schemas.
- Governance log (2025-12-10, CLI global JSON schema): introduced [docs/3-reference/cli/cli.schema.json](docs/3-reference/cli/cli.schema.json) as the single registry for CLI `--output-json` payloads (one definition per `event`), added `CliJsonSchemas`/`JsonShapeAsserter.assertMatchesShape(Object,…)` helpers so CLI tests validate per-event JSON against the global schema instead of per-command files, updated CLI tests (HOTP/TOTP/OCRA/EMV/FIDO2/EUDIW) and [docs/3-reference/cli-flags-matrix.md](docs/3-reference/cli-flags-matrix.md) to reference the registry, and ran `./gradlew --no-daemon :cli:test --tests "io.openauth.sim.cli.*" --tests "io.openauth.sim.cli.eudi.openid4vp.Oid4vpCliContractTest"` (PASS – all CLI JSON contract tests now exercise the global schema).
- Governance log (2025-12-10, open-questions governance): Updated [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) and [AGENTS.md](AGENTS.md) so the guardrail applies to the entire document (not just the summary table), removed the "Question Details" section and its historical entries, and confirmed that decision histories for prior questions now live only in specs/ADRs going forward.

### Workstream – Session reset and context refresh (2025-11-18)

- Context log (2025-11-18, Codex CLI – read project context): refreshed project orientation for this session by re-reading AGENTS.md, project-constitution.md, ReadMe.LLM, llms.txt, roadmap, knowledge-map, runbook-session-reset, and session-quick-reference; no code or spec changes performed yet.

- Implementation log (2025-11-18, T-015-02 helper telemetry): extended tools-mcp-server McpServer to attach sanitized telemetry for `totp.helper.currentOtp` (event=`mcp.totp.helper.lookup`, hashed credentialId, generationEpochSeconds, telemetryId) and `fixtures.list` (event=`mcp.fixtures.list`, protocol, presetCount, presetIds) while keeping responses JDK-only and REST-backed per ADR-0010.
- Verification log (2025-11-18, T-015-02 application helper tests): `./gradlew --no-daemon :application:test --tests "*Helper*"` (PASS – confirms existing TOTP helper service tests remain green).
- Verification log (2025-11-18, T-015-02 REST helper endpoint tests): `./gradlew --no-daemon :rest-api:test --tests "*Helper*"` (PASS – confirms `/api/v1/totp/helper/current` helper endpoint and validation paths remain green).
- Verification log (2025-11-18, T-015-02 MCP helper telemetry tests): `./gradlew --no-daemon :tools-mcp-server:test --tests "*Helper*"` (PASS – validates `mcp.totp.helper.lookup` and `mcp.fixtures.list` telemetry fields on helper tool responses).
- Verification log (2025-11-18, T-015-02 JSON-LD + check): `./gradlew --no-daemon generateJsonLd check` (PASS – JSON-LD snippets and full test suite remain green after MCP helper telemetry wiring).
- Verification log (2025-11-18, T-015-02 spotless gate): `./gradlew --no-daemon spotlessApply check` (PASS – repository-wide formatting and quality gates are green after helper telemetry changes).

- Governance log (2025-11-18, session reset "read project context"): `git config core.hooksPath` → `githooks` (confirmed managed hooks before re-reading roadmap, knowledge map, and MCP/EUDIW specs for this Codex CLI context refresh).
- Context log (2025-11-18, Codex CLI): Refreshed project orientation by reviewing [AGENTS.md](AGENTS.md), [docs/6-decisions/project-constitution.md](docs/6-decisions/project-constitution.md), [ReadMe.LLM](ReadMe.LLM), [llms.txt](llms.txt), [docs/4-architecture/roadmap.md](docs/4-architecture/roadmap.md), [docs/4-architecture/knowledge-map.md](docs/4-architecture/knowledge-map.md), [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md), [docs/5-operations/runbook-session-reset.md](docs/5-operations/runbook-session-reset.md), [docs/5-operations/session-quick-reference.md](docs/5-operations/session-quick-reference.md), and the active specs/plans for Features 006 and 015 so subsequent increments can anchor on the current governance, roadmap, and MCP/EUDIW scope.

### Workstream – MCP Agent Facade catalogue metadata (Feature 015, T-015-01)

- Implementation log (2025-11-18): Updated the MCP proxy tool descriptors in `tools/mcp-server` so `PayloadForwardToolDefinition` and `FixturesListToolDefinition` now surface `schema` aliases alongside `inputSchema`, add per-tool `promptHints`, and attach a catalogue `version` field backed by `McpToolMetadata.catalogVersion()` (currently `0.1.0`) to satisfy DO-015-01/FR-015-01. Added `McpToolMetadata` as the central registry for prompt-hint text and catalogue versioning without introducing non-JDK dependencies.
- Implementation log (2025-11-18): Extended `McpServer.handleToolsList` to compute enriched catalogue responses and emit `mcp.catalog.listed` telemetry by deriving a SHA-256 `schemaHash` over the ordered tool descriptors, recording `toolCount` and a synthetic `telemetryId`, and returning this payload under a `telemetry` field in the `tools/list` result (aligning with TE-015-01 while keeping the MCP result backward compatible for clients that only read `tools`).
- Verification log (2025-11-18, MCP catalogue tests): `./gradlew --no-daemon :tools-mcp-server:test --tests \"*Catalog*\"` (PASS – `McpServerCatalogTest` confirms `tools/list` returns descriptors with `inputSchema`/`schema` aliases, prompt hints, version metadata, and a `mcp.catalog.listed` telemetry object whose `toolCount` matches the number of tools and whose `sanitized` flag is true).
- Documentation log (2025-11-18, MCP docs): Updated [AGENTS.md](AGENTS.md) and [README.md](README.md) to describe MCP as an official agent facade, note that `tools/list` now surfaces JSON Schema payloads, per-tool prompt hints, and version metadata for `hotp.evaluate`, `totp.evaluate`, `totp.helper.currentOtp`, `ocra.evaluate`, `emv.cap.evaluate`, `fido2.assertion.evaluate`, `eudiw.wallet.simulate`, `eudiw.presentation.validate`, and `fixtures.list`, and point agents at the enriched catalogue instead of inferring request shapes from REST docs alone.
- Documentation log (2025-11-18, knowledge map): Extended [docs/4-architecture/knowledge-map.md](docs/4-architecture/knowledge-map.md) with a Feature 015 entry that links `tools-mcp-server` to the REST API, describes the MCP proxy’s JSON-RPC methods (`initialize`, `tools/list`, `tools/call`), and records that `mcp.catalog.listed` captures the catalogue `toolCount` and a schema hash persisted in [build/mcp-feedback.json](build/mcp-feedback.json) for governance snapshots.
- Fixture log (2025-11-18, MCP transcript): Updated [build/mcp-feedback.json](build/mcp-feedback.json) to add a `catalogTelemetry` block with `event=\"mcp.catalog.listed\"`, `toolCount=9`, the current catalogue `schemaHash` (`d0cdd1dea9e79d406984c1d7824ff67cc5c8cacb7b0ff486d14f291373e8438b` generated from the enriched descriptors), and `sanitized=true` so Feature 015’s FX-015-01 transcript now includes a catalogue snapshot alongside existing fixture calls/notifications.
- Verification log (2025-11-18, repo-wide gate after MCP catalogue changes): `./gradlew --no-daemon generateJsonLd check` and `./gradlew --no-daemon spotlessApply check` (PASS – JSON-LD docs, Spotless formatting, MCP tests, REST/CLI/UI suites, and architecture/coverage gates all remain green after wiring the MCP tool catalogue metadata and docs).

### Workstream – AI-ready docs and LLM surfaces (Feature 010/011/014)

- Planning log (2025-11-16): User selected Option B (LLM/assistant-facing documentation surfaces now, with Option C agent/MCP integration later). Updated Feature 010 spec/plan/tasks to add FR-010-13 and T-010-06 for [ReadMe.LLM](ReadMe.LLM)/[llms.txt](llms.txt) and cross-links, and extended Feature 011 plan/tasks with T-011-01 so [AGENTS.md](AGENTS.md) remains the canonical governance/onboarding surface for human contributors and AI agents.
- Implementation log (2025-11-16): Added [ReadMe.LLM](ReadMe.LLM) (LLM-oriented overview of HOTP/TOTP/OCRA/EMV-CAP/FIDO2/EUDIW, canonical Native Java entry points, and minimal examples), introduced [llms.txt](llms.txt) as the manifest of high-signal specs/docs for context windows, hardened [AGENTS.md](AGENTS.md) with an agent-facing repo map and module/API guidance, updated [README.md](README.md) with protocol-aware \"What is this?\" and \"Quickstart by surface\" sections plus AI-assistant pointers, and refreshed [docs/2-how-to/README.md](docs/2-how-to/README.md) to direct assistants to [ReadMe.LLM](ReadMe.LLM)/[llms.txt](llms.txt).
- Verification log (2025-11-16): `./gradlew --no-daemon spotlessApply check` (PASS – 22 s, 99 tasks: 6 executed, 93 up-to-date after introducing [ReadMe.LLM](ReadMe.LLM), [llms.txt](llms.txt), README/AGENTS/how-to cross-links, and Feature 010/011 task updates).
- Planning log (2025-11-16b): Parked Maven-publication work for a future increment by adding T-010-07 under Feature 010 tasks and a corresponding backlog note in the Feature 010 plan; once Maven coordinates (groupId/artifactId/version) are decided, that task will update README/ReadMe.LLM/how-to guides with dependency snippets and enrich POM metadata (name/description/url/licenses/scm/developers) for better AI discovery and consumption, without changing any publishing behaviour today.

### Workstream – Toolchain & MCP automation (Feature 013)

- Planning log (2025-11-16 – process correction): Removed the option inventory from the Feature 013 plan, added open question Q013-01 to [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md), and rewrote T-013-02 so it references the open decision instead of embedding recommendations. Further MCP design work will resume only after the user answers Q013-01.
- Process update (2025-11-16): Clarified [AGENTS.md](AGENTS.md) to require storing every option breakdown inside [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md), introduced a "Question Details" section in that file (with the full Q013-01 write-up), and kept Feature 013 plan/tasks referencing the question ID only. (Superseded on 2025-12-10; the Question Details section has been removed and `open-questions.md` now holds only live open rows while specs/ADRs capture option breakdowns and outcomes.)
- Process update (2025-11-16b): Strengthened the rule so agents must log or update the open question before discussing options—AGENTS.md now mandates recording the ambiguity in [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) first, and the guardrail in that file reiterates the same workflow.
- Decision log (2025-11-16c): User approved Option A (REST-backed MCP proxy) for T-013-02; updated Feature 013 plan with the `tools/mcp-server` design summary, refreshed T-013-02 intent to match, and removed Q013-01 from `open-questions.md`.
- Design log (2025-11-16d): Executed T-013-02 by documenting the MCP proxy design (module layout, tool catalog, configuration, telemetry, security, quality hooks) inside the Feature 013 plan and marking the task complete.
- Planning log (2025-11-16e): Scheduled T-013-04 to implement the `tools/mcp-server` module, wire its Spotless/test tasks into `qualityGate`, and update README/AGENTS with MCP run instructions.
- Implementation log (2025-11-16f): Completed T-013-04 – added the `tools-mcp-server` Gradle module, Content-Length MCP server implementation, config loader, tool registry/tests, README/AGENTS updates, and verified the new module through `spotlessApply` + `qualityGate`.
- Process update (2025-11-16g): Strengthened [AGENTS.md](AGENTS.md) with an explicit “No-direct-question” rule so every clarification must be logged in [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) (table row + Question Details) before discussing it in chat; reinforces the guardrail already noted in `open-questions.md`. (The No-direct-question rule remains; the Question Details requirement was dropped on 2025-12-10 so only the open-row table is authoritative.)
- Process update (2025-11-16h): Updated [AGENTS.md](AGENTS.md) and `open-questions.md` so agents must restate the captured options inline when asking the user for input—no more “please open the file” references; every chat reply now includes the question summary + options directly.
- Process update (2025-11-16i): Added a constitution clause + [AGENTS.md](AGENTS.md) note requiring options to be sorted by preference (Option A is always the recommendation, followed by lower-ranked alternatives) whenever recording or presenting open-question choices.
- Process update (2025-11-16j): `open-questions.md` now enforces the preferred-order rule inline—Option A must be explicitly annotated as “(Recommended)”, with subsequent options listed in descending preference so decisions are obvious without opening other files.
- Decision log (2025-11-16k): Resolved Q013-02 by selecting Option A (Gradle-backed metadata generator). Feature 013 plan/tasks now lock T-013-03 to emit both inline snippets and a hosted JSON-LD bundle so discoverability metadata stays in sync across surfaces; `open-questions.md` cleared.
- Implementation log (2025-11-16l): Completed T-013-03 by adding [docs/3-reference/json-ld/metadata.json](docs/3-reference/json-ld/metadata.json), wiring `GenerateJsonLdTask` into [build.gradle.kts](build.gradle.kts), documenting the workflow (README + session quick reference), and committing the generated snippets under ``docs/3-reference/json-ld/snippets`/`. Commands: `./gradlew --no-daemon generateJsonLd`, `./gradlew --no-daemon spotlessApply check`.
- Decision log (2025-11-16m): Resolved Q013-03 (Option A structured MCP runbook) and Q013-04 (Option A integrate `generateJsonLd` into `check`/`qualityGate`); new tasks T-013-05/T-013-06 track the follow-up implementation.
- Implementation log (2025-11-16n): Executed T-013-05 by running the REST facade (`./gradlew --no-daemon --init-script [tools/run-rest-api.init.gradle.kts](tools/run-rest-api.init.gradle.kts) runRestApi`), installing the MCP binary (`./gradlew --no-daemon :tools-mcp-server:installDist`), and driving the proxy via a Python harness (Content-Length frames + minified JSON). Captured per-tool transcripts in [build/mcp-feedback.json](build/mcp-feedback.json) and summarized fixtures coverage, HOTP success, TOTP `otp_out_of_window` validation, OCRA inline success, EMV/FIDO2/EUDIW parity, and the empty OCRA fixtures list inside the Feature 013 plan/tasks.
- Planning log (2025-11-16l): Expanded the Feature 013 plan with the JSON-LD/Schema.org generator outline (inputs, Gradle task design, workflow, telemetry scope) so T-013-03 can proceed without new clarifications; tasks checklist now calls out the generator intent and verification commands.
- Implementation log (2025-11-16o): Completed T-013-07 – introduced `TotpCurrentOtpHelperService`, `/api/v1/totp/helper/current`, README/AGENTS/MCP docs, OpenAPI snapshot refresh, [build/mcp-feedback.json](build/mcp-feedback.json) transcript entry, and the `totp.helper.currentOtp` tool in the MCP registry; telemetry now emits under `totp.helper.lookup`.
- Governance log (2025-11-18, user decision "MCP rate limiting responsibility"): Recorded ADR-0013 (`docs/6-decisions/ADR-0013-mcp-rate-limits.md`) to delegate MCP rate limiting to upstream API gateways / LLM platform controls, and updated Feature 015 spec/plan/tasks to re-scope FR-015-04 and T-015-04 to auditing/telemetry only (no in-process MCP rate limits inside the emulator).
## Next suggested actions

> Keep this section synced as workstreams progress. When an item is completed, update it to point at the next actionable task for that workstream (or remove the subsection if the stream is idle).

- Governance log (2025-12-10, CLI OpenCLI document): migrated [docs/3-reference/cli/cli.schema.json](docs/3-reference/cli/cli.schema.json) from a pure JSON Schema definitions registry to an OpenCLI-compliant document (`opencli=0.1`) that now describes the HOTP/TOTP/OCRA/EMV/FIDO2/EUDIW command tree, embeds per-command input/response metadata, and inlines CLI+JSON examples for key JSON-producing commands while preserving the existing `definitions[...]` map so `CliJsonSchemas`/`JsonShapeAsserter` tests continue to validate `--output-json` payloads without modification.



### Workstream – EUDIW OpenID4VP simulator

- Next suggested action: Prep the Implementation Drift Gate now that T-006-23 is ✅—capture the provenance evidence table, refresh `jacocoTestReport`/`spotbugsMain spotbugsTest`, and decide which backlog item to pull next (T-006-24 same-device/DC-API exploration or T-006-25 issuance alignment) once the gate closes.

### Workstream – Documentation & DeepWiki steering

- Next suggested action: Monitor how DeepWiki renders the wiki from [.devin/wiki.json](.devin/wiki.json) and, if needed, iterate on repo/page notes in a future Feature 010 increment to keep the page outline aligned with new features, protocols, or governance docs.

### Workstream – Toolchain & MCP automation

- Implementation log (2025-11-16): Completed T-013-06 (generateJsonLd guard) and T-013-07 (TOTP helper endpoint + MCP tool) with README/AGENTS/OpenAPI/MCP transcript updates; telemetry now emits under `totp.helper.lookup`. Commands: `./gradlew --no-daemon generateJsonLd check`, `./gradlew --no-daemon qualityGate`.
- Planning log (2025-11-16): Created Feature 015 (MCP Agent Facade) spec/plan/tasks, added the roadmap entry, and documented MCP as an official facade to host agent-first capabilities.
- Next suggested action: Review the MCP backlog (Option B – seed OCRA fixtures, helper ergonomics) using the updated [build/mcp-feedback.json](build/mcp-feedback.json) to decide which follow-up to prioritize before expanding the tool catalog again.

## Completed Clarifications governance batch (historical summary)

- Planning log (2025-11-15): Logged and resolved a Clarifications scope question (Option A selected for completing A1/A2/T1/T2, leaving ADR work optional) and reflected the outcome in [AGENTS.md](AGENTS.md), the templates, and the open-questions log; documentation-only updates.
- Historical note: Detailed verification logs for the Clarifications governance batch (Features 001–004 and 009–013, plus docs/runbook/AGENTS updates) have been pruned from this snapshot for readability. Consult git history and the per-feature specs/plans/tasks for the full drift-gate and verification record.

### Feature 010 / Feature 014 – Native Java API from JMeter/Neoload

- Documentation log (2025-11-15): Added per-protocol how-to guides for consuming the Native Java facade from JMeter (Groovy JSR223 samplers) and Neoload scripts: [docs/2-how-to/use-hotp-from-jmeter.md](docs/2-how-to/use-hotp-from-jmeter.md), `use-hotp-from-neoload.md`, `use-totp-from-jmeter.md`, `use-totp-from-neoload.md`, `use-ocra-from-jmeter.md`, `use-ocra-from-neoload.md`, `use-fido2-from-jmeter.md`, `use-fido2-from-neoload.md`, `use-emv-cap-from-jmeter.md`, `use-emv-cap-from-neoload.md`, `use-eudiw-from-jmeter.md`, and `use-eudiw-from-neoload.md`. Updated Feature 010 and Feature 014 specs to document per-protocol JMeter/Neoload coverage, and extended [docs/2-how-to/README.md](docs/2-how-to/README.md) to link these guides under “Native Java API from JMeter/Neoload”.
- Documentation log (2025-11-15b): Refined all JMeter how-to guides (`use-hotp-from-jmeter.md`, `use-totp-from-jmeter.md`, `use-ocra-from-jmeter.md`, `use-fido2-from-jmeter.md`, `use-emv-cap-from-jmeter.md`, `use-eudiw-from-jmeter.md`) so each example is self-contained (no external helper classes) and uses inline or in-memory-backed Native Java flows purely for calculation/evaluation (no replay semantics). For HOTP, TOTP, and WebAuthn, added explicit stored-credential JSR223 snippets alongside inline flows; for WebAuthn specifically, switched the JMeter examples from the verification seam (`WebAuthnEvaluationApplicationService`) to the assertion generation seam (`WebAuthnAssertionGenerationApplicationService`) so Evaluate always means “generate assertion” consistently with the operator UI; for EUDIW, restricted the JMeter guide to wallet simulation only (no validation script), to match the “calculation-only” requirement.
- Documentation log (2025-11-15b): Refined all JMeter how-to guides (`use-hotp-from-jmeter.md`, `use-totp-from-jmeter.md`, `use-ocra-from-jmeter.md`, `use-fido2-from-jmeter.md`, `use-emv-cap-from-jmeter.md`, `use-eudiw-from-jmeter.md`) so each example is self-contained (no external helper classes) and uses inline or in-memory-backed Native Java flows purely for calculation/evaluation (no replay semantics). For HOTP, TOTP, and WebAuthn, added explicit stored-credential JSR223 snippets alongside inline flows; for WebAuthn specifically, switched the JMeter examples from the verification seam (`WebAuthnEvaluationApplicationService`) to the assertion generation seam (`WebAuthnAssertionGenerationApplicationService`) so Evaluate always means “generate assertion” consistently with the operator UI; for OCRA and EMV/CAP, added explicit “stored descriptor/preset” sections alongside inline examples; for EUDIW, added separate stored-preset vs inline SD-JWT wallet simulation snippets and kept the guide limited to wallet simulation (no validation script), to match the “calculation-only” requirement.
- Verification log (2025-11-15b): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after converting all JMeter how-to snippets to self-contained JSR223 Groovy scripts, adding stored-credential/examples for HOTP/TOTP/WebAuthn/OCRA/EMV/CAP/EUDIW, aligning WebAuthn with the generation seam, and trimming the EUDIW validation example, and updating the session log entry).
## Hook guard 2025-11-16T15:05:23+01:00

\`git config core.hooksPath\`:
githooks

Gradle: ./gradlew --no-daemon spotlessApply check (BUILD SUCCESSFUL)
JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
codex-commit-review.sh: failed (exit 141); using manual Conventional Commit message.

- Governance log (2025-11-18, user request "Commit & push all changes"): git config core.hooksPath -> githooks (session reset guard before staging and verification).

- Governance log (2025-11-18, user request "Commit & push all changes"): pre-commit targeted :rest-api:test FAILED (EmvCapOperatorUiSeleniumTest, Fido2OperatorUiSeleniumTest, WebAuthnCredentialSanitisationTest; committing with --no-verify at operator request).

## Hook guard 2025-12-11T00:00:00Z

`git config core.hooksPath`:
githooks

### Workstream – Facade seam hardening (2025-12-11)

- Implementation log (2025-12-11): Added `EmvCapCredentialDirectoryApplicationService` and wired `EmvCapApplicationConfiguration` + `EmvCapCredentialDirectoryController` to delegate through it; normalized EMV directory/detial JSON fields (`id`, `*HexLength`, uppercase `sha256:*`) while keeping secrets omitted from listings.
- Implementation log (2025-12-11): Expanded `FacadeDelegationArchitectureTest` to cover REST EMV directory/seed services alongside existing CLI EMV/FIDO2/EUDIW and REST FIDO/EUDIW seam checks; MapDB avoidance rules for CLI/REST/UI remain enforced.
- Implementation log (2025-12-11): Removed residual facade-layer persistence adapters by refactoring EMV stored evaluation + REST evaluation to use `EmvCapCredentialDirectoryApplicationService`, updating OCRA CLI to use `OcraCredentialManagementApplicationService.usingDefaults`, and adding FIDO2 application `usingDefaults` + directory/attestation metadata services so CLI/REST no longer instantiate core verifiers/adapters directly.
- Documentation log (2025-12-11): Migrated remaining plan steps into feature tasks/specs and removed the temporary `docs/tmp/1-application-facade-seams-plan.md` after implementation.
- Verification log (2025-12-11): `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.emv.cap.EmvCapCredentialDirectoryControllerTest"` (PASS).
- Verification log (2025-12-11): `./gradlew --no-daemon :core-architecture-tests:test` (PASS).
- Verification log (2025-12-11): `./gradlew --no-daemon spotlessApply check` (PASS – full gate after EMV facade refactor + ArchUnit expansion).

### Workstream – Facade contract playbook (2025-12-12)

- Documentation log (2025-12-12): Added [docs/4-architecture/facade-contract-playbook.md](docs/4-architecture/facade-contract-playbook.md) as the canonical cross-facade contract reference (Native Java, CLI, REST, UI, MCP, standalone), linked it from feature specs 001–006, 009, 012–015, and added discovery hooks in [AGENTS.md](AGENTS.md), [llms.txt](llms.txt), [docs/4-architecture/knowledge-map.md](docs/4-architecture/knowledge-map.md), and [docs/5-operations/session-quick-reference.md](docs/5-operations/session-quick-reference.md).
- Documentation log (2025-12-12): Migrated and removed the temporary plan `docs/tmp/5-facade-contract-playbook-plan.md` after Feature 013 spec/plan/tasks encoded the work.
- Hook guard (2025-12-12): `git config core.hooksPath` -> `githooks`.
- Verification log (2025-12-12): `./gradlew --no-daemon spotlessApply check` (PASS – facade contract playbook published and linked).

## Hook guard 2025-12-13T08:39:01+01:00

`git config core.hooksPath`:
githooks

Verification: `./gradlew --no-daemon spotlessApply check` (PASS)

## Hook guard 2025-12-13T09:01:03+01:00

`git config core.hooksPath`:
githooks

Verification: `./gradlew --no-daemon spotlessApply check` (PASS)
