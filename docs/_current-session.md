# Current Session Snapshot

> Keep this file up to date across all active chats. Treat it as the single source of truth for in-progress workstreams so every hand-off is instant. Replace the bracketed text and prune sections you do not need.

- Date: 2025-11-17
- Primary branch: `main`
- Other active branches: none

## Governance & Tooling

- Governance log (2025-11-17, user request "Project status – session guard"): `git config core.hooksPath` → `githooks` (runbook reset check at chat kickoff).
- Governance log (2025-11-17, user request "Commit & push all changes"): `git config core.hooksPath` → `githooks` (session reset guard before staging and verification).
- Governance log (2025-11-17, Feature 015 MCP facade sweep): `./gradlew --no-daemon spotlessApply check` (PASS – 27 s, 109 tasks: 9 executed, 100 up-to-date confirming the repo is clean before committing).
- Governance log (2025-11-17, Feature 015 MCP facade sweep): `./tools/codex-commit-review.sh` (FAILED – exit 141; manual Conventional Commit message required, mirrors 2025-11-16 failure pattern).
- Governance log (2025-11-17, standalone module smoke test): `./gradlew --no-daemon :standalone:shadowJar` (PASS – Shadow-based module builds the `openauth-sim-standalone` fat JAR composed of CLI/REST/UI/MCP dependencies).
- Governance log (2025-11-17, Feature 010 Maven metadata sweep): `./gradlew --no-daemon spotlessApply check` (PASS – repo-wide formatter + verification sweep after introducing the distribution module, POM metadata, README/ReadMe.LLM publishing docs, and Feature 010 task updates).
- Governance log (2025-11-17, standalone module rename verification): `./gradlew --no-daemon :standalone:shadowJar` (PASS – confirmed the renamed module still assembles the fat JAR with CLI/REST/UI/MCP bundles).
- Governance log (2025-11-17, standalone rename spotless check): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide verification after renaming the module references and docs).
- Governance log (2025-11-17, publish workflow addition): `./gradlew --no-daemon spotlessApply check` (PASS – verified README/ReadMe.LLM instructions, Feature 010 notes, and the new `.github/workflows/publish-standalone.yml` automation).
- Governance log (2025-11-17, release prep): Updated [gradle.properties](gradle.properties) to set `VERSION_NAME=0.1.0` ahead of the initial Maven Central release; no additional Gradle run required since code is unchanged.
- Governance log (2025-11-17, TOTP UI flake investigation): `./gradlew --no-daemon :rest-api:test --tests "*TotpOperatorUiSeleniumTest.storedTotpReplaySampleAutoFillsForm"` (PASS – reproduced CI failure locally, confirmed longer field wait resolves the timeout).
- Governance log (2025-11-17, publish workflow fix): Adjusted [`.github/workflows/publish-standalone.yml`](.github/workflows/publish-standalone.yml) to wrap the multi-line Gradle command in a `run: |` block so shell continuation lines no longer include leading spaces (previous run failed because the task path started with a space).
- Governance log (2025-11-16, user request "Markdown newline sweep – session guard"): `git config core.hooksPath` → `githooks` (confirmed managed hooks before investigating the Markdown rendering regressions called out in this chat).
- Governance log (2025-11-16, Feature 010 doc newline sweep): `./gradlew --no-daemon spotlessApply check` (PASS – 26 s, 109 tasks: 6 executed, 103 up-to-date after collapsing stray line breaks in prerequisite bullets so the public docs render correctly everywhere).
- Governance log (2025-11-16, Feature 010 Markdown newline guard): `tools/scripts/check-markdown-linewraps.py $(git ls-files '*.md')` (PASS – repo-wide sweep to verify no staged Markdown bullets still split after commas/inline code before wiring the guard into the hook).
- Governance log (2025-11-16, Feature 010 Markdown newline guard): `./gradlew --no-daemon spotlessApply check` (PASS – 30 s, 109 tasks: 9 executed, 100 up-to-date after adding the guard script + hook integration).
- Governance log (2025-11-16, user request "Project status – status refresh"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).

- Governance log (2025-11-16, user request "Project status (run #3)"): `git config core.hooksPath` → `githooks` (session reset guard for the 2025-11-16 project status recap requested in this chat).
- Governance log (2025-11-16, Feature 010 T-010-08 doc-link sweep): `python - <<'PY' …` (PASS – converted 102 Markdown files to path links, reran refined passes to avoid URLs/link targets, Gradle verification intentionally skipped per user request).
- Governance log (2025-11-16, Feature 010 T-010-08 doc-link fix pass 2): `python - <<'PY' …` (PASS – refined detection to skip inline code fences, prevent nested links, and relink 115 Markdown files; updated README/AGENTS/docs landing pages accordingly, Gradle verification still deferred at user request).
- Governance log (2025-11-16, Feature 010 T-010-08 doc-link fix pass 2): `python - <<'PY' …` (PASS – refined detection to skip inline code fences, prevent nested links, and relink 115 Markdown files; updated README/AGENTS/docs landing pages accordingly, Gradle verification still deferred at user request).
- Governance log (2025-11-16, Feature 010 T-010-08 directory unlink sweep): `python - <<'PY' …` (PASS – converted 98 directory references back to inline code per updated policy, no Gradle run yet per instruction).
- Governance log (2025-11-16, user request "Project status"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-16, Feature 013 T-013-03 implementation): `./gradlew --no-daemon generateJsonLd` (PASS – generated README/ReadMe.LLM snippets + consolidated bundle from the new metadata source).
- Governance log (2025-11-16, Feature 013 T-013-03 implementation): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide verification after wiring the generator task, metadata file, and documentation updates).
- Governance log (2025-11-16, Feature 013 MCP feedback run): `./gradlew --no-daemon --init-script [tools/run-rest-api.init.gradle.kts](tools/run-rest-api.init.gradle.kts) runRestApi` (background REST instance feeding the MCP proxy; terminated after transcript capture).
- Governance log (2025-11-16, Feature 013 MCP feedback run): `./gradlew --no-daemon :tools-mcp-server:installDist` (built the standalone binary used by the MCP harness).
- Governance log (2025-11-16, Feature 013 MCP feedback run): `python - <<'PY' …` (inline MCP harness sending JSON-RPC frames; outputs archived in [build/mcp-feedback.json](build/mcp-feedback.json) and summarized in the Feature 013 plan).
- Governance log (2025-11-16, Q013-03/Q013-04 capture): Added open-question entries for MCP feedback plan (Option A runbook) and `generateJsonLd` automation (Option A qualityGate integration) per the new next-actions guardrail; resolved the same day after confirming both Option A picks.
- Governance log (2025-11-16, user request "AI/agent integration planning – T-013-02"): `git config core.hooksPath` → `githooks` (session reset guard before editing Feature 013 plan/tasks for the MCP design backlog).
- Governance log (2025-11-16, user request "AI/agent integration planning – T-013-02 docs"): `./gradlew --no-daemon spotlessApply check` (PASS – 7 s, 99 tasks: 3 executed, 96 up-to-date after updating Feature 013 plan/tasks and `_current-session.md` with the MCP option analysis and module outline).
- Governance log (2025-11-16, user request "AI/agent integration planning – process correction"): `./gradlew --no-daemon spotlessApply check` (PASS – 11 s, 99 tasks: 3 executed, 96 up-to-date after removing the option inventory from the Feature 013 plan, adding Q013-01, and updating the tasks/session log).
- Governance log (2025-11-16, user request "AI/agent integration plan storage fix"): `./gradlew --no-daemon spotlessApply check` (PASS – 22 s, 99 tasks: 6 executed, 93 up-to-date after updating [AGENTS.md](AGENTS.md), enhancing `open-questions.md` with the Question Details section, and syncing Feature 013 artifacts with the new process).
- Governance log (2025-11-16, user request "AI/agent integration plan storage fix – phase 2"): `./gradlew --no-daemon spotlessApply check` (PASS – 22 s, 99 tasks: 6 executed, 93 up-to-date after tightening the [AGENTS.md](AGENTS.md) wording to require logging the question before discussion and updating the open-questions guardrail accordingly).
- Governance log (2025-11-16, user request "T-013-02 Option A decision"): `./gradlew --no-daemon spotlessApply check` (PASS – 13 s, 99 tasks: 3 executed, 96 up-to-date after resolving Q013-01, updating Feature 013 plan/tasks, and pruning the open-questions entry).
- Governance log (2025-11-16, user request "T-013-02 Option A decision"): `./gradlew --no-daemon spotlessApply check` (PASS – 13 s, 99 tasks: 3 executed, 96 up-to-date after resolving Q013-01, updating Feature 013 plan/tasks, and pruning the open-questions entry).
- Governance log (2025-11-16, user request "Schedule T-013-04 implementation"): `./gradlew --no-daemon spotlessApply check` (PASS – 11 s, 99 tasks: 3 executed, 96 up-to-date after adding the T-013-04 task, plan entry, and session log notes).
- Governance log (2025-11-16, user request "T-013-04 MCP server implementation"): `./gradlew --no-daemon spotlessApply` (PASS – 67 s, Spotless applied repo-wide after wiring `tools-mcp-server` into the build).
- Governance log (2025-11-16, user request "T-013-04 MCP server implementation"): `./gradlew --no-daemon qualityGate` (PASS – 55 s, verified the new module participates in the managed gate alongside existing subprojects).
- Governance log (2025-11-16, user request "T-013-04 MCP server implementation"): `./gradlew --no-daemon qualityGate` (PASS – 18 s, reran after the MCP server tests were finalized).
- Governance log (2025-11-16, user request "EUDIW OpenID4VP protocol doc improvements"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring [docs/3-reference/protocols/eudiw-openid4vp.md](docs/3-reference/protocols/eudiw-openid4vp.md) for learning-optimised flows and simulator mapping).
- Governance log (2025-11-16, T-013-06 JSON-LD automation): `./gradlew --no-daemon generateJsonLd check` (PASS – generator now runs before the verification pipeline, Spotless tasks, and `check` via the new dependencies).
- Governance log (2025-11-16, T-013-06 JSON-LD automation): `./gradlew --no-daemon qualityGate` (PASS – confirmed the gate now invokes `generateJsonLd` via Spotless/check and respects the write-if-changed guard).
- Governance log (2025-11-16, T-013-07 TOTP helper implementation): `./gradlew --no-daemon generateJsonLd check` (PASS – ≥600 s timeout covering Selenium/UI suites after adding the helper endpoint and MCP tool).
- Governance log (2025-11-16, T-013-07 TOTP helper implementation): `./gradlew --no-daemon qualityGate` (PASS – 6 m 42 s, full pipeline including the new helper tests and MCP registry changes).
- Governance log (2025-11-16, Feature 013 drift gate): `./gradlew --no-daemon reflectionScan` (PASS – revalidated the reflection ban before marking the drift gate complete).
- Governance log (2025-11-16, Feature 013 drift gate): `./gradlew --no-daemon :core-ocra:spotbugsMain :core-ocra:pmdMain :core-ocra:pmdTest` (PASS – module-level SpotBugs/PMD sweep recorded for the drift gate close-out).
- Governance log (2025-11-15, current session): `git config core.hooksPath` → `githooks` (session reset guard; hooks path confirmed for this Codex CLI run).
- Governance log (2025-11-15, user request "Feature 005 pruning"): `git config core.hooksPath` → `githooks` (pre-update guard before editing `_current-session.md`).
- Governance log (2025-11-15, user hand-off request "Project status next action"): re-ran `git config core.hooksPath` → `githooks` to document the hook guard at session kickoff.
- Governance log (2025-11-15, user request "Feature 6 status"): `git config core.hooksPath` → `githooks` (session reset guard for this check-in).
- Governance log (2025-11-15, Implementation Drift Gate kickoff prep): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, scenario tracking review): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, commit/push prep): `git config core.hooksPath` → `githooks` (pre-commit guard re-confirmed before packaging outstanding work).
- Governance log (2025-11-15, user request "DeepWiki wiki.json steering"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, user hand-off "Feature 014 Native Java API facade"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-15, user request "JMeter/Neoload Native Java docs"): `git config core.hooksPath` → `githooks` (session reset guard before planning new how-to guides).
- Environment log (2025-11-15, current session): `JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64`; `java -version` → `openjdk version "17.0.16"` (Java 17 JDK confirmed for Gradle/Javadoc runs).
- Governance log (2025-11-16, session reset "read initial project context"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run).
- Governance log (2025-11-16, user request "Commit and push all changes"): `git config core.hooksPath` → `githooks` (pre-commit guard re-confirmed before packaging outstanding work); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep before commit/push for the JMeter/Neoload Native Java documentation updates and external-dependency reference).
 - Governance log (2025-11-16, user request "HOTP protocol doc – incremental learning improvements"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding the “HOTP in one page” summary section to [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md)).
 - Governance log (2025-11-16, user request "HOTP protocol doc – provisioning flow structure"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring the “HOTP secret provisioning” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) with explicit Sequence and Policy knobs subsections).
 - Governance log (2025-11-16, user request "HOTP protocol doc – authentication flow structure"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring the “HOTP authentication (basic)” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) with explicit Sequence and Policy knobs subsections).
  - Governance log (2025-11-16, user request "HOTP protocol doc – resynchronisation/state model alignment"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after folding resynchronisation and counter-state content into the “HOTP authentication (basic)” section as a unified Resynchronisation and drift subsection in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md)).
  - Governance log (2025-11-16, user request "HOTP protocol doc – flow-to-code mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after converting the HOTP “Simulator implementation pointers” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) into a flow-to-code table that maps provisioning, authentication/windowed verification, replay/resynchronisation, and the core HOTP algorithm to their key types and tests).
  - Governance log (2025-11-16, user request "HOTP protocol doc – ergonomics finish"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding RFC/TOTP/OCRA callouts, an audience line, a small worked example, a `What to remember` list, a `Configuration knobs` table, and an updated security section to [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md)).
  - Governance log (2025-11-16, user request "FIDO2/WebAuthn protocol doc – full ergonomics and mapping pass"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding normative callouts, a “WebAuthn in one page” summary, a data-structures and verification algorithm section, structured Registration/Authentication sequences with Policy/Simulator/What to remember subsections, credential/UX and RP configuration sections, security and integration guidance, a short criticism/controversies appendix, and a flow-organised simulator mapping table to [docs/3-reference/protocols/fido2-webauthn.md](docs/3-reference/protocols/fido2-webauthn.md)).
- Governance log (2025-11-16, user request "FIDO2/WebAuthn protocol doc – diagram markers and worked example"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding ①–⑤ markers to the WebAuthn registration/authentication PlantUML diagrams and PNGs, wiring those markers into the `#### Sequence` lists in [docs/3-reference/protocols/fido2-webauthn.md](docs/3-reference/protocols/fido2-webauthn.md), and appending a concrete assertion verification worked example based on the `ES256:uv0_up1` vector from [docs/webauthn_assertion_vectors.json](docs/webauthn_assertion_vectors.json)).
  - Governance log (2025-11-16, user request "project status"): `git config core.hooksPath` → `githooks` (session reset guard and governance log refresh before summarising roadmap/feature status for this Codex CLI run).
 - Governance log (2025-11-16, user request "TOTP protocol doc – ergonomics and mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring [docs/3-reference/protocols/totp.md](docs/3-reference/protocols/totp.md) with RFC/HOTP callouts, a “TOTP in one page” section, updated provisioning/authentication/drift sections, a configuration parameters table, refined security guidance, and a flow-to-code implementation map).
 - Governance log (2025-11-16, user request "OCRA protocol doc – ergonomics and mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after restructuring [docs/3-reference/protocols/ocra.md](docs/3-reference/protocols/ocra.md) with an “OCRA in one page” section, HOTP/TOTP relationship note, simplified algorithm description, parallel flow sections, suite design guidance, expanded S canonicalisation advice, refined security properties, and a flow-aligned simulator mapping).
 - Governance log (2025-11-16, user request "OCRA protocol doc – numeric example + diagram markers"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding a concrete numeric OCRA example based on [docs/ocra_validation_vectors.json](docs/ocra_validation_vectors.json) to [docs/3-reference/protocols/ocra.md](docs/3-reference/protocols/ocra.md) and annotating the OCRA PlantUML sequence diagrams with step markers ①–⑪).
 - Governance log (2025-11-16, user request "EMV/CAP protocol doc – ergonomics and mapping"): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after adding an “EMV/CAP in one page” section, parallel Identify/Respond/Sign flow blocks with `#### Sequence`/`Key parameters`/`Policy knobs & pitfalls`/`What to remember` subsections, a CAP configuration and profiles table, a symbolic CAP derivation example, a criticism/controversies appendix, and ①–⑪ markers in the EMV/CAP PlantUML diagrams and PNGs, all wired into [docs/3-reference/protocols/emv-cap.md](docs/3-reference/protocols/emv-cap.md)).
 - Governance log (2025-11-16, user request "Project status"): `git config core.hooksPath` → `githooks` (session reset guard for this Codex CLI run before summarising roadmap and active workstreams).

## Active workstreams

## Decisions & Notes

- 2025-11-17 – Logged [docs/6-decisions/ADR-0011-standalone-fat-jar-distribution.md](docs/6-decisions/ADR-0011-standalone-fat-jar-distribution.md) selecting the `openauth-sim-standalone` fat JAR as the published artifact and pointing consumers to [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) for exclusion guidance.
- 2025-11-17 – Added the `standalone` module with Shadow + publish-on-central wiring, updated [README.md](README.md) and [ReadMe.LLM](ReadMe.LLM) with the release workflow for `io.github.ivanstambuk:openauth-sim-standalone`, created [`.github/workflows/publish-standalone.yml`](.github/workflows/publish-standalone.yml) to write `~/.gradle/gradle.properties` from Central Portal + signing secrets, and closed Feature 010 task T-010-07 (docs/4-architecture/features/010/tasks.md) after recording the verification runs.

### Feature 014 – Native Java Javadoc policy cleanup

- Specification log (2025-11-16): Updated Feature 014 spec/plan to add NFR-014-04 (public Javadoc hygiene), clarified that Native Java Javadoc may only cite public references (protocol standards, how-to docs, ADR-0007), and recorded the new guard requirement in the Implementation Drift Gate. ADR-0008 now documents the hygiene policy/guard as part of the Native Java Javadoc CI strategy.
- Implementation log (2025-11-16): Scrubbed all Native Java-facing Javadoc in `core` and `application` (HOTP/TOTP/WebAuthn/EMV/CAP/EUDIW seams plus supporting fixtures/helpers) so public docs no longer mention Feature/FR/NFR/T identifiers; kept references to ADR-0007 and the relevant ``docs/2-how-to`/*-from-java.md` guides. Added `NativeJavaJavadocPolicyTest` under `core-architecture-tests` to scan `:application:nativeJavaApiJavadoc` sources for forbidden roadmap identifiers.
- Verification log (2025-11-16): `./gradlew --no-daemon :core-architecture-tests:test --tests "*NativeJavaJavadocPolicyTest"` (PASS – guard confirms no identifiers leaked); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep with Native Java guard/tests active).

### Feature 014 / Feature 001 – Native Java API (HOTP seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.hotp.HotpEvaluationApplicationService` (with its `EvaluationCommand` / `EvaluationResult` types) as the Native Java API seam for HOTP by updating Feature 001 and Feature 014 specs/tasks, added Javadoc describing the seam and its governance references (FR-001-01..07, FR-014-02/04, ADR-0007), and introduced `HotpNativeJavaApiUsageTest` to exercise stored and inline evaluations via the Native Java entry point including a validation-failure branch for missing counters.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-hotp-from-java.md](docs/2-how-to/use-hotp-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the Native Java HOTP flow is documented alongside the existing OCRA guide, keeping terminology and types aligned with `HotpEvaluationApplicationService` and Feature 014’s Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :core:test :application:test` (PASS – core/HOTP unit tests plus application HOTP tests, including the new Native Java API usage tests); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the HOTP Native Java documentation and test additions).

### Feature 014 / Feature 002 – Native Java API (TOTP seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.totp.TotpEvaluationApplicationService` (with its `EvaluationCommand` / `EvaluationResult` types) as the Native Java API seam for TOTP by updating Feature 002 and Feature 014 specs/tasks, added Javadoc describing the seam and its governance references (FR-002-01..07, FR-014-02/04, ADR-0007), and introduced `TotpNativeJavaApiUsageTest` to exercise stored generation and inline validation (success + out-of-window failure) via the Native Java entry point using RFC 6238 vectors.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-totp-from-java.md](docs/2-how-to/use-totp-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the Native Java TOTP flow sits alongside the HOTP/OCRA guides, keeping terminology and types aligned with `TotpEvaluationApplicationService` and the Feature 014 Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :application:test --tests "*TotpNativeJavaApiUsageTest"` (PASS – TOTP Native Java usage tests); `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the TOTP Native Java documentation and test additions).

### Feature 014 / Feature 004 – Native Java API (FIDO2/WebAuthn seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.fido2.WebAuthnEvaluationApplicationService` (with its `EvaluationCommand` / `EvaluationResult` types) as the Native Java API seam for WebAuthn assertion evaluation by updating Feature 004 and Feature 014 specs/tasks, added Javadoc describing the seam and its governance references (FR-004-01/02, FR-014-02/04, ADR-0007), and introduced `WebAuthnNativeJavaApiUsageTest` to exercise stored and inline assertion evaluation via the Native Java entry point using a local `CredentialStore` and stub assertion payloads.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-fido2-from-java.md](docs/2-how-to/use-fido2-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the Native Java WebAuthn flow appears alongside the HOTP/TOTP/OCRA guides, reusing the same terminology as `WebAuthnEvaluationApplicationService` and the Feature 014 Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :application:test --tests "*WebAuthnNativeJavaApiUsageTest"` (PASS – WebAuthn Native Java usage tests) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the WebAuthn Native Java documentation and test additions).

### Feature 014 / Feature 005 – Native Java API (EMV/CAP seam)

- Implementation log (2025-11-15): Designated `io.openauth.sim.application.emv.cap.EmvCapEvaluationApplicationService` (with its `EvaluationRequest` / `EvaluationResult` types) as the Native Java API seam for EMV/CAP simulations by updating Feature 005 and Feature 014 specs/tasks and adding `EmvCapNativeJavaApiUsageTest` to exercise a simple Identify-mode evaluation via the Native Java entry point.
- Documentation log (2025-11-15): Authored [docs/2-how-to/use-emv-cap-from-java.md](docs/2-how-to/use-emv-cap-from-java.md) and linked it from [docs/2-how-to/README.md](docs/2-how-to/README.md) so the EMV/CAP Native Java flow appears alongside the HOTP/TOTP/OCRA/FIDO2 guides, keeping terminology aligned with `EmvCapEvaluationApplicationService` and Feature 014’s Native Java API pattern.
- Verification log (2025-11-15): `./gradlew --no-daemon :application:test --tests "*EmvCapNativeJavaApiUsageTest"` (PASS – EMV/CAP Native Java usage test) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the EMV/CAP Native Java documentation and test additions).

### Feature 006 – EUDIW OpenID4VP Simulator (In progress)

- Planning log (2025-11-13): Cleaned up Feature 006 spec/plan/tasks to remove renumbering notes, set their statuses to In progress (instead of Ready for implementation) with updated timestamps, deleted `docs/4-architecture/features/006/legacy/040/`, and aligned the roadmap entry with the In-progress status; documentation-only change.
- Planning log (2025-11-15): Migrated the Feature 006 spec off the Clarifications section by folding the HAIP/baseline scope, UI behaviours, telemetry guidance, and fixture provenance into the Overview/UI/Telemetry/Fixtures sections and standardising FR Source cells to “Spec.” for the UI/fixture requirements; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP protocol reference): Added a “HOTP in one page” summary section near the top of [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) to provide a dense mental model (purpose, shared state, algorithm, policy knobs, and typical uses) ahead of the detailed flow sections; documentation-only change aligned with Feature 010 FR-010-12 for protocol reference pages.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP provisioning flow structure): Updated the “HOTP secret provisioning” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) to add an explicit Sequence list and Policy knobs subsection, keeping the diagram in place while making the provisioning flow easier to follow and tying the text more closely to deployment decisions; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP authentication flow structure): Updated the “HOTP authentication (basic)” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) to add a Sequence list and Policy knobs subsection, making the authentication flow steps explicit, relating them to windowed verification, and clarifying operational decisions around window size, rate limiting, and counter updates; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP resynchronisation and state model): Folded the “Counter resynchronisation window” and “Optional counter state model” content under the HOTP authentication section as a `Resynchronisation and drift` subsection, keeping both diagrams while emphasising that counters do not decrement in normal operation and that manual resync is an administrative, logged action; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP flow-to-code mapping): Reworked the “Simulator implementation pointers” section in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) into a flow-to-code table that groups provisioning, authentication/windowed verification, replay/resynchronisation, and the core HOTP algorithm, mapping each flow to its key types and representative tests so readers can jump directly from diagrams to code; documentation-only change.
  - Documentation log (2025-11-16, Feature 001/010 – HOTP reference ergonomics finish): Completed the remaining learning-ergonomics improvements in [docs/3-reference/protocols/hotp.md](docs/3-reference/protocols/hotp.md) by adding normative and comparison callouts near the top (RFC 4226 precedence and HOTP vs TOTP/OCRA), an audience line, a small worked example in the “HOTP in one page” section, a `What to remember` list for authentication, a `Configuration knobs` section capturing deployment-time decisions, and an updated security section with a focused warning, SHA‑1 context, and consolidated bullets; documentation-only change aligning with Feature 010 FR-010-12 expectations for protocol reference pages.
  - Documentation log (2025-11-16, Feature 002/010 – TOTP protocol ergonomics pass): Restructured [docs/3-reference/protocols/totp.md](docs/3-reference/protocols/totp.md) to mirror the HOTP reference pattern by adding RFC/HOTP callouts, a TOTP audience line, a “TOTP in one page” section (purpose, shared state, algorithm, verifier behaviour, and a small worked example), a uniform Sequence/Policy/What to remember micro-structure for provisioning and authentication, a folded drift/time-step window subsection under authentication with diagrams, a configuration parameters table for deployment-time trade-offs, a refined security section with SHA‑1 context and phishing/relay notes, and a flow-to-code implementation map that ties TOTP flows to `core`/`application` entry points and tests; documentation-only change satisfying Feature 010 FR-010-12 for TOTP.
  - Documentation log (2025-11-16, Feature 003/010 – OCRA protocol ergonomics pass): Reworked [docs/3-reference/protocols/ocra.md](docs/3-reference/protocols/ocra.md) to add an “OCRA in one page” mental model, an explicit HOTP/TOTP relationship note, a simplified OCRA calculation algorithm, parallel Sequence/Policy/Simulator mapping subsections for secret/suite provisioning, challenge–response authentication, and transaction signing, expanded guidance on S canonicalisation and “what you see is what you sign,” a suite design/configuration section with example suites, a refined security section highlighting key risks and deployment choices, and a flow-aligned simulator implementation map; documentation-only change aligning the OCRA reference with Feature 010 FR-010-12 expectations.
- Planning log (2025-11-15b): Prepared the Implementation Drift Gate evidence by adding FR/NFR/Scenario provenance tables with explicit code/test pointers to [docs/4-architecture/features/006/plan.md](docs/4-architecture/features/006/plan.md), teeing up the upcoming `jacocoTestReport` + `spotbugsMain spotbugsTest` reruns.
- Verification log (2025-11-15a): `./gradlew --no-daemon jacocoTestReport` (PASS – coverage snapshot captured for the drift gate package; temporary 0.60 branch floor still in effect until follow-up coverage work restores 0.70).
- Implementation log (2025-11-15b): Completed T-006-29 by refining [docs/2-how-to/use-eudiw-from-java.md](docs/2-how-to/use-eudiw-from-java.md) to reference EUDIW fixture presets (`pid-haip-baseline`, `pid-mdoc`), document the `TrustedAuthorityEvaluator.fromSnapshot(TrustedAuthorityFixtures.loadSnapshot("haip-baseline"))` helper seam, and keep Native Java usage aligned with Feature 006/014 and ADR-0007.
- Verification log (2025-11-15b): `./gradlew --no-daemon :application:test --tests "io.openauth.sim.application.eudi.openid4vp.OpenId4VpNativeJavaApiUsageTest"` (PASS – EUDIW Native Java usage test) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the EUDIW Native Java documentation alignment).

### Feature 014 – Native Java API Facade (Javadoc & CI design)

- Planning log (2025-11-15): Completed Increment I3 design work by updating the Feature 014 spec/plan to standardise on `:core:javadoc` and `:application:javadoc` for documentation, describe a future `:application:nativeJavaApiJavadoc` aggregation task (owned by Feature 010) that publishes a small Native Java API reference under ``docs/3-reference/native-java-api`/`, and clarify that `*-from-java` guides act as runbooks linking back to this reference rather than duplicating full Javadoc content.
- Documentation log (2025-11-15): Created [docs/3-reference/native-java-api/README.md](docs/3-reference/native-java-api/README.md) and updated [docs/3-reference/README.md](docs/3-reference/README.md) to list the Native Java API Javadoc index as a pending artifact, ensuring `docs/3-reference` reflects the planned Javadoc/CI pipeline for Native Java seams.
- Planning log (2025-11-15b): Closed out Feature 014 tasks T-014-01 and T-014-02 by (a) tightening the Native Java API pattern in the Feature 014 spec/plan and explicitly annotating OCRA (Feature 003) as the reference Native Java API in its spec/plan, and (b) confirming that Features 001, 002, 004, 005, and 006 each carry Native Java alignment notes/tasks (HOTP/TOTP/FIDO2/EMV/CAP/EUDIW seams plus their `*-from-java` guides) tied back to Feature 014 and ADR-0007.
- Implementation log (2025-11-15c): Tightened Javadoc on the Native Java DTO records for TOTP (`TotpEvaluationApplicationService.EvaluationCommand` variants and `EvaluationResult`), WebAuthn (`WebAuthnEvaluationApplicationService.EvaluationCommand` variants and `EvaluationResult`), EMV/CAP (`EmvCapEvaluationApplicationService.EvaluationRequest` context via class/record docs), and EUDIW (`OpenId4VpWalletSimulationService.SimulateRequest`/`InlineSdJwt`, `OpenId4VpValidationService.ValidateRequest`/`InlineVpToken`/`StoredPresentation`) so that each seam’s request/response types clearly reference their governing feature FRs and Feature 014/ADR-0007 without altering behaviour.
- Implementation log (2025-11-15d): Started wiring a Native Java Javadoc aggregation task by adding `:application:nativeJavaApiJavadoc` in [application/build.gradle.kts](application/build.gradle.kts) and documenting it under Feature 010/014; the task is currently defined but blocked at configuration time because the application project does not expose the `JavaPluginExtension` directly, so future build-logic work is required before operators can run it successfully.
- Implementation log (2025-11-15e): Reworked `:application:nativeJavaApiJavadoc` in [application/build.gradle.kts](application/build.gradle.kts) into a lifecycle aggregation task that depends on `:core:javadoc` and `:application:javadoc`, removing the direct `JavaPluginExtension` lookup so the Native Java Javadoc pipeline can be invoked without configuration failures.
- Verification log (2025-11-15c): `./gradlew --no-daemon :application:nativeJavaApiJavadoc` (PASS – runs `:core:javadoc` and `:application:javadoc`, generating module Javadoc under `core/build/docs/javadoc` and `application/build/docs/javadoc` for Native Java API seams) and `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after wiring the aggregation task and updating the Native Java reference docs).
- Implementation log (2025-11-15f): Extended the root Gradle `check` lifecycle in [build.gradle.kts](build.gradle.kts) to depend on `:application:nativeJavaApiJavadoc` alongside `architectureTest` and `jacocoCoverageVerification`, so pre-commit and quality gate flows now run Javadoc for `core` and `application` and catch Native Java API documentation issues by default.
- Verification log (2025-11-15d): `./gradlew --no-daemon spotlessApply check` (PASS – configuration cache warmed, `:core:javadoc` and `:application:javadoc` executed via `:application:nativeJavaApiJavadoc` as part of `check`, all tests and quality tasks green after extending the Javadoc guardrail).
- Decision log (2025-11-15): Recorded ADR-0008 ([docs/6-decisions/ADR-0008-native-java-javadoc-ci-strategy.md](docs/6-decisions/ADR-0008-native-java-javadoc-ci-strategy.md)) to document that we will not add a dedicated GitHub Actions workflow solely for Native Java Javadoc generation/publishing; instead, `:application:nativeJavaApiJavadoc` is enforced via `check`/`qualityGate`, and future Maven publishing will provide `-javadoc.jar` without requiring a GitHub-hosted HTML site.
- Drift Gate log (2025-11-15): Completed the Feature 014 Implementation Drift Gate for Native Java + Javadoc by cross-checking seams (`HotpEvaluationApplicationService`, `TotpEvaluationApplicationService`, `WebAuthnEvaluationApplicationService`, `EmvCapEvaluationApplicationService`, `OpenId4VpWalletSimulationService`, `OpenId4VpValidationService`), their usage tests (`*NativeJavaApiUsageTest`), and ``docs/2-how-to`/*-from-java.md` guides against the Feature 014 spec/plan; verified that `:application:nativeJavaApiJavadoc` is wired into `check`/`qualityGate` and that no high- or medium-impact drift remains, with findings recorded in the plan’s Implementation Drift Gate section and tasks verification log.
- Status log (2025-11-15): Marked Feature 014 – Native Java API Facade as Complete by updating its spec/plan/tasks statuses and the roadmap entry, after confirming FR-014-01..04 and NFR-014-01..03 are satisfied, the Native Java seams and `*-from-java` guides are in place for HOTP/TOTP/OCRA/FIDO2/EMV/EUDIW, and the Implementation Drift Gate shows no unresolved high/medium-impact drift.

### Feature 013 – Toolchain & Quality Platform (In review)

- Implementation log (2025-11-15): Converted the EMV trace fixture sync automation into typed Gradle tasks (`VerifyEmvTraceProvenanceFixture`, `SyncEmvTraceProvenanceFixture`) so configuration cache runs stay clean, wired the verify task into every `Test` instance plus the `check` lifecycle, and exposed both helpers to operators via [rest-api/build.gradle.kts](rest-api/build.gradle.kts).
- Verification log (2025-11-15a): `./gradlew --no-daemon :rest-api:verifyEmvTraceProvenanceFixture` (PASS – fixture parity confirmed, configuration cache stored).
- Verification log (2025-11-15b): `./gradlew --no-daemon :rest-api:syncEmvTraceProvenanceFixture` (PASS – canonical docs fixture copied into ``rest-api/docs`/` with logged paths).
- Verification log (2025-11-15c): `./gradlew --no-daemon :rest-api:test` (PASS – verify task executed automatically before the suite; reran with a 420 s timeout to cover Selenium + OpenAPI tests).
- Verification log (2025-11-15d): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after the build-logic change).
- Verification log (2025-11-15e): `./gradlew --no-daemon spotlessApply check` (PASS – pre-commit sweep ensuring the full workspace stays green before staging/commit prep).
- Status check (2025-11-15): Plan increments I0–I7 plus the documentation/telemetry sweep remain ✅; Implementation Drift Gate is still pending because T-006-23 (live Trusted Authority ingestion) is open in the tasks file with its Gradle/Node/Selenium verification commands queued behind owner-provided ETSI TL/OpenID Federation datasets.
- Planning log (2025-11-15): Added Increment I8 to `plan.md` detailing the Option A approach—download/verify the EU LOTL, hydrate Member-State TL snapshots, capture provenance metadata, and rerun the `:core`, `:application`, `:rest-api`, Node, and Selenium suites plus telemetry documentation as part of T-006-23.
- Clarification resolved (2025-11-15): [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) entry removed after confirming we will pull the real EU LOTL + Member-State TL datasets ourselves and record ingestion provenance inside the plan/tasks + telemetry notes.
- Ingestion log (2025-11-15): Downloaded EU LOTL sequence 373 (`eu-lotl.xml`) plus Germany (`TL-DE.xml`, seq 149) and Slovenia (`SI_TL.xml`, seq 78) Trusted Lists, stored raw XML and metadata hashes/timestamps under ``docs/trust/snapshots/2025-11-15`/` per Increment I8.
- Implementation log (2025-11-15): Finished T-006-23 by expanding Fixture dataset provenance metadata, adding the `pid-haip-lotl` conformance preset + copied SD-JWT assets, refreshing `trust/snapshots/haip-baseline.json`/DCQL presets/docs, updating REST/CLI/operator guides + telemetry snapshot, wiring `/presentations/seed` through `OpenId4VpFixtureIngestionService`, and regenerating the REST OpenAPI snapshot.
- Verification log (2025-11-15): `./gradlew --no-daemon :core:test --tests "*FixtureDatasets*"`, `./gradlew --no-daemon :application:test --tests "*OpenId4VpFixtureIngestionServiceTest*"`, `./gradlew --no-daemon :rest-api:test --tests "*Oid4vpRestContractTest*"`, `node --test [rest-api/src/test/javascript/eudi/openid4vp/console.test.js](rest-api/src/test/javascript/eudi/openid4vp/console.test.js)`, `OPENAUTH_SIM_PERSISTENCE_DATABASE_PATH=build/tmp/test-credentials.db ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EudiwOperatorUiSeleniumTest"`, `OPENAPI_SNAPSHOT_WRITE=true ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.OpenApiSnapshotTest"`, and the full `./gradlew --no-daemon spotlessApply check` sweep (note: initial run hit the OpenAPI snapshot gate before the subsequent success).

### Workstream – Documentation & DeepWiki steering

- Planning log (2025-11-15): User requested a [.devin/wiki.json](.devin/wiki.json) configuration to steer DeepWiki for `ivanstambuk/openauth-sim` based on the Devin DeepWiki docs; recorded an open question under Feature 010 to decide between repo-notes-only, mirrored autogenerated pages, or a feature/architecture-centric page set before updating the spec/plan/tasks and adding the config file.
- Implementation log (2025-11-15): Created [.devin/wiki.json](.devin/wiki.json) with an explicit 25-page outline covering Overview, System Architecture, Protocol Implementations (HOTP/TOTP/OCRA/EMV/CAP/FIDO2/EUDIW OpenID4VP), Shared Infrastructure, User Interfaces, Build System & Dependencies, Quality Automation & Governance, Testing Strategy, Development Workflow, CI/CD, and Development Guidelines, plus a global repo note targeting senior IAM/security engineers; wired DeepWiki steering into Feature 010 spec/plan as the governing knowledge-automation config and refreshed [docs/4-architecture/knowledge-map.md](docs/4-architecture/knowledge-map.md) to reference [.devin/wiki.json](.devin/wiki.json) ownership.
- Verification log (2025-11-15): `./gradlew --no-daemon spotlessApply check` (PASS – verification run after adding [.devin/wiki.json](.devin/wiki.json) and updating Feature 010 spec/plan/knowledge map for DeepWiki integration).
 - Implementation log (2025-11-15b): Refined the `Overview` page definition in [.devin/wiki.json](.devin/wiki.json) so the DeepWiki landing page starts with a clear 'Purpose and Scope' section, followed by a short system architecture overview, and only then introduces telemetry/fixtures/quality automation as cross-cutting attributes rather than leading content.
 - Verification log (2025-11-15b): `./gradlew --no-daemon spotlessApply check` (PASS – follow-up verification run after refining the DeepWiki Overview steering in [.devin/wiki.json](.devin/wiki.json)).
 - Implementation log (2025-11-15c): Updated [README.md](README.md) and [docs/2-how-to/README.md](docs/2-how-to/README.md) to describe all four consumption surfaces explicitly (Native Java API, REST API, operator console UI, CLI), and regrouped how-to guides so the Native Java API usage is called out alongside REST/UI/CLI flows.
 - Implementation log (2025-11-15d): Extended [.devin/wiki.json](.devin/wiki.json) to treat the Native Java API as a first-class programmatic facade by updating repo notes to list all four surfaces (Native Java, CLI, REST, UI) and adding a dedicated \"Native Java API\" page under the User Interfaces section that cross-links to [docs/2-how-to/use-ocra-from-java.md](docs/2-how-to/use-ocra-from-java.md) and future *-from-java guides.
 - Planning log (2025-11-15e): Added an open question under Feature 010 plus follow-up/backlog notes in `plan.md`/`tasks.md` proposing a future Feature 014 – Native Java API Facade to specify cross-protocol Java entry points, Javadoc surfaces, and `*-from-java` guides so programmatic usage becomes a governed facade alongside CLI/REST/UI.
 - Decision log (2025-11-15): Resolved the Native Java API governance question by accepting ADR-0007 (Native Java API Facade Strategy), which adopts per-protocol Native Java APIs governed by cross-cutting rules (future Feature 014) instead of a single monolithic Java SDK; removed the corresponding open-questions entries after recording this outcome in the ADR and Feature 010 plan/tasks.
 - Planning log (2025-11-15f): Scaffolded Feature 014 (``docs/4-architecture/features/014`/{spec,plan,tasks}.md`) as a cross-cutting Native Java API facade spec referencing ADR-0007, defined the per-protocol pattern, updated the roadmap to add Feature 014 as a placeholder, and seeded backlog items in Features 001, 002, 004, 005, and 006 plans to mirror OCRA's Native Java API over time.
 - Implementation log (2025-11-15g): Extended Feature 010 spec/plan for FR-010-11 and authored [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) plus the [docs/3-reference/README.md](docs/3-reference/README.md) entry so operators can see, per protocol/facade/flow/credential source, which major external dependencies (MapDB/Caffeine, Spring Boot/Thymeleaf/Springdoc, Picocli, test-only Node/Selenium) are exercised and where inline flows avoid hitting MapDB altogether.
- Verification log (2025-11-15g): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after adding the external-dependency matrix reference and updating Feature 010 spec/plan).
- Documentation log (2025-11-15h): Refined [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) to express all external dependencies as explicit Maven coordinates per facade/flow/credential source, removed cross-references such as “same as Evaluate/Inline” and “via REST API calls”, and formatted multi-dependency cells with one coordinate per line using `<br>` for readability.
- Verification log (2025-11-15h): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after the external-dependency reference refinements).
- Documentation log (2025-11-15i): Trimmed the TOTP section in [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) by removing the descriptive “TOTP mirrors HOTP’s dependency split; it reuses the same facades and persistence stack.” line so the reference stays purely tabular and focused on explicit facade/flow/credential-source dependency matrices.
- Verification log (2025-11-15i): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after the TOTP section copy tweak).
- Documentation log (2025-11-15j): Restructured the top of [docs/3-reference/external-dependencies-by-facade-and-scenario.md](docs/3-reference/external-dependencies-by-facade-and-scenario.md) so the table of contents sits immediately after the metadata block and the descriptive introduction (including the dependency category bullets and MapDB/Caffeine note) lives under a dedicated `## Overview` section.
- Verification log (2025-11-15j): `./gradlew --no-daemon spotlessApply check` (PASS – documentation-only verification run after the external-dependencies overview/Table-of-Contents restructuring).

### Workstream – AI-ready docs and LLM surfaces (Feature 010/011/014)

- Planning log (2025-11-16): User selected Option B (LLM/assistant-facing documentation surfaces now, with Option C agent/MCP integration later). Updated Feature 010 spec/plan/tasks to add FR-010-13 and T-010-06 for [ReadMe.LLM](ReadMe.LLM)/[llms.txt](llms.txt) and cross-links, and extended Feature 011 plan/tasks with T-011-01 so [AGENTS.md](AGENTS.md) remains the canonical governance/onboarding surface for human contributors and AI agents.
- Implementation log (2025-11-16): Added [ReadMe.LLM](ReadMe.LLM) (LLM-oriented overview of HOTP/TOTP/OCRA/EMV-CAP/FIDO2/EUDIW, canonical Native Java entry points, and minimal examples), introduced [llms.txt](llms.txt) as the manifest of high-signal specs/docs for context windows, hardened [AGENTS.md](AGENTS.md) with an agent-facing repo map and module/API guidance, updated [README.md](README.md) with protocol-aware \"What is this?\" and \"Quickstart by surface\" sections plus AI-assistant pointers, and refreshed [docs/2-how-to/README.md](docs/2-how-to/README.md) to direct assistants to [ReadMe.LLM](ReadMe.LLM)/[llms.txt](llms.txt).
- Verification log (2025-11-16): `./gradlew --no-daemon spotlessApply check` (PASS – 22 s, 99 tasks: 6 executed, 93 up-to-date after introducing [ReadMe.LLM](ReadMe.LLM), [llms.txt](llms.txt), README/AGENTS/how-to cross-links, and Feature 010/011 task updates).
- Planning log (2025-11-16b): Parked Maven-publication work for a future increment by adding T-010-07 under Feature 010 tasks and a corresponding backlog note in the Feature 010 plan; once Maven coordinates (groupId/artifactId/version) are decided, that task will update README/ReadMe.LLM/how-to guides with dependency snippets and enrich POM metadata (name/description/url/licenses/scm/developers) for better AI discovery and consumption, without changing any publishing behaviour today.

### Workstream – Toolchain & MCP automation (Feature 013)

- Planning log (2025-11-16 – process correction): Removed the option inventory from the Feature 013 plan, added open question Q013-01 to [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md), and rewrote T-013-02 so it references the open decision instead of embedding recommendations. Further MCP design work will resume only after the user answers Q013-01.
- Process update (2025-11-16): Clarified [AGENTS.md](AGENTS.md) to require storing every option breakdown inside [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md), introduced a "Question Details" section in that file (with the full Q013-01 write-up), and kept Feature 013 plan/tasks referencing the question ID only.
- Process update (2025-11-16b): Strengthened the rule so agents must log or update the open question before discussing options—AGENTS.md now mandates recording the ambiguity in [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) first, and the guardrail in that file reiterates the same workflow.
- Decision log (2025-11-16c): User approved Option A (REST-backed MCP proxy) for T-013-02; updated Feature 013 plan with the `tools/mcp-server` design summary, refreshed T-013-02 intent to match, and removed Q013-01 from `open-questions.md`.
- Design log (2025-11-16d): Executed T-013-02 by documenting the MCP proxy design (module layout, tool catalog, configuration, telemetry, security, quality hooks) inside the Feature 013 plan and marking the task complete.
- Planning log (2025-11-16e): Scheduled T-013-04 to implement the `tools/mcp-server` module, wire its Spotless/test tasks into `qualityGate`, and update README/AGENTS with MCP run instructions.
- Implementation log (2025-11-16f): Completed T-013-04 – added the `tools-mcp-server` Gradle module, Content-Length MCP server implementation, config loader, tool registry/tests, README/AGENTS updates, and verified the new module through `spotlessApply` + `qualityGate`.
- Process update (2025-11-16g): Strengthened [AGENTS.md](AGENTS.md) with an explicit “No-direct-question” rule so every clarification must be logged in [docs/4-architecture/open-questions.md](docs/4-architecture/open-questions.md) (table row + Question Details) before discussing it in chat; reinforces the guardrail already noted in `open-questions.md`.
- Process update (2025-11-16h): Updated [AGENTS.md](AGENTS.md) and `open-questions.md` so agents must restate the captured options inline when asking the user for input—no more “please open the file” references; every chat reply now includes the question summary + options directly.
- Process update (2025-11-16i): Added a constitution clause + [AGENTS.md](AGENTS.md) note requiring options to be sorted by preference (Option A is always the recommendation, followed by lower-ranked alternatives) whenever recording or presenting open-question choices.
- Process update (2025-11-16j): `open-questions.md` now enforces the preferred-order rule inline—Option A must be explicitly annotated as “(Recommended)”, with subsequent options listed in descending preference so decisions are obvious without opening other files.
- Decision log (2025-11-16k): Resolved Q013-02 by selecting Option A (Gradle-backed metadata generator). Feature 013 plan/tasks now lock T-013-03 to emit both inline snippets and a hosted JSON-LD bundle so discoverability metadata stays in sync across surfaces; `open-questions.md` cleared.
- Implementation log (2025-11-16l): Completed T-013-03 by adding [docs/3-reference/json-ld/metadata.json](docs/3-reference/json-ld/metadata.json), wiring `GenerateJsonLdTask` into [build.gradle.kts](build.gradle.kts), documenting the workflow (README + session quick reference), and committing the generated snippets under ``docs/3-reference/json-ld/snippets`/`. Commands: `./gradlew --no-daemon generateJsonLd`, `./gradlew --no-daemon spotlessApply check`.
- Decision log (2025-11-16m): Resolved Q013-03 (Option A structured MCP runbook) and Q013-04 (Option A integrate `generateJsonLd` into `check`/`qualityGate`); new tasks T-013-05/T-013-06 track the follow-up implementation.
- Implementation log (2025-11-16n): Executed T-013-05 by running the REST facade (`./gradlew --no-daemon --init-script [tools/run-rest-api.init.gradle.kts](tools/run-rest-api.init.gradle.kts) runRestApi`), installing the MCP binary (`./gradlew --no-daemon :tools-mcp-server:installDist`), and driving the proxy via a Python harness (Content-Length frames + minified JSON). Captured per-tool transcripts in [build/mcp-feedback.json](build/mcp-feedback.json) and summarized fixtures coverage, HOTP success, TOTP `otp_out_of_window` validation, OCRA inline success, EMV/FIDO2/EUDIW parity, and the empty OCRA fixtures list inside the Feature 013 plan/tasks.
- Planning log (2025-11-16l): Expanded the Feature 013 plan with the JSON-LD/Schema.org generator outline (inputs, Gradle task design, workflow, telemetry scope) so T-013-03 can proceed without new clarifications; tasks checklist now calls out the generator intent and verification commands.
- Implementation log (2025-11-16o): Completed T-013-07 – introduced `TotpCurrentOtpHelperService`, `/api/v1/totp/helper/current`, README/AGENTS/MCP docs, OpenAPI snapshot refresh, [build/mcp-feedback.json](build/mcp-feedback.json) transcript entry, and the `totp.helper.currentOtp` tool in the MCP registry; telemetry now emits under `totp.helper.lookup`.

## Next suggested actions

> Keep this section synced as workstreams progress. When an item is completed, update it to point at the next actionable task for that workstream (or remove the subsection if the stream is idle).



### Workstream – EUDIW OpenID4VP simulator

- Next suggested action: Prep the Implementation Drift Gate now that T-006-23 is ✅—capture the provenance evidence table, refresh `jacocoTestReport`/`spotbugsMain spotbugsTest`, and decide which backlog item to pull next (T-006-24 same-device/DC-API exploration or T-006-25 issuance alignment) once the gate closes.

### Workstream – Documentation & DeepWiki steering

- Next suggested action: Monitor how DeepWiki renders the wiki from [.devin/wiki.json](.devin/wiki.json) and, if needed, iterate on repo/page notes in a future Feature 010 increment to keep the page outline aligned with new features, protocols, or governance docs.

### Workstream – Toolchain & MCP automation

- Implementation log (2025-11-16): Completed T-013-06 (generateJsonLd guard) and T-013-07 (TOTP helper endpoint + MCP tool) with README/AGENTS/OpenAPI/MCP transcript updates; telemetry now emits under `totp.helper.lookup`. Commands: `./gradlew --no-daemon generateJsonLd check`, `./gradlew --no-daemon qualityGate`.
- Planning log (2025-11-16): Created Feature 015 (MCP Agent Facade) spec/plan/tasks, added the roadmap entry, and documented MCP as an official facade to host agent-first capabilities.
- Next suggested action: Review the MCP backlog (Option B – seed OCRA fixtures, helper ergonomics) using the updated [build/mcp-feedback.json](build/mcp-feedback.json) to decide which follow-up to prioritize before expanding the tool catalog again.

## Completed Clarifications governance batch (historical summary)

- Planning log (2025-11-15): Logged and resolved a Clarifications scope question (Option A selected for completing A1/A2/T1/T2, leaving ADR work optional) and reflected the outcome in [AGENTS.md](AGENTS.md), the templates, and the open-questions log; documentation-only updates.
- Historical note: Detailed verification logs for the Clarifications governance batch (Features 001–004 and 009–013, plus docs/runbook/AGENTS updates) have been pruned from this snapshot for readability. Consult git history and the per-feature specs/plans/tasks for the full drift-gate and verification record.

### Feature 010 / Feature 014 – Native Java API from JMeter/Neoload

- Documentation log (2025-11-15): Added per-protocol how-to guides for consuming the Native Java facade from JMeter (Groovy JSR223 samplers) and Neoload scripts: [docs/2-how-to/use-hotp-from-jmeter.md](docs/2-how-to/use-hotp-from-jmeter.md), `use-hotp-from-neoload.md`, `use-totp-from-jmeter.md`, `use-totp-from-neoload.md`, `use-ocra-from-jmeter.md`, `use-ocra-from-neoload.md`, `use-fido2-from-jmeter.md`, `use-fido2-from-neoload.md`, `use-emv-cap-from-jmeter.md`, `use-emv-cap-from-neoload.md`, `use-eudiw-from-jmeter.md`, and `use-eudiw-from-neoload.md`. Updated Feature 010 and Feature 014 specs to document per-protocol JMeter/Neoload coverage, and extended [docs/2-how-to/README.md](docs/2-how-to/README.md) to link these guides under “Native Java API from JMeter/Neoload”.
- Documentation log (2025-11-15b): Refined all JMeter how-to guides (`use-hotp-from-jmeter.md`, `use-totp-from-jmeter.md`, `use-ocra-from-jmeter.md`, `use-fido2-from-jmeter.md`, `use-emv-cap-from-jmeter.md`, `use-eudiw-from-jmeter.md`) so each example is self-contained (no external helper classes) and uses inline or in-memory-backed Native Java flows purely for calculation/evaluation (no replay semantics). For HOTP, TOTP, and WebAuthn, added explicit stored-credential JSR223 snippets alongside inline flows; for WebAuthn specifically, switched the JMeter examples from the verification seam (`WebAuthnEvaluationApplicationService`) to the assertion generation seam (`WebAuthnAssertionGenerationApplicationService`) so Evaluate always means “generate assertion” consistently with the operator UI; for EUDIW, restricted the JMeter guide to wallet simulation only (no validation script), to match the “calculation-only” requirement.
- Documentation log (2025-11-15b): Refined all JMeter how-to guides (`use-hotp-from-jmeter.md`, `use-totp-from-jmeter.md`, `use-ocra-from-jmeter.md`, `use-fido2-from-jmeter.md`, `use-emv-cap-from-jmeter.md`, `use-eudiw-from-jmeter.md`) so each example is self-contained (no external helper classes) and uses inline or in-memory-backed Native Java flows purely for calculation/evaluation (no replay semantics). For HOTP, TOTP, and WebAuthn, added explicit stored-credential JSR223 snippets alongside inline flows; for WebAuthn specifically, switched the JMeter examples from the verification seam (`WebAuthnEvaluationApplicationService`) to the assertion generation seam (`WebAuthnAssertionGenerationApplicationService`) so Evaluate always means “generate assertion” consistently with the operator UI; for OCRA and EMV/CAP, added explicit “stored descriptor/preset” sections alongside inline examples; for EUDIW, added separate stored-preset vs inline SD-JWT wallet simulation snippets and kept the guide limited to wallet simulation (no validation script), to match the “calculation-only” requirement.
- Verification log (2025-11-15b): `./gradlew --no-daemon spotlessApply check` (PASS – workspace-wide formatter + verification sweep after converting all JMeter how-to snippets to self-contained JSR223 Groovy scripts, adding stored-credential/examples for HOTP/TOTP/WebAuthn/OCRA/EMV/CAP/EUDIW, aligning WebAuthn with the generation seam, and trimming the EUDIW validation example, and updating the session log entry).
## Hook guard 2025-11-16T15:05:23+01:00

\`git config core.hooksPath\`:
githooks

Gradle: ./gradlew --no-daemon spotlessApply check (BUILD SUCCESSFUL)
JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
codex-commit-review.sh: failed (exit 141); using manual Conventional Commit message.
