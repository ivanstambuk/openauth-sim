# Current Session Snapshot

> Keep this file up to date across all active chats. Treat it as the single source of truth for in-progress workstreams so every hand-off is instant. Replace the bracketed text and prune sections you do not need.

- Date: 2025-11-12
- Primary branch: `main`
- Other active branches: none
- Hooks path verification (2025-11-12 – session reset): Ran `git config core.hooksPath` → `githooks`; governance hook guard satisfied per Feature 011 requirements.
- Hook guard spot-check (2025-11-12 – Codex session): Re-ran `git config core.hooksPath` → `githooks`; no changes required before staging the template remediation docs.
- Clarification resolved (2025-11-12 – template audit): User confirmed the audit must target plan documents only, so comparison with `docs/templates/feature-plan-template.md` will ignore the specs.
- Plan remediation scaffold (2025-11-12 – current session): Authored `docs/plan_deviation_plan.md` with step-by-step instructions and checklist rows for Features 005–013 so follow-on agents can normalize every plan header; documentation-only change, verification pending actual edits.
- Plan baseline snapshot (2025-11-12 – current session): Added `scripts/check_plan_headers.py` and captured the baseline output via `scripts/check_plan_headers.py` (see above JSON summary) to anchor the remediation checklist.
- Spec deviation audit (2025-11-12 – user request): Compared every feature spec against `docs/templates/feature-spec-template.md` using short Python helpers (`python - <<'PY' ...`) and captured the mismatches in `spec_deviations.md`; documentation-only run so no Gradle commands were needed.
- Plan remediation Step 1 (2025-11-12 – done): Normalized Feature 005 plan headers per `docs/plan_deviation_plan.md` (metadata block, Increment Map restructure, historical appendix, Follow-ups rename) and verified via `scripts/check_plan_headers.py`.
- Plan remediation Step 2 (2025-11-12 – done): Updated Feature 006 plan headers (renamed drift/analysis gates, folded tooling list into follow-ups) and re-ran `scripts/check_plan_headers.py` to confirm compliance.
- Plan remediation Step 3 (2025-11-12 – done): Rebuilt Feature 007 placeholder plan to match the template (metadata, scope/dependencies, new follow-ups) and confirmed via `scripts/check_plan_headers.py`.
- Plan remediation Step 4 (2025-11-12 – done): Filled in Feature 008 plan gaps (scope split, drift/analysis/exit/follow-ups) and rechecked via `scripts/check_plan_headers.py`.
- Plan remediation Step 5 (2025-11-12 – done): Converted Feature 009 plan to template order (metadata, scope/dependencies, increment list) and moved legacy parity notes under Follow-ups; validated with `scripts/check_plan_headers.py`.
- Plan remediation Step 6 (2025-11-12 – done): Normalized Feature 010 plan headers (metadata, scope/dependencies, increment map, legacy tracker -> follow-ups) and verified via `scripts/check_plan_headers.py`.
- Plan remediation Step 7 (2025-11-12 – done): Restructured Feature 011 plan (template headers, increment list, legacy tracker appendix) and validated with `scripts/check_plan_headers.py`.
- Plan remediation Step 8 (2025-11-12 – in progress): Updating Feature 012 plan headers and relocating legacy persistence trackers per `docs/plan_deviation_plan.md`.
- Plan remediation Step 8 (2025-11-12 – done): Updated Feature 012 plan (template headers, implementation gate ordering, increment list, legacy tracker appendix) and reconfirmed with `scripts/check_plan_headers.py`.
- Plan remediation Step 9 (2025-11-12 – in progress): Aligning Feature 013 plan headers and moving toolchain legacy trackers into the follow-ups appendix.
- Plan remediation Step 9 (2025-11-12 – done): Updated Feature 013 plan (template headers, implementation gate order, increment list, legacy tracker appendix) and confirmed with `scripts/check_plan_headers.py`.
- Plan remediation Step 7 (2025-11-12 – in progress): Aligning Feature 011 plan with the template (header renames, increment list, quality commands relocation).
- Spec template compliance review (2025-11-12 – current session): Re-running the template comparison for Features 001–013, focusing on missing/extra headers and numbering drift; only read-only shell/Python helpers so far (no Gradle commands yet).
- Spec deviation remediation plan (2025-11-12 – current session): Authored `docs/spec_deviation_plan.md` to capture step-by-step fixes for Features 005–013; documentation-only edit, no Gradle verification required yet.
- Spec deviations log refresh (2025-11-12 – current session): Recreated `docs/spec_deviations.md` with per-feature remediation notes (005–013) and re-read the feature-spec template to anchor the upcoming fixes.
- Task template compliance audit (2025-11-12 – current session): Ran targeted Python helpers (`python - <<'PY' ...`) to diff `docs/4-architecture/features/*/tasks.md` against `docs/templates/feature-tasks-template.md`, capturing missing/extra headers, metadata drift, and ID mismatches for reporting (read-only analysis; no Gradle commands).
- Task remediation plan (2025-11-12 – current session): Authored `docs/task_deviation_plan.md` with prerequisites, tooling snippet, and six incremental steps so future agents can normalize every tasks.md file; documentation-only change, no Gradle commands executed yet.
- Task template remediation Step 0 (2025-11-12 – current session): Ran `git status -sb` (see CLI output) and executed the plan’s Python helper to capture baseline deviations — output logged here for traceability: Feature 001–004/007–013 “guidance blockquote missing”; Feature 005 “guidance blockquote missing, task IDs not aligned”; Feature 006 “guidance blockquote missing, task IDs not aligned.”
- Task template remediation Step 1 (2025-11-12 – current session): Converted Feature 005/007/008 metadata tables to the italic `_Status:`/`_Last updated:_` format, inserted the canonical two-line guidance quote into Features 001–013, and noted linked plans/renumbering notes where needed so every tasks.md now shares the same intro structure.
- Task template remediation Step 2 (2025-11-12 – current session): Renamed Feature 005’s “Completed Foundation” heading to `## Checklist`, retitled Features 007–008 “Notes” sections to `## Notes / TODOs`, and folded each “Legacy Coverage Checklist” into the `## Notes / TODOs` section (Features 009–013) so only template-approved headers remain while preserving the legacy details inline.
- Task template remediation Step 3 (2025-11-12 – current session): Used small Python helpers to renumber Feature 005 task IDs from `T393x` → `T-005-01..67` and mass-replaced Feature 006 `T-040-xx` IDs with `T-006-xx`, then verified the result via `rg -n "T393"` and `rg -n "T-040"` (no matches).
- Task template remediation Step 4 (2025-11-12 – current session): Relocated Feature 005/006 renumbering notes directly above their `## Checklist` sections and recast each legacy coverage block (Features 009–013) as bullets under `## Notes / TODOs`, preserving intent/verification context without extra headers.
- Task template remediation Step 5 (2025-11-12 – current session): Re-ran the Python helper (no findings) and executed `./gradlew --no-daemon spotlessApply check` (20 s, 96 actionable tasks: 2 executed, 92 up-to-date) to confirm the Markdown edits pass the managed formatter/tests.
- Feature 005 template alignment (2025-11-12 – current session): Renamed requirement/scenario/interface IDs to the 005 prefix, flattened non-template headings, restored the scenario table header, and reran `./gradlew --no-daemon spotlessApply check` (27 s, 96 tasks: 5 executed, 91 up-to-date).
- Feature 006 template alignment (2025-11-12 – current session): Renumbered IDs to the 006 prefix, collapsed Success/Validation/Failure headings + CLI sub-headings into prose, restored the Branch & Scenario table header, and reran `./gradlew --no-daemon spotlessApply check` (14 s, 96 tasks: 2 executed, 94 up-to-date).
- Feature 007 interface ordering fix (2025-11-12 – current session): Moved the Interface & Contract Catalogue ahead of Telemetry, preserving Template order, and reran `./gradlew --no-daemon spotlessApply check` (12 s, 96 tasks: 2 executed, 94 up-to-date).
- Feature 008 interface ordering fix (2025-11-12 – current session): Repositioned the wallet Interface & Contract section before Telemetry & Observability and reran `./gradlew --no-daemon spotlessApply check` (13 s, 96 tasks: 2 executed, 94 up-to-date).
- Feature 010 template tables (2025-11-12 – current session): Converted the API Routes and Telemetry subsections to explicit tables (with `API-010-NA` / `TE-010-NA` rows) and reran `./gradlew --no-daemon spotlessApply check` (13 s, 96 tasks: 2 executed, 94 up-to-date).
- Feature 011 UI mock-ups (2025-11-12 – current session): Added ASCII mock-ups for the governance runbook and analysis-gate checklist states plus `./gradlew --no-daemon spotlessApply check` (12 s, 96 tasks: 2 executed, 94 up-to-date).
- Feature 012 UI mock-ups (2025-11-12 – current session): Added ASCII mock-ups for the persistence profile selector and maintenance helper logs; verification via `./gradlew --no-daemon spotlessApply check` (15 s, 96 tasks: 2 executed, 94 up-to-date).
- Feature 013 UI mock-ups (2025-11-12 – current session): Documented ASCII mock-ups for the toolchain dashboard and Gradle wrapper upgrade modal; verification via `./gradlew --no-daemon spotlessApply check` (13 s, 96 tasks: 2 executed, 94 up-to-date).
- Spec deviation plan closeout (2025-11-12 – current session): `spec_deviations.md` now lists all items as resolved with a final timestamp, and `docs/spec_deviation_plan.md` includes the completion log for Steps 1–10 (no roadmap/knowledge-map deltas required).
- Verification (2025-11-12 – Feature 003 spec alignment): `./gradlew --no-daemon spotlessApply check` succeeded in 19 s (96 actionable tasks: 4 executed, 92 up-to-date) after restoring the missing template sections.
- Verification (2025-11-12 – spec deviation log refresh): `./gradlew --no-daemon spotlessApply check` succeeded in 23 s (96 actionable tasks: 5 executed, 91 up-to-date) after updating `spec_deviations.md` to reflect the Feature 003 fixes.
- Verification (2025-11-12 – Feature 005 spec alignment): `./gradlew --no-daemon spotlessApply check` succeeded in 23 s (96 actionable tasks: 2 executed, 94 up-to-date) after restoring the FR/NFR tables and section order.
- Verification (2025-11-12 – docs sync after Feature 005 row update): `./gradlew --no-daemon spotlessApply check` succeeded in 21 s (96 actionable tasks: 5 executed, 91 up-to-date) following the `spec_deviations.md` refresh.
- Verification (2025-11-12 – Feature 006 spec alignment + deviation log): `./gradlew --no-daemon spotlessApply check` succeeded in 21 s (96 actionable tasks: 5 executed, 91 up-to-date) after restructuring the Feature 006 spec and updating `spec_deviations.md`.
- Verification (2025-11-12 – Feature 007 spec alignment + deviation log): `./gradlew --no-daemon spotlessApply check` succeeded in 9 s (96 actionable tasks: 2 executed, 94 up-to-date) after adding the missing UI/mock-up + interface sections and refreshing `spec_deviations.md`.
- Verification (2025-11-12 – Feature 008 spec alignment + deviation log): `./gradlew --no-daemon spotlessApply check` succeeded in 20 s (96 actionable tasks: 5 executed, 91 up-to-date) after populating the placeholder UI/mock-up, interface tables, and Spec DSL section.
- Verification (2025-11-12 – Feature 009 UI mock-up addition): `./gradlew --no-daemon spotlessApply check` succeeded in 23 s (96 actionable tasks: 5 executed, 91 up-to-date) after inserting the required UI / Interaction Mock-ups section.
- Verification (2025-11-12 – Feature 011 governance spec update): `./gradlew --no-daemon spotlessApply check` succeeded in 23 s (96 actionable tasks: 5 executed, 91 up-to-date) after adding the telemetry/interface fixtures sections for Feature 011.
- Verification (2025-11-12 – Feature 012 interface/telemetry updates): `./gradlew --no-daemon spotlessApply check` succeeded in 21 s (96 actionable tasks: 5 executed, 91 up-to-date) after expanding Feature 012’s API/telemetry tables, Telemetry & Observability section, and fixtures summary.
- Verification (2025-11-12 – Feature 013 interface/telemetry updates): `./gradlew --no-daemon spotlessApply check` succeeded in 23 s (96 actionable tasks: 5 executed, 91 up-to-date) after revamping Feature 013’s interface catalogue, telemetry tables, and fixtures summaries.
- Hook guard log (2025-11-12 – Session reset): `git config core.hooksPath` -> `githooks` (runbook Step 2 verification; no additional hook commands required).
- Hook guard log (2025-11-12 – Spec template review): `git config core.hooksPath` -> `githooks`; verification only prior to the documentation audit (no hooks executed beyond the guard check).
- Hook guard log (2025-11-12 – Plan authoring): `git config core.hooksPath` -> `githooks` (no further hook/Gradle commands; doc edit only).
- Hook guard log (2025-11-12 – Deviation log refresh): `git config core.hooksPath` -> `githooks`; verification only, no additional hook/Gradle commands (documentation update).
- Hook guard log (2025-11-12 – Feature 005 alignment): `git config core.hooksPath` -> `githooks`; followed by `./gradlew --no-daemon spotlessApply check` (completed successfully, see verification entry above).
- Hook guard log (2025-11-12 – Feature 006 alignment): `git config core.hooksPath` -> `githooks`; verified prior to the Spotless/Gradle run noted above.
- Hook guard log (2025-11-12 – Feature 007 ordering fix): `git config core.hooksPath` -> `githooks`; confirmed before executing the Spotless/Gradle command.
- Hook guard log (2025-11-12 – Feature 008 ordering fix): `git config core.hooksPath` -> `githooks`; checked prior to the verification run noted above.
- Hook guard log (2025-11-12 – Feature 010 table refresh): `git config core.hooksPath` -> `githooks`; confirmed before running the Spotless/Gradle command above.
- Hook guard log (2025-11-12 – Feature 011 UI mock-ups): `git config core.hooksPath` -> `githooks`; reran before the verification command noted above.
- Hook guard log (2025-11-12 – Feature 012 UI mock-ups): `git config core.hooksPath` -> `githooks`; checked ahead of the Spotless/Gradle run.
- Hook guard log (2025-11-12 – Feature 013 UI mock-ups): `git config core.hooksPath` -> `githooks`; confirmed before the latest Spotless/Gradle invocation.
- Hook guard log (2025-11-11 – Directory provenance Q&A): `git config core.hooksPath` -> `githooks` captured ahead of the credential-expansion / next-gent-simulators / ocra-simulator audit.
- Placeholder retirement (2025-11-11 – user request): Updated the roadmap + feature layout README to document that Features 014+ will create their final directories when prioritised, then removed `docs/4-architecture/features/{credential-expansion,next-gen-simulators,ocra-simulator}` since no active specs lived there.
- Hook guard log (2025-11-11 – Evaluation Q&A session): `git config core.hooksPath` -> `githooks` (verification only; no additional hooks or Gradle targets executed per user's “evaluation only” request).
- Hook guard log (2025-11-11 – Batch P3 Step 6 doc sync): `git config core.hooksPath` -> `githooks` recorded ahead of the roadmap/knowledge-map/runbook refresh so Feature 011 tracking includes the global document sync.
- Hook guard log (2025-11-11 – Stage/commit sync for user request): `git config core.hooksPath` -> `githooks`; `./githooks/pre-commit` exited 0 with no stdout; `./githooks/commit-msg /tmp/tmp.hbt7Yx2DCp` -> `[commit-msg] Running gitlint` plus `3: B5 Body message is too short (4<20): "body"` from gitlint.
- Hook guard log (2025-11-11 – Roadmap regression investigation): `git config core.hooksPath` -> `githooks`; duplicate entry recorded here for Feature 011 tracking.
- Roadmap restoration (2025-11-11 – user request): `git checkout 27b9fa6 -- docs/4-architecture/roadmap.md` to revive the pre-migration Implementation Roadmap after the regression report, followed by `./gradlew --no-daemon spotlessApply check` (doc-only run took 25 s, 96 actionable tasks: 2 executed, 94 up-to-date).
- Clarification gate (2025-11-11): Recorded a new entry in `docs/4-architecture/open-questions.md` requesting direction on what the consolidated roadmap should include (Feature 001–013? additional placeholders?) and reran `./gradlew --no-daemon spotlessApply check` (8 s, configuration cache reused, 96 actionable tasks: 2 executed, 94 up-to-date) to cover the doc edit.
- Governance scrub (2025-11-11 – user request): Removed the remaining legacy migration-log references across AGENTS + specs/plans/tasks, confirmed repository-wide search returns no matches, and reran `./gradlew --no-daemon spotlessApply check` (17 s, 96 actionable tasks: 5 executed, 91 up-to-date).
- Roadmap rewrite (2025-11-11 – user request): Reauthored `docs/4-architecture/roadmap.md` to list consolidated Features 001–013 plus placeholder slots 014+, removed the pending roadmap open question, and left migration references out per owner instructions.
- Roadmap links (2025-11-11 – user request): Swapped the references column to use relative `[spec] · [plan] · [tasks]` links (e.g., `features/001/spec.md`) so rendered viewers resolve correctly and reran `./gradlew --no-daemon spotlessApply check` (15 s, config cache reused, 96 actionable tasks: 2 executed, 94 up-to-date).
- Batch P3 legacy relocation (2025-11-11): Restored Feature 009 legacy directories via `git checkout -- docs/4-architecture/features/009/legacy` and copied legacy specs/plans/tasks for Features 007/008, 019/032, 002/027/028, and 010–015/029/030/031 into the new `legacy/<old-id>/` trees under Features 010–013 using `python` helpers that call `git show origin/main:docs/4-architecture/features/<old-id>/<file>`. Removed the obsolete `docs/4-architecture/features/new-012` staging directory once the copies landed.
- Verification (2025-11-11): `./gradlew --no-daemon spotlessApply check` (doc-only renumbering guard) succeeded after the legacy relocation so Batch P3 can proceed to the remaining reference updates.
- Spec/Plan/Tasks rewrite (2025-11-11): Added legacy coverage tables + checklists for Features 009–013 (specs, plans, tasks) so Batch P3 Steps 3–5 can close before the remaining doc sync; updated plan increments (Feature 011/013 P3-I2) and reran spotless afterwards.
- Verification (2025-11-11 #3): `./gradlew --no-daemon spotlessApply check` after the spec/plan/tasks rewrite updates (configuration cache rebuilt, build successful in 22 s).
- Verification (2025-11-11 – Stage/commit sync for user request): `./gradlew --no-daemon spotlessApply check` succeeded in 20 s (96 actionable tasks: 2 executed, 94 up-to-date).
- Batch P2 redo (2025-11-11): Copied the full Feature 024/026/039/040 specs, plans, and tasks into Features 004/005/006, deleted the `legacy/024`, `legacy/026`, `legacy/039`, and `legacy/040` folders after the targeted suites, and rewrote Feature 004’s spec/plan/tasks to merge the duplicated FR/S/T entries into the template content now displayed above.
- Batch P3 Step 6 global doc sync (2025-11-11): Updated the roadmap, knowledge map, analysis-gate checklist, and quality-gate runbook to reference Features 009–013 (operator console, documentation/knowledge automation, governance, persistence, toolchain). Audited how-to guides for the same references; no edits were required.
- Batch P3 Step 3 legacy cleanup (2025-11-11): Removed the remaining `docs/4-architecture/features/{010,011,012,013}/legacy/` trees via `rm -rf` and confirmed each directory now only contains `{plan.md,spec.md,tasks.md}` using `ls docs/4-architecture/features/<NNN>`.
- Staging directory audit (2025-11-11): `for d in docs/4-architecture/features/operator-console docs/4-architecture/features/docs-and-quality docs/4-architecture/features/platform-foundations; do if [ -d "$d" ]; then echo "exists: $d"; else echo "missing: $d"; fi; done` -> all three reported `missing`, so no additional cleanup needed.
- Batch P3 legacy cleanup (2025-11-11): Removed `docs/4-architecture/features/003/legacy/004`, reran the hook guard (`git config core.hooksPath` -> `githooks`; `tmp_index=$(mktemp); ... ./githooks/pre-commit` still reports “fatal: unable to write new index file” before “No staged changes detected; skipping hook”), and reran `./gradlew --no-daemon spotlessApply check` so the rewrite log records the doc-only deletion plus its verification gate.
- Verification log (2025-11-11): Hook guard rerun (`git config core.hooksPath` -> `githooks`) plus `tmp_index=$(mktemp); GIT_INDEX_FILE=$tmp_index git read-tree --empty; GIT_INDEX_FILE=$tmp_index ./githooks/pre-commit`, `./gradlew --no-daemon spotlessApply check` (rerun, documented after deleting `docs/4-architecture/features/003/legacy/004`), `./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.*WebAuthn*"`, `node --test rest-api/src/test/javascript/emv/console.test.js`, `OPENAUTH_SIM_PERSISTENCE_DATABASE_PATH=build/tmp/test-credentials.db ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EmvCapOperatorUiSeleniumTest"`, and `./gradlew --no-daemon :ui:test` all succeeded after removing the `docs/4-architecture/features/{004,005,006}/legacy` directories.
- Last green commands: `rm -rf docs/4-architecture/features/operator-console docs/4-architecture/features/docs-and-quality docs/4-architecture/features/platform-foundations docs/4-architecture/features/new-010 docs/4-architecture/features/new-012` (2025-11-11 – Batch P3 Phase 2 legacy tree cleanup for Features 009–013), `./gradlew --no-daemon spotlessApply check` (2025-11-11 – legacy cleanup verification), `git config core.hooksPath` (2025-11-11 – Feature 011 T-011-04 hook guard log), `tmp_index=$(mktemp); GIT_INDEX_FILE=$tmp_index git read-tree --empty; GIT_INDEX_FILE=$tmp_index ./githooks/pre-commit` (2025-11-11 – Feature 011 T-011-04 dry-run), `./gradlew --no-daemon spotlessApply check` (2025-11-11 – Feature 011–013 cross-doc sync verification), `./gradlew --no-daemon qualityGate` (2025-11-11 – Feature 013 command-suite verification), `./gradlew --no-daemon spotlessApply check` (2025-11-11 – Batch P3 Feature 009 scaffolding/legacy relocation), `./gradlew --no-daemon spotlessApply check` (2025-11-11 – Batch P2 doc relocation verification), `./gradlew --no-daemon spotlessApply check` (2025-11-11 – Batch P1 renumbering verification), `./gradlew --no-daemon spotlessApply check` (2025-11-10 – Feature 005 template refresh verification), `./gradlew --no-daemon spotlessApply check` (2025-11-10 – Feature 004 template refresh verification), `./gradlew --no-daemon spotlessApply check` (2025-11-10 – Feature 003 template refresh verification), `./gradlew --no-daemon spotlessApply check` (2025-11-10 – Feature 002 template refresh verification), `./gradlew --no-daemon spotlessApply check` (2025-11-10 – Feature 001 template refresh verification), `./gradlew --no-daemon spotlessApply check` (2025-11-10 – template refresh sweep for Features 036/029/041/039/026), `OPENAPI_SNAPSHOT_WRITE=true ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.OpenApiSnapshotTest"` (2025-11-09 – provenance schema snapshot regenerated), `./gradlew --no-daemon --console=plain :application:test`, `./gradlew --no-daemon --console=plain :cli:test`, `./gradlew --no-daemon --console=plain :rest-api:test` (full EMV + EUDIW suites), `./gradlew --no-daemon --console=plain :ui:test`, `./gradlew --no-daemon --console=plain pmdMain pmdTest`, `./gradlew --no-daemon --console=plain spotlessApply check`, `node --test rest-api/src/test/javascript/emv/console.test.js`, and `OPENAUTH_SIM_PERSISTENCE_DATABASE_PATH=build/tmp/test-credentials.db ./gradlew --no-daemon :rest-api:test --tests "io.openauth.sim.rest.ui.EmvCapOperatorUiSeleniumTest"`. All commands completed successfully after copying `trace-provenance-example.json` into `rest-api/docs/test-vectors/emv-cap/`. Additional doc-only verification: `./gradlew --no-daemon spotlessApply check` (2025-11-09 – Implementation Drift Gate sweep) remained green after the roadmap/how-to updates.
- Hook guard verification (2025-11-11 session reset): `git config core.hooksPath` -> `githooks`.
- Build status: Feature 039’s Implementation Drift Gate is complete—console assets render all six provenance sections, REST/CLI/application layers honour `includeTrace` opt-outs, the canonical fixture now lives in both `docs/test-vectors` and `rest-api/docs/test-vectors`, the drift report is logged, and the aggregate Gradle gate is green. Feature 040 is unblocked and can resume at T4018 (console alias/history wiring + verbose builder consolidation) while Feature 041 planning remains unchanged. Note: a malformed CLI invocation (`./gradlew --no-daemon spotlessApply check,workdir:`) failed immediately because of the stray argument comma; reran the command without the typo before logging the Feature 011–013 verification results.
- New workstream kickoff (2025-11-07): Feature 041 – Operator Console JavaScript Modularization & Test Harness now has a Draft specification, feature plan, and tasks checklist; roadmap entry #40 created and the spec remains open so future protocol additions can extend it.
- Clarifications (2025-11-01): EUDIW OpenID4VP simulator scope confirmed—remote OpenID4VP flows only; credential formats include SD-JWT VC plus ISO/IEC 18013-5 mdoc; align with HAIP profile; simulator covers verifier+wallet roles; adopt hybrid fixture strategy (synthetic now, ingest EU conformance vectors when available). 2025-11-06 update: wallet simulator recomputes SD-JWT disclosure hashes from supplied disclosures (Option A).
- Clarifications (2025-11-05): EMV/CAP operator Evaluate panel keeps inline mode active when a sample vector is selected; no automatic switch to stored credential mode.
- Quality gate note: Full pipeline `./gradlew --no-daemon :application:test :cli:test :rest-api:test :ui:test pmdMain pmdTest spotlessApply check` completed 2025-11-05 (Jacoco aggregated report regenerated; branch coverage remains 2161/3087 ≈0.7000) alongside refreshed OpenAPI snapshots for the sanitised EMV credential directory schema.

## Workstream Summary
| Workstream | Status | Last Increment | Next Increment | Notes |
|------------|--------|----------------|----------------|-------|
| Feature 039 – EMV/CAP Simulation Services | In review | T3952 – Implementation Drift Gate | Owner acceptance hand-off | Drift Gate verifies spec R1–R10 coverage, dual `trace-provenance-example.json` fixtures stay mirrored, roadmap/how-to docs now carry the sync requirement, and `./gradlew --no-daemon spotlessApply check` remained green post-doc sweep. 2025-11-10: spec/plan/tasks refreshed to the latest templates (metadata table, verification log) ahead of acceptance. Awaiting owner sign-off before archiving the workstream. |
| Feature 026 – FIDO2/WebAuthn Attestation Support | In review | I45 – Stored credential secret sanitisation | Owner acceptance sign-off | Sanitisation merged (`bcaad35`): stored credential samples expose only signing key handles + `[stored-server-side]` placeholders; full suite green (2025-11-05). 2025-11-10: spec/plan/tasks rewriteed to the new template (metadata tables, FR/NFR, interface catalogue, task log). Awaiting owner confirmation to mark the workstream complete. |
| Feature 029 – PMD Rule Hardening | In progress | T2903 (Ruleset expansion & baseline) | T2902 – Governance sync & backlog updates | 2025-11-10: Spec/plan/tasks rewriteed to the new templates with metadata tables, catalogue entries, and task intents; PMD toolVersion bumped to 7.17.0 with dependency locks refreshed via `--write-locks`; legacy `AssignmentInOperand` findings refactored and `./gradlew --no-daemon pmdMain pmdTest` stays green with NonExhaustiveSwitch enabled. |
| Feature 036 - Verbose Trace Tier Controls | Proposed | — | T-036-01 - Tier helper specification tests (red) | 2025-11-11: Spec, plan, and tasks rewritten to the refreshed templates (metadata table, FR/NFR catalogue, S-036 scenario matrix, interface catalogues, Spec DSL, templated increments/tasks). Implementation still pending; next action is to stage failing helper tests under I1/T-036-01. |
| Feature 041 – Operator Console JS Modularization & Test Harness | Planning | New spec/plan/tasks seeded 2025-11-07 | T4101 – Console asset inventory & extraction notes | 2025-11-10: Spec/plan/tasks refreshed to the new template, including harness DSL + governance checklists; workstream remains Draft until console suites land. |
| Feature 040 – EUDIW OpenID4VP Simulator | In progress | T-040-23 – Live Trusted Authority ingestion | I11 – Drift gate + final documentation | Owner directive Option A executed 2025-11-10: Features 036/029/041 rewriteed to new templates. 2025-11-10 follow-up: Feature 040 spec/plan/tasks now use the refined templates (FR/NFR tables, S-040 scenarios, T-040 tasks) with T4018/T4019/T4020 already green and T-040-23 queued before Drift Gate finalisation. |
| _Reminder_ |  |  |  | Keep this table limited to active workstreams; move completed features to the roadmap instead of tracking them here. |

> Open questions live exclusively in `docs/4-architecture/open-questions.md`; consult that log for any pending clarifications.

## Reference Links
- Roadmap entries: `docs/4-architecture/roadmap.md` (Workstreams 27, 34, 35, 40)
- Additional spec: `docs/4-architecture/features/029/spec.md`
- Additional plan: `docs/4-architecture/features/029/plan.md`
- Additional tasks: `docs/4-architecture/features/029/tasks.md`
- Additional spec: `docs/4-architecture/features/036/spec.md`
- Additional plan: `docs/4-architecture/features/036/plan.md`
- Additional tasks: `docs/4-architecture/features/036/tasks.md`
- Spec (Feature 041): `docs/4-architecture/features/041/spec.md`
- Plan (Feature 041): `docs/4-architecture/features/041/plan.md`
- Tasks (Feature 041): `docs/4-architecture/features/041/tasks.md`
- Spec (Feature 040): `docs/4-architecture/features/040/spec.md`
- Plan (Feature 040): `docs/4-architecture/features/040/plan.md`
- Tasks (Feature 040): `docs/4-architecture/features/040/tasks.md`
- Quick reference: `docs/5-operations/session-quick-reference.md`

> Update this snapshot before ending each session and after significant context changes.
- Plan remediation Step 10 (2025-11-12 – done): Ran `scripts/check_plan_headers.py` to confirm Features 001–013 now match `docs/templates/feature-plan-template.md` with no missing/extra headers.
- Verification (2025-11-12 – doc sweep): `./gradlew --no-daemon spotlessApply check` succeeded (30 s, 96 tasks: 8 executed, 88 up-to-date) after updating the feature plans.
- Verification (2025-11-12 – template alignment handoff): `./gradlew --no-daemon spotlessApply check` (9 s, 96 tasks: 2 executed, 94 up-to-date) after capturing the spec/plan/task template remediations and cleaning up the deviation JSON snapshots.
